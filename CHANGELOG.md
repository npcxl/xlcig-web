# 更新日志

所有关于此项目的重要更改都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/spec/v2.0.0.html)。

## [0.4.0] - 2025-07-06 3:57 已发布

### 🎉 新增功能
- **个人中心评论管理**: 完善用户评论管理功能
  - 新增"我的评论"标签页，集中管理用户发表的所有评论
  - 支持评论统计显示（总数、平均评分、获得点赞数）
  - 提供评论编辑和删除功能
  - 显示评论对应的产品信息和图片
  - 支持匿名评论标识和验证购买状态展示

- **评论系统重构**: 全面升级产品评论功能
  - **匿名发布支持**: 用户可选择匿名发表评论，保护隐私
  - **分页浏览**: 评论列表每页显示5条，提供上一页/下一页导航
  - **表单位置优化**: 评论发布表单移至评论列表上方，提升用户体验
  - **丰富的用户信息展示**: 支持用户头像、昵称、注册状态标识
  - **多重身份标识系统**:
    - 🕵️ 匿名用户标识
    - ✅ 已验证购买标识
    - 👤 注册用户标识

### 🔧 改进
- **页面头部统一**: 产品详情页导航栏规范化
  - 统一使用 `AppHeader` 组件，保持与其他页面一致的导航体验
  - 标准化面包屑导航和页面标题显示
  - 移除自定义导航实现，提升维护性

- **API接口升级**: 适配后端评论系统新版本
  - 新增 `is_anonymous` 字段支持匿名发布
  - 完善用户信息结构，包含头像、昵称、邮箱等字段
  - 支持产品图片多张显示和评论图片上传
  - 优化返回数据结构，提供更丰富的评论元信息

- **评论显示优化**: 提升评论内容展示质量
  - 支持用户头像显示（非匿名用户）
  - 智能用户名显示逻辑（匿名/昵称/用户名）
  - 评论图片网格布局展示
  - 产品信息缺失时的友好提示

### 🎨 样式优化
- **评论界面美化**: 统一深色主题设计风格
  - 玻璃拟态效果的评论卡片设计
  - 渐变背景和阴影效果提升视觉层次
  - 标识徽章设计规范化（匿名、验证购买、注册用户）
  - 响应式布局适配移动端显示

### ⚡ 性能优化
- **分页加载**: 评论分页减少单次加载数据量
  - 从一次性加载所有评论改为分页加载
  - 每页5条评论，减少首次加载时间
  - 筛选和排序时自动重置到第一页

- **智能数据处理**: 优化评论数据计算
  - 客户端计算平均评分，减少服务器负担
  - 本地聚合点赞数统计
  - 图片数据智能解析处理

### 🔧 技术改进
- **类型定义完善**: 增强TypeScript类型支持
  - 完善评论相关接口类型定义
  - 新增用户信息和匿名状态类型
  - 优化API响应数据类型结构

- **组件化重构**: 提升代码复用性
  - 评论表单组件独立化
  - 评论列表展示组件模块化
  - 分页组件可复用设计

### 🐛 修复
- **数据渲染问题**: 修复评论数据显示异常
  - 解决产品图片缺失时的显示错误
  - 修复用户信息为空时的渲染问题
  - 优化评论统计数据的容错处理

---

## [0.3.1] - 2025-07-05 23:34 未发布

### 🎨 视觉效果优化
- **首页背景特效**: 重新设计首页背景视觉效果
  - 添加动漫风格流星特效，8个流星以6秒周期划过夜空
  - 实现三层星空背景，包含不同亮度和闪烁效果的星星
  - 流星采用简洁的白色渐变尾迹设计，更加优雅
  - 保留原有的渐变背景装饰效果

### 🔧 代码优化
- **装饰性图片功能**: 开发了图片装饰功能（暂时注释）
  - 支持5张图片在全屏范围内的散乱分布
  - 实现无边框、大尺寸的图片展示
  - 添加完整的响应式设计适配
  - 为后续需要时快速启用做好准备

### 🌟 技术改进
- **CSS动画优化**: 提升动画性能和视觉效果
  - 使用CSS原生动画代替JavaScript动画
  - 优化动画缓动函数，提供更自然的视觉体验
  - 实现多层次的视觉深度效果

### 📱 响应式设计
- **移动端适配**: 完善移动设备上的显示效果
  - 优化流星特效在小屏幕上的展示
  - 调整星空密度适配不同屏幕尺寸
  - 确保所有动画在移动设备上的流畅性

---

## [0.3.0] - 2025-07-05 21:03 已发布

### 🎉 新增功能
- **头像上传功能**: 完善个人中心头像上传
  - 配置uploadApi.uploadAvatar方法
  - 添加文件格式验证（JPEG、PNG、GIF、WebP）
  - 支持文件大小限制（最大2MB）
  - 实现头像预览和错误处理

### 🔧 改进
- **UI按钮优化**: 统一优化所有页面按钮间距
  - 将按钮上下内边距从 `py-4` 调整为 `py-3`
  - 覆盖页面：商品详情、订单、购物车结算、首页、个人中心
  - 优化组件：SteamCarousel、PageLoader等
  - 按钮外观更加紧凑美观

- **页面头部统一**: 统一个人中心相关页面导航栏
  - 个人中心、订单页面、地址管理页面使用统一AppHeader组件
  - 移除所有返回按钮，保持导航一致性
  - 显示用户登录信息和头像
  - 统一面包屑导航样式

- **用户状态管理优化**: 改进头像更新机制
  - 使用Pinia store进行响应式用户信息更新
  - 头像上传后立即更新UI显示
  - 移除本地存储依赖，确保数据一致性

- **产品分类性能优化**: 简化分类数量计算
  - 只显示"全部产品"的总数量
  - 移除各分类单独数量计算，减少API调用
  - 从4次API调用优化为1次，提升页面加载速度
  - 避免产品数量多时的性能负担

### 📦 依赖管理
- 完善uploadApi模块的类型支持
- 优化文件上传相关依赖

### 待完成
- [ ] 替换 Babylon.js 为 Three.js 重新实现 3D 加载动画（解决 SSR 渲染冲突问题）
- [ ] 优化 SSR 兼容性
---


## [0.2.0] - 2025-07-05 04:10 此版本未发布至服务器

### 🎉 新增功能
- **3D加载屏幕**: 开始开发3D加载动画效果
  - 创建 `LoadingScreen3D.vue` 组件
  - 添加 Babylon.js 3D 渲染支持

### 🔧 改进
- **用户状态管理**: 解决登录状态闪烁问题
  - 在 `app.vue` 中添加用户状态初始化逻辑
  - 避免 SSR 环境下的状态不一致
  - 改善用户体验，消除页面加载时的状态跳跃

### 📦 依赖管理
- 添加 Babylon.js 相关依赖
  - `@babylonjs/core`: 核心3D渲染引擎
  - `@babylonjs/loaders`: 模型加载器
  - `@babylonjs/materials`: 材质库

### 🐛 已知问题
- **Babylon.js SSR 兼容性**: 在 Nuxt.js SSR 环境中存在兼容性问题
  - `camera.attachControls is not a function`
  - `Cannot read properties of undefined (setting 'isScatteringEnabled')`
  - Shadow generator 相关错误
- **解决方案**: 计划改用 Three.js 替代 Babylon.js

---

## [0.1.0] 初始化

### 🎉 项目初始化
- **项目结构重构**: 从 monorepo 转换为纯前端项目
  - 移除所有后端相关文件 (Docker, nginx, 部署脚本等)
  - 将 `frontend/` 目录内容移动到根目录
  - 清理不必要的配置文件

### 🔧 环境配置
- **依赖管理**: 修复缺失的依赖问题
  - 解决 `Cannot find module 'concurrently'` 错误
  - 运行 `npm install` 安装所有必需依赖

### 📁 文件结构
```
xlweb/
├── components/           # Vue 组件
│   ├── LoadingScreen.vue
│   ├── LoadingScreen3D.vue
│   └── ...
├── pages/               # 页面路由
├── stores/              # 状态管理
├── utils/               # 工具函数
├── composables/         # 组合式函数
└── assets/              # 静态资源
```

### 🚀 核心功能
- **Nuxt.js 3**: 基于 Vue 3 的现代化框架
- **Tailwind CSS**: 实用优先的CSS框架
- **TypeScript**: 类型安全的JavaScript
- **用户认证**: 完整的登录/注册系统
- **API 集成**: 完整的后端API调用封装

---

## 更新说明

### 版本号规则
- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 变更类型
- **🎉 新增功能**: 新增的功能
- **🔧 改进**: 对现有功能的改进
- **🐛 修复**: 错误修复
- **📦 依赖管理**: 依赖包的变更
- **🔒 安全**: 安全性相关修复
- **📚 文档**: 文档更新
- **🎨 样式**: 代码格式、UI/UX改进
- **⚡ 性能**: 性能优化
- **🔨 重构**: 代码重构
- **🗑 移除**: 移除的功能或文件

