import{_ as ze}from"./B7P3ZcZ_.js";import{_ as Be}from"./GFptVlNT.js";import{_ as Ie}from"./BAbLmehF.js";import{E as Ne,G as qe,r as m,H as pe,y as Ge,z as Te,o,w as be,a as e,b as ge,c as r,s as g,d,l as i,t as l,p as C,F as M,j as A,x as xe,q as h,C as _,_ as De}from"./DYUlAN8C.js";import{u as He,p as Je}from"./Cdo73MRm.js";import{api as j,uploadApi as U}from"./Bd2jT9es.js";import{c as Ke}from"./CD5Qg5Z1.js";import"./B2PraNO7.js";import"./CFjwhGiX.js";import"./BZyWtx9-.js";import"./Dw2SZdRQ.js";import"./oeYQgGxL.js";import"./CF7zu2V2.js";import"./By1bEtc9.js";const We={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},Oe={class:"relative z-10 py-8"},Qe={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},Xe={class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 mb-6 animate-fade-in-up animation-delay-200"},Ye={class:"flex items-center space-x-6"},Ze={class:"relative group"},es={class:"w-24 h-24 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center text-white text-2xl font-bold shadow-lg shadow-cyan-500/20 group-hover:shadow-cyan-500/40 transition-all duration-300 transform group-hover:scale-105 overflow-hidden"},ss=["src","alt"],ts={key:1},as={class:"flex-1"},os={class:"text-2xl font-bold text-white mb-2"},rs={class:"text-gray-300 mb-1"},ns={key:0,class:"text-sm text-gray-400"},ls={class:"flex items-center space-x-4 mt-3"},is={class:"flex flex-col space-y-3"},ds={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 overflow-hidden animate-fade-in-up animation-delay-400"},cs={class:"border-b border-gray-700/50"},us={class:"flex space-x-8"},ms=["onClick"],ps={class:"p-8"},bs={key:0,class:"space-y-6 animate-fade-in"},gs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xs={class:"glass-morphism-dark rounded-lg p-4 border border-gray-700/50 hover:border-cyan-500/30 transition-all duration-300"},fs={class:"text-white text-lg"},ys={class:"glass-morphism-dark rounded-lg p-4 border border-gray-700/50 hover:border-cyan-500/30 transition-all duration-300"},vs={class:"text-white text-lg"},hs={class:"glass-morphism-dark rounded-lg p-4 border border-gray-700/50 hover:border-cyan-500/30 transition-all duration-300"},_s={class:"text-white text-lg"},ws={class:"glass-morphism-dark rounded-lg p-4 border border-gray-700/50 hover:border-cyan-500/30 transition-all duration-300"},ks={class:"text-white text-lg"},Ps={class:"glass-morphism-dark rounded-lg p-4 border border-gray-700/50 hover:border-cyan-500/30 transition-all duration-300 md:col-span-2"},Cs={class:"text-white text-lg"},js={key:1,class:"space-y-6 animate-fade-in"},Us={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fs={class:"space-y-2"},Rs={class:"space-y-2"},Ms={class:"space-y-2 md:col-span-2"},As={class:"flex justify-end space-x-4 mt-8"},Ls=["disabled"],Vs={key:0,class:"loading loading-spinner loading-sm mr-2"},Es={key:1,class:"bi bi-check-circle mr-2"},$s={key:2,class:"space-y-6 animate-fade-in"},Ss={class:"max-w-md space-y-6"},zs={class:"space-y-2"},Bs={class:"space-y-2"},Is={class:"space-y-2"},Ns={class:"flex justify-end space-x-4 mt-8"},qs=["disabled"],Gs={key:0,class:"loading loading-spinner loading-sm mr-2"},Ts={key:1,class:"bi bi-shield-check mr-2"},Ds={key:3,class:"space-y-6 animate-fade-in"},Hs={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},Js={class:"glass-morphism-dark rounded-lg p-6 border border-gray-700/50 text-center"},Ks={class:"text-3xl font-bold text-cyan-400 mb-2"},Ws={class:"glass-morphism-dark rounded-lg p-6 border border-gray-700/50 text-center"},Os={class:"text-3xl font-bold text-yellow-400 mb-2"},Qs={class:"glass-morphism-dark rounded-lg p-6 border border-gray-700/50 text-center"},Xs={class:"text-3xl font-bold text-green-400 mb-2"},Ys={class:"space-y-4"},Zs={key:0,class:"text-center py-8"},et={key:1,class:"space-y-4"},st={class:"flex items-start justify-between mb-4"},tt={class:"flex items-center gap-4"},at={class:"w-16 h-16 rounded-lg overflow-hidden bg-gray-700/50"},ot=["src","alt"],rt={key:1,class:"w-full h-full flex items-center justify-center"},nt={class:"font-bold text-white text-lg"},lt={class:"text-gray-400 text-sm"},it={class:"flex items-center gap-2 mt-1"},dt={key:0,class:"text-xs px-2 py-1 bg-gray-600/50 text-gray-300 rounded"},ct={key:1,class:"text-xs px-2 py-1 bg-blue-600/30 text-blue-300 rounded"},ut={class:"flex items-center gap-2"},mt={class:"flex"},pt={class:"text-white font-medium"},bt={class:"text-gray-300 mb-4"},gt={key:0,class:"grid grid-cols-3 gap-2 mb-4"},xt=["src","alt"],ft={class:"flex items-center justify-between pt-4 border-t border-gray-700/50"},yt={class:"flex items-center gap-4 text-sm text-gray-400"},vt={class:"flex items-center gap-1"},ht={key:0,class:"text-green-400"},_t={class:"text-gray-500"},wt={class:"flex items-center gap-2"},kt=["onClick"],Pt=["onClick"],Ct={key:2,class:"text-center py-12"},jt={key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in"},Ut={class:"glass-card-dark rounded-2xl p-6 max-w-md w-full mx-4 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 animate-scale-in"},Ft={class:"space-y-6"},Rt={class:"flex justify-center"},Mt={class:"relative"},At=["src"],Lt={key:1,class:"text-center"},Vt={key:0,class:"text-center"},Et={class:"text-sm text-gray-400"},$t={class:"text-xs text-gray-500"},St={class:"flex justify-end space-x-4"},zt=["disabled"],Bt={key:0,class:"loading loading-spinner loading-sm mr-2"},It={key:1,class:"bi bi-check-circle mr-2"},Nt=Ne({__name:"profile",setup(qt){var J;const n=qe(),{message:z}=Ke(["message"]),F=t=>{z.success(t,{duration:3e3})},L=t=>{z.error(t,{duration:4e3})},w=m(!1),k=m(!1),V=m(!1),P=m(!1),f=m(null),x=m(null),p=m("info"),E=m([]),B=m(0),I=m(0),N=m(0),$=m(!1),fe=async()=>{try{const t=await j.auth.getProfile();return t.data?(n.updateUser(t.data),c.username=t.data.username,c.nickname=t.data.nickname||"",c.phone=t.data.phone||"",t.data):null}catch(t){throw console.error("获取用户信息失败:",t),new Error("获取用户信息失败")}},{isPageLoading:ye,isDataLoading:ve,hasError:he,errorMessage:_e,reloadPage:we}=He({...Je.fast,cacheKey:`profile-${((J=n.user)==null?void 0:J.id)||"default"}`,loadFunction:fe,onPageReady:t=>{t&&(n.updateUser(t),c.username=t.username,c.nickname=t.nickname||"",c.phone=t.phone||"")}}),ke=[{key:"info",label:"基本信息",icon:"bi bi-person"},{key:"edit",label:"编辑资料",icon:"bi bi-pencil-square"},{key:"password",label:"修改密码",icon:"bi bi-shield-lock"},{key:"reviews",label:"我的评论",icon:"bi bi-chat-dots"}],c=pe({username:"",nickname:"",phone:""}),u=pe({currentPassword:"",newPassword:"",confirmPassword:""}),Pe={user:"bg-blue-500/20 text-blue-300 border border-blue-500/30",merchant:"bg-purple-500/20 text-purple-300 border border-purple-500/30",admin:"bg-red-500/20 text-red-300 border border-red-500/30"},Ce={user:"普通用户",merchant:"商家",admin:"管理员"},je={active:"bg-green-500/20 text-green-300 border border-green-500/30",inactive:"bg-gray-500/20 text-gray-300 border border-gray-500/30",banned:"bg-red-500/20 text-red-300 border border-red-500/30"},Ue={active:"正常",inactive:"未激活",banned:"已封禁"},Fe=async()=>{try{w.value=!0;const t=await j.auth.updateProfile(c);t.data&&(n.updateUser(t.data),F("个人信息更新成功！"),p.value="info")}catch(t){console.error("更新个人信息失败:",t),t(t.message||"更新失败，请重试")}finally{w.value=!1}},Re=async()=>{if(u.newPassword!==u.confirmPassword){L("两次输入的密码不一致");return}try{k.value=!0,(await j.auth.changePassword({currentPassword:u.currentPassword,newPassword:u.newPassword})).success&&(F("密码修改成功！"),q(),p.value="info")}catch(t){console.error("修改密码失败:",t),t(t.message||"修改密码失败，请重试")}finally{k.value=!1}},Me=()=>{n.user&&(c.username=n.user.username,c.nickname=n.user.nickname||"",c.phone=n.user.phone||"")},q=()=>{u.currentPassword="",u.newPassword="",u.confirmPassword=""},G=()=>{var t;(t=document.getElementById("avatar-input"))==null||t.click()},Ae=t=>{var y;const b=(y=t.target.files)==null?void 0:y[0];if(b){const R=U.validateImageFile(b);if(!R.valid){L(R.message||"文件格式不支持");return}x.value=b,f.value=U.getFilePreviewUrl(b)}},Le=async()=>{if(x.value)try{P.value=!0;const t=U.validateImageFile(x.value);if(!t.valid){L(t.message||"文件验证失败");return}const s=await U.uploadAvatar(x.value);if(s.success&&s.data)n.updateUser(s.data.user),F("头像上传成功！"),T();else throw new Error(s.message||"上传失败")}catch(t){console.error("上传头像失败:",t),t(t.message||"上传失败，请重试")}finally{P.value=!1}},T=()=>{V.value=!1,x.value=null,f.value&&(U.releaseFilePreviewUrl(f.value),f.value=null)},Ve=t=>{console.log("头像加载失败，使用默认头像");const s=t.target;s.style.display="none"},D=t=>t?new Date(t).toLocaleDateString("zh-CN"):"",H=async()=>{try{$.value=!0;const t=await j.reviews.getMyReviews();if(t.data){if(E.value=t.data.reviews,B.value=t.data.pagination.total_items,t.data.reviews.length>0){const s=t.data.reviews.reduce((b,y)=>b+y.rating,0);I.value=Math.round(s/t.data.reviews.length*10)/10}N.value=t.data.reviews.reduce((s,b)=>s+b.helpful_count,0)}}catch(t){console.error("加载用户评论失败:",t)}finally{$.value=!1}},Ee=t=>{console.log("编辑评论:",t)},$e=async t=>{try{if(!confirm("确定要删除这条评论吗？"))return;await j.reviews.deleteReview(t),F("评论删除成功"),await H()}catch(s){console.error("删除评论失败:",s),s("删除评论失败，请重试")}},Se=t=>({pending:"待审核",approved:"已通过",rejected:"已拒绝"})[t]||"未知";return Ge(p,t=>{t==="reviews"&&H()}),(t,s)=>{const b=ze,y=Be,R=Ie;return o(),Te(R,{"is-page-loading":i(ye),"is-data-loading":i(ve),"has-error":i(he),"error-message":i(_e),"loading-title":"正在加载用户信息...","loading-message":"请稍候",onRetry:i(we)},{default:be(()=>{var K,W,O,Q,X,Y,Z,ee,se,te,ae,oe,re,ne,le,ie,de,ce,ue;return[e("div",We,[s[47]||(s[47]=e("div",{class:"fixed inset-0 pointer-events-none"},[e("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"})],-1)),ge(b,{"show-back-button":!1,"show-nav-menu":!1,"show-breadcrumb":!0,"show-location":!1,"show-search-button":!1,"show-notification-button":!1,"show-decorations":!1,"logo-size":"medium","current-page-title":"个人中心"}),e("div",Oe,[e("div",Qe,[s[41]||(s[41]=e("div",{class:"mb-8 animate-fade-in-up"},[e("div",{class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},[e("h1",{class:"text-4xl font-bold text-white mb-3 flex items-center gap-3"},[e("i",{class:"bi bi-person-circle text-cyan-400 text-3xl animate-bounce-gentle"}),d(" 个人中心 ")]),e("p",{class:"text-gray-300 text-lg"},"管理您的个人信息和账户设置")])],-1)),e("div",Xe,[e("div",Ye,[e("div",Ze,[e("div",es,[(K=i(n).user)!=null&&K.avatar?(o(),r("img",{key:0,src:i(n).user.avatar,alt:(((W=i(n).user)==null?void 0:W.nickname)||((O=i(n).user)==null?void 0:O.username)||"U")+"的头像",class:"w-full h-full object-cover",onError:Ve},null,40,ss)):(o(),r("span",ts,l((((Q=i(n).user)==null?void 0:Q.nickname)||((X=i(n).user)==null?void 0:X.username)||"U").charAt(0).toUpperCase()),1))]),e("button",{onClick:s[0]||(s[0]=a=>V.value=!0),class:"absolute bottom-0 right-0 bg-cyan-500 text-white rounded-full p-2 hover:bg-cyan-400 transition-all duration-200 transform hover:scale-110 shadow-lg shadow-cyan-500/20"},s[9]||(s[9]=[e("i",{class:"bi bi-camera text-sm"},null,-1)]))]),e("div",as,[e("h2",os,l(((Y=i(n).user)==null?void 0:Y.nickname)||((Z=i(n).user)==null?void 0:Z.username)||"加载中..."),1),e("p",rs,l(((ee=i(n).user)==null?void 0:ee.email)||""),1),(se=i(n).user)!=null&&se.nickname&&((te=i(n).user)!=null&&te.username)?(o(),r("p",ns,"用户名: "+l(i(n).user.username),1)):g("",!0),e("div",ls,[e("span",{class:C(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",Pe[((ae=i(n).user)==null?void 0:ae.role)||"user"]])},l(Ce[((oe=i(n).user)==null?void 0:oe.role)||"user"]),3),e("span",{class:C(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",je[((re=i(n).user)==null?void 0:re.status)||"active"]])},l(Ue[((ne=i(n).user)==null?void 0:ne.status)||"active"]),3)])]),e("div",is,[e("button",{onClick:s[1]||(s[1]=a=>p.value="edit"),class:"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},s[10]||(s[10]=[e("i",{class:"bi bi-pencil-square mr-2"},null,-1),d(" 编辑资料 ")])),e("button",{onClick:s[2]||(s[2]=a=>p.value="password"),class:"btn-outline-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},s[11]||(s[11]=[e("i",{class:"bi bi-shield-lock mr-2"},null,-1),d(" 修改密码 ")]))])])]),e("div",ds,[e("div",cs,[e("nav",us,[(o(),r(M,null,A(ke,a=>e("button",{key:a.key,onClick:S=>p.value=a.key,class:C(["py-3 px-6 text-sm font-medium border-b-2 transition-all duration-300 flex items-center gap-2",p.value===a.key?"border-cyan-500 text-cyan-400 bg-cyan-500/10":"border-transparent text-gray-400 hover:text-white hover:border-gray-500"])},[e("i",{class:C(a.icon)},null,2),d(" "+l(a.label),1)],10,ms)),64))])]),e("div",ps,[p.value==="info"?(o(),r("div",bs,[e("div",gs,[e("div",xs,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"用户名",-1)),e("p",fs,l(((le=i(n).user)==null?void 0:le.username)||"-"),1)]),e("div",ys,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"昵称",-1)),e("p",vs,l(((ie=i(n).user)==null?void 0:ie.nickname)||"-"),1)]),e("div",hs,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"邮箱",-1)),e("p",_s,l(((de=i(n).user)==null?void 0:de.email)||"-"),1)]),e("div",ws,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"手机号",-1)),e("p",ks,l(((ce=i(n).user)==null?void 0:ce.phone)||"-"),1)]),e("div",Ps,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"注册时间",-1)),e("p",Cs,l(D((ue=i(n).user)==null?void 0:ue.created_at)||"-"),1)])])])):g("",!0),p.value==="edit"?(o(),r("div",js,[e("form",{onSubmit:xe(Fe,["prevent"])},[e("div",Us,[e("div",Fs,[s[17]||(s[17]=e("label",{for:"username",class:"block text-sm font-medium text-cyan-400"},"用户名",-1)),h(e("input",{id:"username","onUpdate:modelValue":s[3]||(s[3]=a=>c.username=a),type:"text",class:"input-dark w-full",placeholder:"请输入用户名"},null,512),[[_,c.username]])]),e("div",Rs,[s[18]||(s[18]=e("label",{for:"nickname",class:"block text-sm font-medium text-cyan-400"},"昵称",-1)),h(e("input",{id:"nickname","onUpdate:modelValue":s[4]||(s[4]=a=>c.nickname=a),type:"text",class:"input-dark w-full",placeholder:"请输入昵称"},null,512),[[_,c.nickname]])]),e("div",Ms,[s[19]||(s[19]=e("label",{for:"phone",class:"block text-sm font-medium text-cyan-400"},"手机号",-1)),h(e("input",{id:"phone","onUpdate:modelValue":s[5]||(s[5]=a=>c.phone=a),type:"tel",class:"input-dark w-full",placeholder:"请输入手机号"},null,512),[[_,c.phone]])])]),e("div",As,[e("button",{type:"button",onClick:Me,class:"btn-outline-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},s[20]||(s[20]=[e("i",{class:"bi bi-arrow-clockwise mr-2"},null,-1),d(" 重置 ")])),e("button",{type:"submit",disabled:w.value,class:"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed"},[w.value?(o(),r("span",Vs)):(o(),r("i",Es)),d(" "+l(w.value?"保存中...":"保存修改"),1)],8,Ls)])],32)])):g("",!0),p.value==="password"?(o(),r("div",$s,[e("form",{onSubmit:xe(Re,["prevent"])},[e("div",Ss,[e("div",zs,[s[21]||(s[21]=e("label",{for:"currentPassword",class:"block text-sm font-medium text-cyan-400"},"当前密码",-1)),h(e("input",{id:"currentPassword","onUpdate:modelValue":s[6]||(s[6]=a=>u.currentPassword=a),type:"password",class:"input-dark w-full",placeholder:"请输入当前密码",required:""},null,512),[[_,u.currentPassword]])]),e("div",Bs,[s[22]||(s[22]=e("label",{for:"newPassword",class:"block text-sm font-medium text-cyan-400"},"新密码",-1)),h(e("input",{id:"newPassword","onUpdate:modelValue":s[7]||(s[7]=a=>u.newPassword=a),type:"password",class:"input-dark w-full",placeholder:"请输入新密码（至少6位）",required:"",minlength:"6"},null,512),[[_,u.newPassword]])]),e("div",Is,[s[23]||(s[23]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-cyan-400"},"确认新密码",-1)),h(e("input",{id:"confirmPassword","onUpdate:modelValue":s[8]||(s[8]=a=>u.confirmPassword=a),type:"password",class:"input-dark w-full",placeholder:"请再次输入新密码",required:""},null,512),[[_,u.confirmPassword]])])]),e("div",Ns,[e("button",{type:"button",onClick:q,class:"btn-outline-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},s[24]||(s[24]=[e("i",{class:"bi bi-arrow-clockwise mr-2"},null,-1),d(" 重置 ")])),e("button",{type:"submit",disabled:k.value,class:"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed"},[k.value?(o(),r("span",Gs)):(o(),r("i",Ts)),d(" "+l(k.value?"修改中...":"修改密码"),1)],8,qs)])],32)])):g("",!0),p.value==="reviews"?(o(),r("div",Ds,[s[40]||(s[40]=e("div",{class:"flex items-center justify-between mb-6"},[e("h3",{class:"text-2xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-chat-dots text-cyan-400"}),d(" 我的评论 ")]),e("p",{class:"text-gray-400"},"管理您发表的所有评论")],-1)),e("div",Hs,[e("div",Js,[e("div",Ks,l(B.value||0),1),s[25]||(s[25]=e("div",{class:"text-gray-300"},"评论总数",-1))]),e("div",Ws,[e("div",Os,l(I.value||0),1),s[26]||(s[26]=e("div",{class:"text-gray-300"},"平均评分",-1))]),e("div",Qs,[e("div",Xs,l(N.value||0),1),s[27]||(s[27]=e("div",{class:"text-gray-300"},"获得点赞",-1))])]),e("div",Ys,[$.value?(o(),r("div",Zs,s[28]||(s[28]=[e("div",{class:"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"},null,-1),e("p",{class:"text-gray-300"},"正在加载评论...",-1)]))):E.value.length>0?(o(),r("div",et,[(o(!0),r(M,null,A(E.value,a=>{var S;return o(),r("div",{key:a.id,class:"glass-morphism-dark rounded-lg p-6 border border-gray-700/50 hover:border-cyan-500/30 transition-all duration-300"},[e("div",st,[e("div",tt,[e("div",at,[a.product_images&&a.product_images.length>0?(o(),r("img",{key:0,src:a.product_images[0],alt:a.product_name,class:"w-full h-full object-cover"},null,8,ot)):(o(),r("div",rt,s[29]||(s[29]=[e("i",{class:"bi bi-image text-gray-500 text-xl"},null,-1)])))]),e("div",null,[e("h4",nt,l(a.product_name||"产品已下架"),1),e("p",lt,l(D(a.created_at)),1),e("div",it,[a.is_anonymous?(o(),r("span",dt,s[30]||(s[30]=[e("i",{class:"bi bi-incognito mr-1"},null,-1),d(" 匿名发表 ")]))):(o(),r("span",ct,[s[31]||(s[31]=e("i",{class:"bi bi-person mr-1"},null,-1)),d(" "+l(((S=a.user_info)==null?void 0:S.nickname)||a.author),1)]))])])]),e("div",ut,[e("div",mt,[(o(),r(M,null,A(5,v=>e("i",{key:v,class:C([v<=a.rating?"text-yellow-400":"text-gray-600","bi bi-star-fill text-sm"])},null,2)),64))]),e("span",pt,l(a.rating),1)])]),e("p",bt,l(a.comment),1),a.images&&a.images.length>0?(o(),r("div",gt,[(o(!0),r(M,null,A(a.images,(v,me)=>(o(),r("img",{key:me,src:v,alt:`评论图片${me+1}`,class:"w-full h-20 object-cover rounded-lg border border-gray-600/30"},null,8,xt))),128))])):g("",!0),e("div",ft,[e("div",yt,[e("span",vt,[s[32]||(s[32]=e("i",{class:"bi bi-hand-thumbs-up"},null,-1)),d(" "+l(a.helpful_count||0)+" 人觉得有帮助 ",1)]),a.verified_purchase?(o(),r("span",ht,s[33]||(s[33]=[e("i",{class:"bi bi-check-circle"},null,-1),d(" 已验证购买 ")]))):g("",!0),e("span",_t," 状态: "+l(Se(a.status)),1)]),e("div",wt,[e("button",{onClick:v=>Ee(a),class:"px-3 py-1 text-cyan-400 hover:text-cyan-300 transition-colors duration-200"},s[34]||(s[34]=[e("i",{class:"bi bi-pencil mr-1"},null,-1),d(" 编辑 ")]),8,kt),e("button",{onClick:v=>$e(a.id),class:"px-3 py-1 text-red-400 hover:text-red-300 transition-colors duration-200"},s[35]||(s[35]=[e("i",{class:"bi bi-trash mr-1"},null,-1),d(" 删除 ")]),8,Pt)])])])}),128))])):(o(),r("div",Ct,[s[37]||(s[37]=e("div",{class:"text-4xl text-gray-400 mb-4"},[e("i",{class:"bi bi-chat-dots"})],-1)),s[38]||(s[38]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"暂无评论",-1)),s[39]||(s[39]=e("p",{class:"text-gray-400 mb-6"},"您还没有发表过任何评论",-1)),ge(y,{to:"/products",class:"inline-flex items-center px-6 py-3 bg-cyan-600 text-white font-medium rounded-lg hover:bg-cyan-500 transition-all duration-300"},{default:be(()=>s[36]||(s[36]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),d(" 去购买商品 ")])),_:1,__:[36]})]))])])):g("",!0)])])])]),V.value?(o(),r("div",jt,[e("div",Ut,[s[46]||(s[46]=e("h3",{class:"text-xl font-semibold text-white mb-6 flex items-center gap-3"},[e("i",{class:"bi bi-camera text-cyan-400"}),d(" 上传头像 ")],-1)),e("div",Ft,[e("div",Rt,[e("div",Mt,[e("input",{id:"avatar-input",type:"file",accept:"image/*",onChange:Ae,class:"hidden"},null,32),e("div",{onClick:G,class:"w-32 h-32 border-2 border-dashed border-cyan-500/30 rounded-lg flex items-center justify-center hover:border-cyan-400/50 transition-colors duration-300 cursor-pointer overflow-hidden"},[f.value?(o(),r("img",{key:0,src:f.value,alt:"头像预览",class:"w-full h-full object-cover"},null,8,At)):(o(),r("div",Lt,s[42]||(s[42]=[e("i",{class:"bi bi-cloud-upload text-3xl text-cyan-400 mb-2 block"},null,-1),e("span",{class:"text-sm text-gray-400"},"点击选择图片",-1)])))]),f.value?(o(),r("button",{key:0,onClick:G,class:"absolute top-0 right-0 bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-cyan-400 transition-colors duration-200"},s[43]||(s[43]=[e("i",{class:"bi bi-pencil text-xs"},null,-1)]))):g("",!0)])]),x.value?(o(),r("div",Vt,[e("p",Et,l(x.value.name),1),e("p",$t,l((x.value.size/1024/1024).toFixed(2))+" MB",1)])):g("",!0),s[45]||(s[45]=e("p",{class:"text-center text-gray-400 text-sm"},[d(" 支持 JPG、PNG、GIF、WebP 格式"),e("br"),d(" 文件大小不超过 2MB ")],-1)),e("div",St,[e("button",{onClick:T,class:"btn-outline-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},s[44]||(s[44]=[e("i",{class:"bi bi-x-circle mr-2"},null,-1),d(" 取消 ")])),e("button",{onClick:Le,disabled:!x.value||P.value,class:"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed"},[P.value?(o(),r("span",Bt)):(o(),r("i",It)),d(" "+l(P.value?"上传中...":"确定上传"),1)],8,zt)])])])])):g("",!0)])]}),_:1},8,["is-page-loading","is-data-loading","has-error","error-message","onRetry"])}}}),ta=De(Nt,[["__scopeId","data-v-e0050807"]]);export{ta as default};
