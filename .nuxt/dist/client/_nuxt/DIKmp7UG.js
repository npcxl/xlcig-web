import{_ as Z}from"./kALhssUB.js";import{_ as N}from"./DxXK6IxH.js";import{_ as ee}from"./BMTFDIi_.js";import{r as b,l as te,g as se,w as R,m as f,o as l,a as e,b as L,c as r,i as p,d as x,t as n,F as _,j as w,k as v,p as oe,v as le,q as re}from"./D6E0p70F.js";import{u as ne,p as ae}from"./CEhNW_6w.js";import{o as j}from"./COWn9IxZ.js";import{_ as ie}from"./DlAUqK2U.js";import{c as de}from"./9bKZ-qGF.js";import"./XT9ipho2.js";import"./BDACH_0w.js";import"./CZRRUHTJ.js";const ce={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},ue={class:"relative z-10"},xe={class:"container mx-auto px-6 py-8"},ge={class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},be={class:"flex items-center justify-between"},pe={class:"text-right"},ve={class:"text-3xl font-bold text-cyan-400"},me={class:"relative z-10"},ye={class:"container mx-auto px-6 py-4"},fe={class:"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},he={class:"flex flex-wrap items-center gap-4"},_e={class:"flex flex-wrap gap-2"},we=["onClick"],ke={class:"ml-2 text-xs opacity-75"},Ce={class:"container mx-auto px-6 py-8 relative z-10"},Ie={key:0,class:"text-center py-16"},Se={class:"glass-card-dark rounded-2xl border border-cyan-500/30 p-20 shadow-2xl shadow-cyan-500/20 max-w-lg mx-auto"},Re={class:"text-gray-400 mb-8 text-lg"},Le={class:"space-y-4"},$e={key:1,class:"space-y-6"},ze={class:"px-8 py-6 border-b border-gray-700/50 bg-gray-800/30"},De={class:"flex flex-wrap items-center justify-between gap-4"},Ae={class:"flex items-center gap-4"},Pe={class:"text-xl font-bold text-white mb-1"},Me={class:"text-gray-400 text-sm"},Oe={class:"text-right"},je={class:"text-2xl font-bold text-cyan-400"},Be={class:"text-gray-400 text-sm"},Ee={class:"p-8"},Te={class:"space-y-4"},Ve={class:"w-20 h-20 bg-gray-700/50 rounded-lg overflow-hidden"},qe={key:0,class:"order-item-image-container"},Fe=["src","alt"],Xe={key:1,class:"order-item-placeholder"},Je={class:"flex-1"},Ue={class:"font-semibold text-white text-lg mb-1"},Ge={class:"text-gray-400 text-sm mb-2"},He={class:"flex items-center gap-4"},Ke={class:"text-cyan-400 font-semibold"},Qe={class:"text-gray-400 text-sm"},We={class:"flex flex-col gap-2"},Ye=["onClick"],Ze={class:"px-8 py-6 border-t border-gray-700/50 bg-gray-800/20"},Ne={class:"flex flex-wrap items-center justify-between gap-4"},et={class:"flex items-center gap-6"},tt={class:"flex items-center gap-3"},st={class:"text-gray-400"},ot={key:0,class:"flex items-center gap-3"},lt={class:"text-gray-400"},rt={class:"flex flex-wrap items-center gap-3"},nt=["onClick"],at=["onClick"],it=["onClick"],dt={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},ct={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 p-8 max-w-md w-full"},ut={key:0,class:"mb-6"},xt={class:"flex items-center gap-4 mb-4"},gt=["src","alt"],bt={class:"font-semibold text-white"},pt={class:"text-gray-400 text-sm"},vt={class:"space-y-4"},mt={class:"flex gap-2"},yt=["onClick"],ft={__name:"orders",setup(ht){const{message:$}=de(["message"]),k=s=>{$.success(s,{duration:3e3})},z=s=>{$.error(s,{duration:4e3})},d=b([]),c=b("all"),C=b(!1),u=b(null),m=b(5),y=b(""),B=async()=>{try{const s=await j.getMyOrders();return s.success&&s.data?(d.value=s.data,s.data):(d.value=[],[])}catch(s){throw console.error("获取订单失败:",s),new Error("获取订单数据失败")}},{isPageLoading:E,isDataLoading:T,hasError:V,errorMessage:q,reloadPage:F}=ne({...ae.standard,cacheKey:"orders",loadFunction:B,onPageReady:s=>{s&&(d.value=s)}}),I=b([{value:"all",label:"全部订单",icon:"bi-list-ul"},{value:"pending",label:"待支付",icon:"bi-clock"},{value:"processing",label:"处理中",icon:"bi-gear"},{value:"shipped",label:"已发货",icon:"bi-truck"},{value:"delivered",label:"已送达",icon:"bi-check-circle"},{value:"cancelled",label:"已取消",icon:"bi-x-circle"}]),D=te(()=>c.value==="all"?d.value:d.value.filter(s=>s.status===c.value)),X=s=>s==="all"?d.value.length:d.value.filter(t=>t.status===s).length,A=s=>{const t=I.value.find(i=>i.value===s);return(t==null?void 0:t.label)||s},J=s=>{const t=I.value.find(i=>i.value===s);return(t==null?void 0:t.icon)||"bi-circle"},U=s=>({pending:"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",processing:"bg-blue-500/20 text-blue-300 border border-blue-500/30",shipped:"bg-purple-500/20 text-purple-300 border border-purple-500/30",delivered:"bg-green-500/20 text-green-300 border border-green-500/30",cancelled:"bg-red-500/20 text-red-300 border border-red-500/30"})[s]||"bg-gray-500/20 text-gray-300 border border-gray-500/30",P=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),G=s=>{u.value=s,m.value=5,y.value="",C.value=!0},M=()=>{C.value=!1,u.value=null,m.value=5,y.value=""},H=()=>{console.log("提交评价:",{item:u.value,rating:m.value,comment:y.value}),k("感谢您的评价！"),M()},K=s=>{console.log("下载订单发票:",s.orderNumber),k("发票下载已开始！")},Q=async s=>{if(confirm("您确定要取消这个订单吗？"))try{const t=await j.cancelOrder(s);if(t.success){const i=d.value.findIndex(g=>g.id===s);i>-1&&(d.value[i].status="cancelled"),k("订单取消成功！")}else z(t.message||"取消订单失败，请重试。")}catch(t){console.error("取消订单失败:",t),t("取消订单失败，请重试。")}},W=s=>{try{if(!s.items||!Array.isArray(s.items)||s.items.length===0){z("该订单没有商品信息，无法重新下单。");return}const t=JSON.parse(localStorage.getItem("cartItems")||"[]");s.items.forEach(i=>{const g=t.findIndex(S=>S.id===i.id);g>-1?t[g].quantity+=i.quantity:t.push({...i})}),localStorage.setItem("cartItems",JSON.stringify(t)),re("/checkout")}catch(t){console.error("重新下单失败:",t),t("重新下单失败，请重试。")}},Y=s=>s.includes("RTX")||s.includes("RX")||s.includes("显卡")?"bi bi-gpu-card text-cyan-400 text-xl":s.includes("Intel")||s.includes("AMD")||s.includes("Ryzen")||s.includes("Core")?"bi bi-cpu text-orange-400 text-xl":s.includes("主板")||s.includes("STRIX")||s.includes("MAG")?"bi bi-motherboard text-green-400 text-xl":s.includes("电源")||s.includes("PSU")||s.includes("Power")?"bi bi-lightning text-yellow-400 text-xl":"bi bi-pc-display text-gray-400 text-xl";return(s,t)=>{const i=Z,g=N,S=ee;return l(),se(S,{"is-page-loading":f(E),"is-data-loading":f(T),"has-error":f(V),"error-message":f(q),"loading-title":"正在加载订单数据...","loading-message":"请稍候",onRetry:f(F)},{default:R(()=>[e("div",ce,[t[21]||(t[21]=e("div",{class:"fixed inset-0 pointer-events-none"},[e("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow"})],-1)),L(i,{"show-back-button":!1,"show-nav-menu":!1,"show-breadcrumb":!0,"show-location":!1,"show-search-button":!1,"show-notification-button":!1,"show-decorations":!1,"logo-size":"medium","current-page-title":"我的订单"}),e("section",ue,[e("div",xe,[e("div",ge,[e("div",be,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-4xl font-bold text-white mb-3 flex items-center gap-3"},[e("i",{class:"bi bi-bag-check text-cyan-400 text-3xl animate-bounce-gentle"}),x(" 我的订单 ")]),e("p",{class:"text-gray-300 text-lg"},"查看和管理您的订单历史")],-1)),e("div",pe,[e("div",ve,n(d.value.length),1),t[3]||(t[3]=e("div",{class:"text-gray-400 text-sm"},"订单总数",-1))])])])])]),e("section",me,[e("div",ye,[e("div",fe,[e("div",he,[t[5]||(t[5]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"bi bi-funnel text-cyan-400"}),e("span",{class:"text-white font-medium"},"按状态筛选：")],-1)),e("div",_e,[(l(!0),r(_,null,w(I.value,o=>(l(),r("button",{key:o.value,onClick:h=>c.value=o.value,class:v(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-300",c.value===o.value?"bg-cyan-500/20 text-cyan-300 border border-cyan-400/40":"text-gray-300 hover:bg-white/5 hover:text-white border border-transparent"])},[e("i",{class:v([o.icon,"mr-2"])},null,2),x(" "+n(o.label)+" ",1),e("span",ke,"("+n(X(o.value))+")",1)],10,we))),128))])])])])]),e("main",Ce,[D.value.length===0?(l(),r("div",Ie,[e("div",Se,[t[7]||(t[7]=e("div",{class:"text-8xl mb-8 text-cyan-400 opacity-50"},[e("i",{class:"bi bi-bag-x"})],-1)),t[8]||(t[8]=e("h3",{class:"text-3xl font-bold text-white mb-4"},"未找到订单",-1)),e("p",Re,n(c.value==="all"?"您还没有下过任何订单":`没有状态为"${A(c.value)}"的订单`),1),e("div",Le,[L(g,{to:"/products",class:"inline-flex items-center justify-center px-8 py-3 bg-cyan-600 text-white font-medium rounded-xl hover:bg-cyan-500 transition-all duration-300 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40"},{default:R(()=>t[6]||(t[6]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),x(" 开始购物 ")])),_:1,__:[6]}),c.value!=="all"?(l(),r("button",{key:0,onClick:t[0]||(t[0]=o=>c.value="all"),class:"block w-full px-8 py-3 border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300"}," 查看所有订单 ")):p("",!0)])])])):(l(),r("div",$e,[(l(!0),r(_,null,w(D.value,o=>{var h;return l(),r("div",{key:o.id,class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 overflow-hidden hover:border-cyan-400/50 transition-colors duration-300"},[e("div",ze,[e("div",De,[e("div",Ae,[e("div",null,[e("h3",Pe,"订单 #"+n(o.orderNumber),1),e("p",Me,"下单时间："+n(P(o.createdAt)),1)]),e("div",{class:v(["inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium",U(o.status)])},[e("i",{class:v([J(o.status),"mr-2"])},null,2),x(" "+n(A(o.status)),1)],2)]),e("div",Oe,[e("div",je,"¥"+n(o.total.toLocaleString()),1),e("div",Be,n(((h=o.items)==null?void 0:h.length)||0)+" 件商品",1)])])]),e("div",Ee,[e("div",Te,[(l(!0),r(_,null,w(o.items||[],a=>(l(),r("div",{key:a.id,class:"flex items-center gap-6 p-4 bg-gray-800/20 rounded-xl border border-gray-700/30"},[e("div",Ve,[a.image?(l(),r("div",qe,[e("img",{src:a.image,alt:a.name,class:"w-full h-full object-contain p-2",onError:t[1]||(t[1]=O=>O.target.style.display="none")},null,40,Fe)])):(l(),r("div",Xe,[e("i",{class:v(Y(a.name))},null,2)]))]),e("div",Je,[e("h4",Ue,n(a.name),1),e("p",Ge,n(a.brand),1),e("div",He,[e("span",Ke,"¥"+n(a.price.toLocaleString()),1),e("span",Qe,"数量："+n(a.quantity),1)])]),e("div",We,[L(g,{to:`/products/${a.id}`,class:"px-4 py-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-medium rounded-lg transition-colors duration-300 text-center"},{default:R(()=>t[9]||(t[9]=[x(" 查看商品 ")])),_:2,__:[9]},1032,["to"]),o.status==="delivered"?(l(),r("button",{key:0,onClick:O=>G(a),class:"px-4 py-2 text-sm border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300"}," 写评价 ",8,Ye)):p("",!0)])]))),128))])]),e("div",Ze,[e("div",Ne,[e("div",et,[e("div",tt,[t[10]||(t[10]=e("i",{class:"bi bi-truck text-cyan-400"},null,-1)),t[11]||(t[11]=e("span",{class:"text-white font-medium"},"物流单号：",-1)),e("span",st,n(o.trackingNumber||"暂无"),1)]),o.estimatedDelivery?(l(),r("div",ot,[t[12]||(t[12]=e("i",{class:"bi bi-calendar-event text-cyan-400"},null,-1)),t[13]||(t[13]=e("span",{class:"text-white font-medium"},"预计送达：",-1)),e("span",lt,n(P(o.estimatedDelivery)),1)])):p("",!0)]),e("div",rt,[e("button",{onClick:a=>K(o),class:"px-4 py-2 text-sm border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300 flex items-center gap-2"},t[14]||(t[14]=[e("i",{class:"bi bi-download"},null,-1),x(" 下载发票 ")]),8,nt),o.status==="pending"||o.status==="processing"?(l(),r("button",{key:0,onClick:a=>Q(o.id),class:"px-4 py-2 text-sm border border-red-600 hover:border-red-500 text-red-300 hover:text-red-200 font-medium rounded-lg transition-colors duration-300 flex items-center gap-2"},t[15]||(t[15]=[e("i",{class:"bi bi-x-circle"},null,-1),x(" 取消订单 ")]),8,at)):p("",!0),o.status==="delivered"?(l(),r("button",{key:1,onClick:a=>W(o),class:"px-4 py-2 text-sm bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 flex items-center gap-2"},t[16]||(t[16]=[e("i",{class:"bi bi-arrow-repeat"},null,-1),x(" 再次购买 ")]),8,it)):p("",!0)])])])])}),128))]))]),C.value?(l(),r("div",dt,[e("div",ct,[t[20]||(t[20]=e("h3",{class:"text-2xl font-bold text-white mb-6"},"写商品评价",-1)),u.value?(l(),r("div",ut,[e("div",xt,[e("img",{src:u.value.image,alt:u.value.name,class:"w-16 h-16 object-contain bg-gray-700/50 rounded-lg p-2"},null,8,gt),e("div",null,[e("h4",bt,n(u.value.name),1),e("p",pt,n(u.value.brand),1)])]),e("div",vt,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-white mb-2"},"评分",-1)),e("div",mt,[(l(),r(_,null,w(5,o=>e("button",{key:o,onClick:h=>m.value=o,class:v([o<=m.value?"text-yellow-400":"text-gray-600","text-2xl hover:text-yellow-400 transition-colors duration-200"])},t[17]||(t[17]=[e("i",{class:"bi bi-star-fill"},null,-1)]),10,yt)),64))])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-white mb-2"},"评价内容",-1)),oe(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>y.value=o),rows:"4",placeholder:"分享您对这个产品的使用体验...",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none"},null,512),[[le,y.value]])])])])):p("",!0),e("div",{class:"flex gap-3"},[e("button",{onClick:H,class:"flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 提交评价 "),e("button",{onClick:M,class:"flex-1 border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 取消 ")])])])):p("",!0)])]),_:1},8,["is-page-loading","is-data-loading","has-error","error-message","onRetry"])}}},At=ie(ft,[["__scopeId","data-v-39d2c6a8"]]);export{At as default};
