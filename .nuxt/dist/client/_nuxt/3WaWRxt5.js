import{G as pe,r as b,e as S,f as ge,c as n,a as e,z as be,s as y,b as H,l as o,d as m,t as i,w as G,F as P,j as E,q as u,C as g,i as ye,K as xe,x as me,L as fe,D as K,o as l,p as R,I as ve}from"./D7rkgqT2.js";import{_ as he}from"./DtcfTgNo.js";import{_ as we}from"./C9iI_EUL.js";import{u as _e}from"./BC3_QFOm.js";import{c as k}from"./CF7zu2V2.js";import{o as ke}from"./Dw2SZdRQ.js";import{u as Ce}from"./nSjweiC5.js";import{c as Ve}from"./B5gbdNuQ.js";import"./Bg25Pqs-.js";import"./oeYQgGxL.js";import"./CFjwhGiX.js";const qe={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},Ae={class:"container mx-auto px-6 py-8 relative z-10"},Le={class:"grid lg:grid-cols-3 gap-8"},Ue={class:"lg:col-span-2 space-y-8"},Ie={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},Se={class:"px-8 py-6 border-b border-gray-700/50"},je={class:"text-gray-300 mt-2"},$e={class:"p-8"},Ne={key:0,class:"text-center py-12"},De={key:1,class:"text-center py-12"},Me={key:2,class:"space-y-6"},ze={class:"w-24 h-24 bg-gray-700/50 rounded-lg overflow-hidden"},Be=["src","alt"],Te={class:"flex-1"},Oe={class:"font-semibold text-white text-lg mb-1"},Fe={class:"text-gray-400 text-sm mb-2"},He={class:"flex items-center gap-4"},Pe={class:"text-2xl font-bold text-cyan-400"},Ee={key:0,class:"text-sm text-gray-500 line-through"},Re={class:"flex items-center gap-3"},Qe=["onClick"],We={class:"w-12 text-center text-white font-semibold text-lg"},Ye=["onClick"],Ge=["onClick"],Ke={key:0,class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},Je={class:"p-8"},Xe={key:0},Ze={key:0,class:"text-center py-8"},et={key:1,class:"space-y-6"},tt={class:"space-y-4"},st=["onClick"],ot={class:"flex items-start justify-between"},rt={class:"flex-1"},lt={class:"flex items-center gap-3 mb-2"},nt={class:"font-semibold text-white"},it={class:"text-gray-300"},at={key:0,class:"px-2 py-1 bg-cyan-500 text-white text-xs rounded-full"},dt={class:"text-gray-300"},ct={key:0,class:"text-gray-400 text-sm mt-1"},ut={class:"flex items-center"},pt={key:0,class:"bi bi-check-circle text-cyan-400 text-xl"},gt={key:1,class:"bi bi-circle text-gray-400 text-xl"},bt={key:2,class:"text-center py-8"},yt={key:1,class:"space-y-6"},xt={class:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6"},mt={class:"text-yellow-300 text-sm mt-1"},ft={class:"grid md:grid-cols-2 gap-6"},vt={class:"grid md:grid-cols-3 gap-6"},ht={key:1,class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},wt={class:"p-8"},_t={class:"grid md:grid-cols-3 gap-4 mb-6"},kt=["onClick"],Ct={class:"font-semibold"},Vt={class:"text-sm opacity-75 mt-1"},qt={key:0,class:"space-y-6"},At={class:"grid md:grid-cols-3 gap-6"},Lt={class:"md:col-span-2"},Ut={key:1,class:"text-center py-8"},It={key:2,class:"text-center py-8"},St={class:"lg:col-span-1"},jt={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 sticky top-6"},$t={class:"p-8 space-y-6"},Nt={class:"space-y-4"},Dt={class:"flex justify-between items-center"},Mt={class:"text-white font-semibold"},zt={class:"flex justify-between items-center"},Bt={class:"text-white font-semibold"},Tt={class:"flex justify-between items-center"},Ot={class:"text-white font-semibold"},Ft={class:"border-t border-gray-700/50 pt-4"},Ht={class:"flex justify-between items-center"},Pt={class:"text-2xl font-bold text-cyan-400"},Et={key:0},Rt={class:"flex gap-2"},Qt={key:0,class:"mt-2 text-green-400 text-sm flex items-center gap-1"},Wt=["disabled"],Yt={key:0,class:"bi bi-credit-card"},Gt={key:1,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},Kt={key:2,class:"text-red-400 text-sm text-center"},Jt={key:1,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4"},Xt={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Zt={class:"p-8"},es={class:"grid md:grid-cols-2 gap-6"},ts={class:"grid md:grid-cols-3 gap-6"},ss={class:"grid md:grid-cols-2 gap-6"},os={class:"flex items-end"},rs={class:"flex items-center space-x-2"},ls={class:"flex justify-end space-x-4 pt-6"},ns=["disabled"],is={key:0,class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},as={key:1,class:"bi bi-check-circle"},ds={key:2,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},cs={class:"glass-card-dark rounded-2xl border border-green-500/30 shadow-2xl shadow-green-500/20 p-8 max-w-md w-full text-center"},us={class:"text-gray-300 mb-2"},ps={key:0},gs={key:1},bs={class:"text-gray-400 mb-8"},ys={key:0},xs={key:1},Us={__name:"checkout",setup(ms){const{message:B}=Ve(["message"]),v=pe(),f=_e(),j=r=>{B.success(r,{duration:3e3})},h=r=>{B.error(r,{duration:4e3})},Q=r=>{B.warning(r,{duration:3e3})},a=b([]),$=b(!1),A=b(!1),N=b(!1),L=b(""),w=b(null),D=b(!1),U=b(!1),d=b({name:"",phone:"",province:"",city:"",district:"",detail:"",postal_code:""}),p=b({name:"",phone:"",province:"",city:"",district:"",detail:"",postal_code:"",is_default:!1}),C=b("card"),_=b({cardNumber:"",expiryDate:"",cvv:"",cardholderName:""}),I=b(""),T=b(""),J=b([{id:"card",name:"银行卡支付",description:"银联、Visa、万事达",icon:"bi-credit-card"},{id:"alipay",name:"支付宝",description:"使用支付宝支付",icon:"bi-wallet2"},{id:"wechat",name:"微信支付",description:"微信扫码支付",icon:"bi-wechat"}]),M=S(()=>a.value.reduce((r,t)=>r+t.product_price*t.quantity,0)),W=S(()=>M.value>1e3?0:50),Y=S(()=>Math.round(M.value*.08)),X=S(()=>M.value+W.value+Y.value),O=S(()=>v.isLoggedIn?w.value!==null:d.value.name&&d.value.phone&&d.value.province&&d.value.city&&d.value.district&&d.value.detail),Z=async()=>{if(v.isLoggedIn)try{$.value=!0;const r=await k.getCartItems();r.success?a.value=r.data:h(r.message||"获取购物车失败")}catch(r){console.error("加载购物车失败:",r),h("加载购物车失败，请重试")}finally{$.value=!1}},ee=async r=>{if(v.isLoggedIn)try{const t=await k.removeCartItem(r);t.success?(a.value=a.value.filter(c=>c.id!==r),j("商品已从购物车移除")):h(t.message||"删除失败")}catch(t){console.error("删除购物车项目失败:",t),h("删除失败，请重试")}},te=async r=>{if(!v.isLoggedIn)return;const t=a.value.find(c=>c.id===r);if(t)try{const c=await k.updateCartItem(r,{quantity:t.quantity+1});c.success?t.quantity=c.data.quantity:h(c.message||"更新数量失败")}catch(c){console.error("更新购物车数量失败:",c),h("更新失败，请重试")}},se=async r=>{if(!v.isLoggedIn)return;const t=a.value.find(c=>c.id===r);if(!(!t||t.quantity<=1))try{const c=await k.updateCartItem(r,{quantity:t.quantity-1});c.success?t.quantity=c.data.quantity:h(c.message||"更新数量失败")}catch(c){console.error("更新购物车数量失败:",c),h("更新失败，请重试")}},oe=async()=>{if(v.isLoggedIn)try{const r=await k.applyCoupon(I.value);r.success?(T.value=I.value,j("优惠券使用成功！")):h(r.message||"优惠券代码无效")}catch(r){console.error("应用优惠券失败:",r),h("优惠券代码无效")}},re=r=>{w.value=r},le=async()=>{if(v.isLoggedIn)try{U.value=!0,await f.addAddress(p.value),j("地址添加成功！"),F(),(f.addresses.length===1||p.value.is_default)&&(w.value=f.addresses[f.addresses.length-1].id)}catch(r){console.error("添加地址失败:",r),r(r.message||"添加地址失败，请重试")}finally{U.value=!1}},F=()=>{D.value=!1,p.value={name:"",phone:"",province:"",city:"",district:"",detail:"",postal_code:"",is_default:!1}},ne=async()=>{if(!(a.value.length===0||!O.value)){A.value=!0;try{const r=v.isLoggedIn?f.addresses.find(x=>x.id===w.value):d.value,t=a.value.map(x=>x.id);console.log("准备下单的购物车项目ID:",t);const c=a.value.map(x=>{const ue={config_id:x.product_id,quantity:x.quantity,shipping_address:r,notes:`通过购物车下单，支付方式：${C.value}`};return ke.createOrder(ue)}),z=await Promise.all(c),V=z.filter(x=>!x.success);if(V.length>0)throw console.error("订单创建失败:",V),new Error(`${V.length}个订单创建失败`);const s=z.map(x=>x.data);if(console.log("订单创建成功:",s.length,"个订单"),L.value=s.length>1?`BATCH-${Date.now().toString().slice(-8)}`:s[0].order_no||s[0].order_number,v.isLoggedIn)try{t.length===1?(console.log("删除单个购物车商品:",t[0]),await k.removeCartItem(t[0])):(console.log("批量删除购物车商品:",t),await k.batchRemoveCartItems(t)),console.log("购物车商品删除成功")}catch(x){console.error("删除购物车商品失败:",x),Q("订单创建成功，但清理购物车时出现问题，请刷新页面")}const q=a.value.length;a.value=a.value.filter(x=>!t.includes(x.id)),console.log(`本地购物车数据更新: ${q} -> ${a.value.length}`),N.value=!0;const ce=s.length>1?`成功创建${s.length}个订单！`:"订单创建成功！";j(ce)}catch(r){console.error("订单创建失败:",r),r("订单创建失败："+(r.message||"请重试"))}finally{A.value=!1}}},ie=()=>{N.value=!1,K("/orders")},ae=()=>{N.value=!1,K("/products")},de=async()=>{if(v.isLoggedIn){await Z();try{await f.initializeAddresses(),f.getDefaultAddress?w.value=f.getDefaultAddress.id:f.addresses.length>0&&(w.value=f.addresses[0].id)}catch(r){console.error("初始化地址失败:",r)}}else Q("请登录后查看购物车")};return ge(()=>{de()}),Ce({title:"购物车结算 - xlCig",meta:[{name:"description",content:"安全快捷的购物车结算流程，支持多种支付方式和地址管理"}]}),(r,t)=>{const c=ve,z=he,V=we;return l(),n("div",qe,[t[76]||(t[76]=e("div",{class:"fixed inset-0 pointer-events-none"},[e("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow"})],-1)),o($)&&!o(a).length?(l(),be(c,{key:0})):y("",!0),H(z,{"show-back-button":!1,"show-nav-menu":!1,"show-breadcrumb":!0,"show-location":!1,"show-search-button":!1,"show-notification-button":!1,"show-decorations":!1,"logo-size":"medium","current-page-title":"购物车结算"}),e("div",Ae,[e("div",Le,[e("div",Ue,[e("div",Ie,[e("div",Se,[t[22]||(t[22]=e("h2",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-cart text-cyan-400"}),m(" 购物车 ")],-1)),e("p",je,"购物车中有 "+i(o(a).length)+" 件商品",1)]),e("div",$e,[o($)?(l(),n("div",Ne,t[23]||(t[23]=[e("div",{class:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"},null,-1),e("p",{class:"text-gray-300"},"正在加载购物车...",-1)]))):o(a).length===0?(l(),n("div",De,[t[25]||(t[25]=e("div",{class:"text-6xl mb-4 text-gray-500"},[e("i",{class:"bi bi-cart-x"})],-1)),t[26]||(t[26]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"购物车为空",-1)),t[27]||(t[27]=e("p",{class:"text-gray-400 mb-6"},"添加一些产品来继续购物",-1)),H(V,{to:"/products",class:"inline-flex items-center px-6 py-3 bg-cyan-600 text-white font-medium rounded-lg hover:bg-cyan-500 transition-all duration-300"},{default:G(()=>t[24]||(t[24]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),m(" 添加产品 ")])),_:1,__:[24]})])):(l(),n("div",Me,[(l(!0),n(P,null,E(o(a),s=>(l(),n("div",{key:s.id,class:"flex items-center gap-6 p-6 bg-gray-800/30 rounded-2xl border border-gray-700/30 hover:border-cyan-500/50 transition-colors duration-300"},[e("div",ze,[e("img",{src:s.product_image,alt:s.product_name,class:"w-full h-full object-contain p-2"},null,8,Be)]),e("div",Te,[e("h3",Oe,i(s.product_name),1),e("p",Fe,i(s.product_brand),1),e("div",He,[e("span",Pe,"¥"+i(s.product_price.toLocaleString()),1),s.product_original_price&&s.product_original_price>s.product_price?(l(),n("span",Ee," ¥"+i(s.product_original_price.toLocaleString()),1)):y("",!0)])]),e("div",Re,[e("button",{onClick:q=>se(s.id),class:"w-10 h-10 flex items-center justify-center bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors duration-200"},t[28]||(t[28]=[e("i",{class:"bi bi-dash"},null,-1)]),8,Qe),e("span",We,i(s.quantity),1),e("button",{onClick:q=>te(s.id),class:"w-10 h-10 flex items-center justify-center bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors duration-200"},t[29]||(t[29]=[e("i",{class:"bi bi-plus"},null,-1)]),8,Ye)]),e("button",{onClick:q=>ee(s.id),class:"w-10 h-10 flex items-center justify-center bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors duration-200"},t[30]||(t[30]=[e("i",{class:"bi bi-trash"},null,-1)]),8,Ge)]))),128))]))])]),o(a).length>0?(l(),n("div",Ke,[t[47]||(t[47]=e("div",{class:"px-8 py-6 border-b border-gray-700/50"},[e("h2",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-geo-alt text-cyan-400"}),m(" 收货地址 ")])],-1)),e("div",Je,[o(v).isLoggedIn?(l(),n("div",Xe,[o(f).isLoading?(l(),n("div",Ze,t[31]||(t[31]=[e("div",{class:"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"},null,-1),e("p",{class:"text-gray-300"},"正在加载地址信息...",-1)]))):o(f).hasAddresses?(l(),n("div",et,[e("div",tt,[(l(!0),n(P,null,E(o(f).addresses,s=>(l(),n("div",{key:s.id,class:R(["border-2 rounded-xl p-6 transition-all duration-300 cursor-pointer",o(w)===s.id?"border-cyan-500 bg-cyan-500/10":"border-gray-600/50 hover:border-cyan-500/50"]),onClick:q=>re(s.id)},[e("div",ot,[e("div",rt,[e("div",lt,[e("h3",nt,i(s.name),1),e("span",it,i(s.phone),1),s.is_default?(l(),n("span",at," 默认 ")):y("",!0)]),e("p",dt,i(s.province)+" "+i(s.city)+" "+i(s.district)+" "+i(s.detail),1),s.postal_code?(l(),n("p",ct," 邮编："+i(s.postal_code),1)):y("",!0)]),e("div",ut,[o(w)===s.id?(l(),n("i",pt)):(l(),n("i",gt))])])],10,st))),128))]),e("button",{onClick:t[0]||(t[0]=s=>D.value=!0),class:"w-full py-3 border-2 border-dashed border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-cyan-400 rounded-xl transition-colors duration-300 flex items-center justify-center gap-2"},t[32]||(t[32]=[e("i",{class:"bi bi-plus-circle"},null,-1),m(" 添加新地址 ")]))])):(l(),n("div",bt,[t[34]||(t[34]=e("div",{class:"text-4xl text-gray-400 mb-4"},[e("i",{class:"bi bi-geo-alt"})],-1)),t[35]||(t[35]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"暂无收货地址",-1)),t[36]||(t[36]=e("p",{class:"text-gray-400 mb-6"},"添加收货地址以完成订单",-1)),e("button",{onClick:t[1]||(t[1]=s=>D.value=!0),class:"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-medium transition-colors duration-300"},t[33]||(t[33]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),m(" 添加收货地址 ")]))]))])):(l(),n("div",yt,[e("div",xt,[t[39]||(t[39]=e("div",{class:"flex items-center gap-2 text-yellow-400"},[e("i",{class:"bi bi-info-circle"}),e("span",{class:"font-medium"},"提示")],-1)),e("p",mt,[H(V,{to:"/auth/login",class:"text-yellow-400 hover:text-yellow-300 underline"},{default:G(()=>t[37]||(t[37]=[m("登录")])),_:1,__:[37]}),t[38]||(t[38]=m(" 后可以保存地址，方便下次购物 "))])]),e("div",ft,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-white mb-2"},"收货人姓名",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(d).name=s),type:"text",required:"",placeholder:"请输入收货人姓名",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(d).name]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-white mb-2"},"手机号码",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(d).phone=s),type:"tel",required:"",placeholder:"请输入手机号码",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(d).phone]])])]),e("div",vt,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-white mb-2"},"省份",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(d).province=s),type:"text",required:"",placeholder:"请输入省份",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(d).province]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-white mb-2"},"城市",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(d).city=s),type:"text",required:"",placeholder:"请输入城市",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(d).city]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-white mb-2"},"区县",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(d).district=s),type:"text",required:"",placeholder:"请输入区县",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(d).district]])])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-white mb-2"},"详细地址",-1)),u(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(d).detail=s),required:"",rows:"3",placeholder:"请输入详细地址",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none"},null,512),[[g,o(d).detail]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-white mb-2"},"邮政编码（可选）",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(d).postal_code=s),type:"text",placeholder:"请输入邮政编码",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(d).postal_code]])])]))])])):y("",!0),o(a).length>0?(l(),n("div",ht,[t[54]||(t[54]=e("div",{class:"px-8 py-6 border-b border-gray-700/50"},[e("h2",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-credit-card text-cyan-400"}),m(" 支付方式 ")])],-1)),e("div",wt,[e("div",_t,[(l(!0),n(P,null,E(o(J),s=>(l(),n("button",{key:s.id,onClick:q=>C.value=s.id,class:R(["p-6 border-2 rounded-xl transition-all duration-300 text-center",o(C)===s.id?"border-cyan-500 bg-cyan-500/20 text-cyan-300":"border-gray-600/50 hover:border-cyan-500/50 text-gray-300 hover:text-white"])},[e("i",{class:R([s.icon,"text-3xl mb-3"])},null,2),e("div",Ct,i(s.name),1),e("div",Vt,i(s.description),1)],10,kt))),128))]),o(C)==="card"?(l(),n("div",qt,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-white mb-2"},"银行卡号",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(_).cardNumber=s),type:"text",placeholder:"6222 0200 0000 0000",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(_).cardNumber]])]),e("div",At,[e("div",Lt,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-white mb-2"},"有效期",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(_).expiryDate=s),type:"text",placeholder:"MM/YY",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(_).expiryDate]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-white mb-2"},"CVV",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o(_).cvv=s),type:"text",placeholder:"123",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(_).cvv]])])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-white mb-2"},"持卡人姓名",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o(_).cardholderName=s),type:"text",placeholder:"张三",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(_).cardholderName]])])])):y("",!0),o(C)==="alipay"?(l(),n("div",Ut,t[52]||(t[52]=[e("div",{class:"text-6xl text-blue-500 mb-4"},[e("i",{class:"bi bi-wallet2"})],-1),e("h3",{class:"text-xl font-semibold text-white mb-2"},"支付宝支付",-1),e("p",{class:"text-gray-400 mb-6"},"您将跳转到支付宝完成支付",-1)]))):y("",!0),o(C)==="wechat"?(l(),n("div",It,t[53]||(t[53]=[e("div",{class:"text-6xl text-green-500 mb-4"},[e("i",{class:"bi bi-wechat"})],-1),e("h3",{class:"text-xl font-semibold text-white mb-2"},"微信支付",-1),e("p",{class:"text-gray-400 mb-6"},"扫码支付或使用微信App支付",-1)]))):y("",!0)])])):y("",!0)]),e("div",St,[e("div",jt,[t[63]||(t[63]=e("div",{class:"px-8 py-6 border-b border-gray-700/50"},[e("h2",{class:"text-2xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-receipt text-cyan-400"}),m(" 订单摘要 ")])],-1)),e("div",$t,[e("div",Nt,[e("div",Dt,[t[55]||(t[55]=e("span",{class:"text-gray-300"},"商品小计",-1)),e("span",Mt,"¥"+i(o(M).toLocaleString()),1)]),e("div",zt,[t[56]||(t[56]=e("span",{class:"text-gray-300"},"运费",-1)),e("span",Bt,"¥"+i(o(W).toLocaleString()),1)]),e("div",Tt,[t[57]||(t[57]=e("span",{class:"text-gray-300"},"税费",-1)),e("span",Ot,"¥"+i(o(Y).toLocaleString()),1)]),e("div",Ft,[e("div",Ht,[t[58]||(t[58]=e("span",{class:"text-xl font-semibold text-white"},"总计",-1)),e("span",Pt,"¥"+i(o(X).toLocaleString()),1)])])]),o(a).length>0?(l(),n("div",Et,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-white mb-2"},"优惠券代码",-1)),e("div",Rt,[u(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>xe(I)?I.value=s:null),type:"text",placeholder:"输入优惠券代码",class:"flex-1 px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 text-sm"},null,512),[[g,o(I)]]),e("button",{onClick:oe,class:"px-4 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 text-sm"}," 使用 ")]),o(T)?(l(),n("div",Qt,[t[59]||(t[59]=e("i",{class:"bi bi-check-circle"},null,-1)),m(' 优惠券"'+i(o(T))+'"已使用 ',1)])):y("",!0)])):y("",!0),o(a).length>0?(l(),n("button",{key:1,onClick:ne,disabled:o(A)||!o(O),class:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 disabled:cursor-not-allowed"},[o(A)?(l(),n("div",Gt)):(l(),n("i",Yt)),m(" "+i(o(A)?"处理中...":"确认下单"),1)],8,Wt)):y("",!0),!o(O)&&o(a).length>0?(l(),n("div",Kt,t[61]||(t[61]=[e("i",{class:"bi bi-exclamation-triangle mr-1"},null,-1),m(" 请完善收货地址信息 ")]))):y("",!0),t[62]||(t[62]=ye('<div class="text-center pt-6 border-t border-gray-700/50"><div class="flex items-center justify-center gap-4 text-gray-400 text-sm"><div class="flex items-center gap-1"><i class="bi bi-shield-check text-green-400"></i><span>安全</span></div><div class="flex items-center gap-1"><i class="bi bi-lock text-green-400"></i><span>加密</span></div><div class="flex items-center gap-1"><i class="bi bi-award text-green-400"></i><span>认证</span></div></div></div>',1))])])])])]),o(D)?(l(),n("div",Jt,[e("div",Xt,[e("div",Zt,[e("div",{class:"flex items-center justify-between mb-6"},[t[65]||(t[65]=e("h3",{class:"text-2xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-geo-alt text-cyan-400"}),m(" 添加收货地址 ")],-1)),e("button",{onClick:F,class:"text-gray-400 hover:text-white"},t[64]||(t[64]=[e("i",{class:"bi bi-x-lg text-2xl"},null,-1)]))]),e("form",{onSubmit:me(le,["prevent"]),class:"space-y-6"},[e("div",es,[e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"收货人姓名 *",-1)),u(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o(p).name=s),type:"text",required:"",placeholder:"请输入收货人姓名",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(p).name]])]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"手机号码 *",-1)),u(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>o(p).phone=s),type:"tel",required:"",placeholder:"请输入手机号码",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(p).phone]])])]),e("div",ts,[e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"省份 *",-1)),u(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>o(p).province=s),type:"text",required:"",placeholder:"请输入省份",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(p).province]])]),e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"城市 *",-1)),u(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>o(p).city=s),type:"text",required:"",placeholder:"请输入城市",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(p).city]])]),e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"区县 *",-1)),u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>o(p).district=s),type:"text",required:"",placeholder:"请输入区县",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(p).district]])])]),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"详细地址 *",-1)),u(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=s=>o(p).detail=s),required:"",rows:"3",placeholder:"请输入详细地址",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none"},null,512),[[g,o(p).detail]])]),e("div",ss,[e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-cyan-400 mb-2"},"邮政编码",-1)),u(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>o(p).postal_code=s),type:"text",placeholder:"请输入邮政编码（可选）",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[g,o(p).postal_code]])]),e("div",os,[e("label",rs,[u(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>o(p).is_default=s),type:"checkbox",class:"w-4 h-4 text-cyan-500 bg-transparent border-2 border-cyan-500 rounded focus:ring-cyan-500"},null,512),[[fe,o(p).is_default]]),t[73]||(t[73]=e("span",{class:"text-sm text-gray-300"},"设为默认地址",-1))])])]),e("div",ls,[e("button",{type:"button",onClick:F,class:"px-6 py-3 border border-gray-600 text-gray-300 hover:text-white hover:border-gray-500 rounded-lg font-medium transition-colors duration-300"}," 取消 "),e("button",{type:"submit",disabled:o(U),class:"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-300 flex items-center gap-2"},[o(U)?(l(),n("div",is)):(l(),n("i",as)),m(" "+i(o(U)?"添加中...":"添加地址"),1)],8,ns)])],32)])])])):y("",!0),o(N)?(l(),n("div",ds,[e("div",cs,[t[74]||(t[74]=e("div",{class:"text-6xl text-green-400 mb-6"},[e("i",{class:"bi bi-check-circle"})],-1)),t[75]||(t[75]=e("h3",{class:"text-2xl font-bold text-white mb-4"},"订单提交成功！",-1)),e("p",us,[o(L).startsWith("BATCH-")?(l(),n("span",ps," 批次号：#"+i(o(L)),1)):(l(),n("span",gs," 订单号：#"+i(o(L)),1))]),e("p",bs,[o(L).startsWith("BATCH-")?(l(),n("span",ys," 您的购物车商品已分别创建订单，感谢您的购买！ ")):(l(),n("span",xs," 感谢您的购买，您将很快收到确认邮件。 "))]),e("div",{class:"space-y-3"},[e("button",{onClick:ie,class:"w-full bg-green-600 hover:bg-green-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 查看订单 "),e("button",{onClick:ae,class:"w-full border border-gray-600 hover:border-green-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 继续购物 ")])])])):y("",!0)])}}};export{Us as default};
