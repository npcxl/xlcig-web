import{E as N,G as j,r as d,H as M,c,b as n,a as e,s as h,w as v,i as P,x as U,q as g,C as A,N as B,p as b,L as D,d as u,t as _,I as $,o as m,_ as q}from"./DYUlAN8C.js";import{_ as E}from"./B2PraNO7.js";import{_ as I}from"./GFptVlNT.js";import{api as F}from"./Bd2jT9es.js";import{u as G}from"./D3lxNotV.js";import{u as H}from"./CD5Qg5Z1.js";import"./CFjwhGiX.js";import"./BZyWtx9-.js";import"./Dw2SZdRQ.js";import"./oeYQgGxL.js";import"./CF7zu2V2.js";import"./By1bEtc9.js";const J={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},K={class:"relative z-10 w-full px-6 py-4"},O={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-4"},R={class:"relative z-10 flex items-center justify-center min-h-[calc(100vh-80px)] px-6"},W={class:"w-full max-w-md"},X={class:"text-center mb-8"},Y={class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},Z={class:"relative"},tt={class:"relative"},et=["type"],st={class:"flex items-center justify-between"},ot={class:"flex items-center cursor-pointer group"},at={class:"relative"},rt={key:0,class:"bi bi-check text-white text-xs leading-none"},lt=["disabled"],nt={key:0,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},it={key:1,class:"bi bi-box-arrow-in-right text-lg"},dt={class:"text-center"},ct={class:"text-gray-400 text-sm"},ut={class:"flex items-center gap-3"},mt=N({__name:"login",setup(ft){const k=j(),L=G(),{fetchLocation:z}=H(),l=d(!1),o=d(!1),f=d(!1),p=d(!1),i=M({email:"",password:""}),a=d({show:!1,type:"success",text:""}),C=()=>l.value?"登录中...":o.value?"正在初始化...":"立即登录",x=(s,t)=>{a.value={show:!0,type:s,text:t},setTimeout(()=>{a.value.show=!1},5e3)},S=async()=>{const s=[{name:"初始化用户信息",action:async()=>{await new Promise(t=>setTimeout(t,500))}},{name:"初始化收货地址",action:async()=>{try{await L.initializeAddresses()}catch(t){console.error("初始化地址数据失败:",t)}}},{name:"获取位置信息",action:async()=>{try{await z(!0)}catch(t){console.error("获取位置信息失败:",t)}}},{name:"同步用户配置",action:async()=>{try{await new Promise(t=>setTimeout(t,300))}catch(t){console.error("同步用户配置失败:",t)}}}];for(const t of s)await t.action()},T=async()=>{try{l.value=!0;const s=await F.auth.login(i);if(s.data){k.setAuth(s.data.token,s.data.user),x("success","登录成功！正在初始化用户数据..."),o.value=!0,l.value=!1;try{await S(),await new Promise(t=>setTimeout(t,500)),window.location.href="/"}catch(t){console.error("用户数据初始化失败:",t),o.value=!1,x("error","数据初始化失败，但登录成功，正在跳转..."),setTimeout(()=>{window.location.href="/"},2e3)}}}catch(s){console.error("登录失败:",s),l.value=!1,o.value=!1,x("error",s.message||"登录失败，请检查账号和密码")}};return(s,t)=>{const V=$,w=E,y=I;return m(),c("div",J,[n(V,{show:o.value},null,8,["show"]),t[21]||(t[21]=e("div",{class:"fixed inset-0 pointer-events-none"},[e("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow"})],-1)),e("nav",K,[e("div",O,[e("div",Q,[n(w,{size:"small"}),n(y,{to:"/",class:"inline-flex items-center text-cyan-400 hover:text-cyan-300 transition-colors duration-200"},{default:v(()=>t[5]||(t[5]=[e("i",{class:"bi bi-arrow-left mr-2 text-lg"},null,-1),e("span",{class:"text-sm font-medium"},"返回首页",-1)])),_:1,__:[5]})]),n(y,{to:"/auth/register",class:"text-cyan-400 hover:text-cyan-300 transition-colors duration-200"},{default:v(()=>t[6]||(t[6]=[e("span",{class:"text-sm font-medium"},"没有账号？立即注册",-1)])),_:1,__:[6]})])]),e("div",R,[e("div",W,[e("div",X,[n(w,{size:"medium"}),t[7]||(t[7]=e("h1",{class:"text-3xl font-bold text-white mt-6 mb-2"},"欢迎回来",-1)),t[8]||(t[8]=e("p",{class:"text-gray-400"},"登录您的账户，继续您的装机之旅",-1))]),e("div",Y,[e("form",{onSubmit:U(T,["prevent"]),class:"space-y-6"},[e("div",null,[t[10]||(t[10]=e("label",{for:"email",class:"block text-sm font-medium text-white mb-2"},"账号",-1)),e("div",Z,[g(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=r=>i.email=r),type:"text",required:"",placeholder:"请输入邮箱/用户名/手机号",class:"w-full px-4 py-3 pl-12 bg-gray-800/70 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 transition-all duration-300 focus:bg-gray-800/90",style:{color:"#ffffff !important","background-color":"rgba(31, 41, 55, 0.8) !important"}},null,512),[[A,i.email]]),t[9]||(t[9]=e("i",{class:"bi bi-person absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"},null,-1))]),t[11]||(t[11]=e("p",{class:"mt-2 text-xs text-gray-500"},"支持邮箱、用户名或手机号登录",-1))]),e("div",null,[t[13]||(t[13]=e("label",{for:"password",class:"block text-sm font-medium text-white mb-2"},"密码",-1)),e("div",tt,[g(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=r=>i.password=r),type:f.value?"text":"password",required:"",minlength:"6",placeholder:"请输入您的密码",class:"w-full px-4 py-3 pl-12 pr-12 bg-gray-800/70 border border-gray-600/50 rounded-lg text-white placeholder-gray-400 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 transition-all duration-300 focus:bg-gray-800/90",style:{color:"#ffffff !important","background-color":"rgba(31, 41, 55, 0.8) !important"}},null,8,et),[[B,i.password]]),t[12]||(t[12]=e("i",{class:"bi bi-lock absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"},null,-1)),e("button",{type:"button",onClick:t[2]||(t[2]=r=>f.value=!f.value),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cyan-400 transition-colors duration-200"},[e("i",{class:b([f.value?"bi bi-eye-slash":"bi bi-eye","text-lg"])},null,2)])])]),e("div",st,[e("label",ot,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=r=>p.value=r),class:"sr-only"},null,512),[[D,p.value]]),e("div",at,[e("div",{class:b(["w-4 h-4 rounded border-2 transition-all duration-200 flex items-center justify-center",p.value?"bg-cyan-500 border-cyan-500 shadow-md shadow-cyan-500/30":"border-gray-500 group-hover:border-cyan-400 bg-transparent"])},[p.value?(m(),c("i",rt)):h("",!0)],2)]),t[14]||(t[14]=e("span",{class:"ml-3 text-sm text-gray-400 group-hover:text-gray-300 transition-colors duration-200 select-none"},"记住我",-1))]),t[15]||(t[15]=e("a",{href:"#",class:"text-sm text-cyan-400 hover:text-cyan-300 transition-colors duration-200"},"忘记密码？",-1))]),e("button",{type:"submit",disabled:l.value||o.value,class:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 px-6 rounded-lg font-medium transition-all duration-300 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[l.value||o.value?(m(),c("div",nt)):(m(),c("i",it)),u(" "+_(C()),1)],8,lt)],32),t[18]||(t[18]=P('<div class="relative my-6" data-v-fb70e37b><div class="absolute inset-0 flex items-center" data-v-fb70e37b><div class="w-full border-t border-gray-600" data-v-fb70e37b></div></div><div class="relative flex justify-center text-sm" data-v-fb70e37b><span class="px-2 bg-gray-800 text-gray-400" data-v-fb70e37b>或者</span></div></div>',1)),e("div",dt,[e("p",ct,[t[17]||(t[17]=u(" 还没有账号？ ")),n(y,{to:"/auth/register",class:"text-cyan-400 hover:text-cyan-300 font-medium transition-colors duration-200"},{default:v(()=>t[16]||(t[16]=[u(" 立即注册 ")])),_:1,__:[16]})])])]),t[19]||(t[19]=e("div",{class:"text-center mt-8"},[e("p",{class:"text-gray-500 text-xs"},[u(" 登录即表示您同意我们的 "),e("a",{href:"#",class:"text-cyan-400 hover:text-cyan-300"},"服务条款"),u(" 和 "),e("a",{href:"#",class:"text-cyan-400 hover:text-cyan-300"},"隐私政策")])],-1))])]),a.value.show?(m(),c("div",{key:0,class:b(["fixed top-6 right-6 z-50 px-6 py-4 rounded-lg shadow-lg transition-all duration-300",a.value.type==="success"?"bg-green-500/20 border border-green-500/30 text-green-300":"bg-red-500/20 border border-red-500/30 text-red-300"])},[e("div",ut,[e("i",{class:b([a.value.type==="success"?"bi bi-check-circle":"bi bi-exclamation-circle","text-lg"])},null,2),e("span",null,_(a.value.text),1),e("button",{onClick:t[4]||(t[4]=r=>a.value.show=!1),class:"ml-2 hover:opacity-75"},t[20]||(t[20]=[e("i",{class:"bi bi-x text-lg"},null,-1)]))])],2)):h("",!0)])}}}),Ct=q(mt,[["__scopeId","data-v-fb70e37b"]]);export{Ct as default};
