{"file":"_id_-CcG2fVIo.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_unref","_push","_parent","_createVNode","_ssrRenderList","_ssrInterpolate","_ssrIncludeBooleanAttr","_ssrRenderClass","_ssrRenderStyle","_ssrLooseContain","_ssrLooseEqual","_a","_ssrRenderAttr","_b"],"sources":["../../../../node_modules/nuxt/dist/app/compat/interval.js","../../../../components/ReviewForm.vue","../../../../pages/products/[id].vue"],"sourcesContent":["import { createError } from \"../composables/error.js\";\nconst intervalError = \"[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `import.meta.client`.\";\nexport const setInterval = import.meta.client ? window.setInterval : () => {\n  if (import.meta.dev) {\n    throw createError({\n      statusCode: 500,\n      message: intervalError\n    });\n  }\n  console.error(intervalError);\n};\n","<template>\r\n  <div class=\"glass-card-enhanced rounded-2xl border border-cyan-400/40 shadow-2xl shadow-cyan-500/25 p-8 backdrop-blur-xl\">\r\n    <h3 class=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\r\n      <div class=\"p-2 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg shadow-lg\">\r\n        <i class=\"bi bi-chat-square-text text-white\"></i>\r\n      </div>\r\n      <span class=\"bg-gradient-to-r from-white via-cyan-100 to-blue-100 bg-clip-text text-transparent\">发表评论</span>\r\n    </h3>\r\n\r\n    <!-- 未登录提示 -->\r\n    <div v-if=\"!userStore.isLoggedIn\" class=\"text-center py-8\">\r\n      <div class=\"text-4xl text-gray-400 mb-4\">\r\n        <i class=\"bi bi-person-plus\"></i>\r\n      </div>\r\n      <h4 class=\"text-xl font-semibold text-white mb-2\">请先登录</h4>\r\n      <p class=\"text-gray-400 mb-6\">登录后即可发表对此产品的评价</p>\r\n      <NuxtLink to=\"/auth/login\" \r\n                class=\"inline-flex items-center px-6 py-3 bg-cyan-600 text-white font-medium rounded-lg hover:bg-cyan-500 transition-all duration-300\">\r\n        <i class=\"bi bi-box-arrow-in-right mr-2\"></i>\r\n        立即登录\r\n      </NuxtLink>\r\n    </div>\r\n\r\n    <!-- 检查评论状态中 -->\r\n    <div v-else-if=\"isCheckingReview\" class=\"text-center py-8\">\r\n      <div class=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n      <p class=\"text-gray-300\">正在检查评论状态...</p>\r\n    </div>\r\n\r\n    <!-- 已经评论过的提示 -->\r\n    <div v-else-if=\"hasReviewed && existingReview\" class=\"text-center py-8\">\r\n      <div class=\"text-4xl text-green-400 mb-4\">\r\n        <i class=\"bi bi-check-circle-fill\"></i>\r\n      </div>\r\n      <h4 class=\"text-xl font-semibold text-white mb-2\">您已评论过此产品</h4>\r\n      <p class=\"text-gray-400 mb-6\">每个产品只能发布一次评论</p>\r\n      \r\n      <!-- 显示已有评论 -->\r\n      <div class=\"bg-gray-800/30 rounded-xl p-6 border border-gray-600/30 backdrop-blur-sm\">\r\n        <div class=\"flex items-center justify-center gap-2 mb-3\">\r\n          <div class=\"flex\">\r\n            <i v-for=\"i in 5\" :key=\"i\" \r\n               :class=\"i <= existingReview.rating ? 'text-yellow-400' : 'text-gray-600'\"\r\n               class=\"bi bi-star-fill text-lg\"></i>\r\n          </div>\r\n          <span class=\"text-white font-medium ml-2\">{{ existingReview.rating }} 分</span>\r\n        </div>\r\n        <p class=\"text-gray-300 text-center\">{{ existingReview.comment }}</p>\r\n        <p class=\"text-gray-500 text-sm text-center mt-3\">\r\n          发布于 {{ new Date(existingReview.created_at).toLocaleDateString('zh-CN') }}\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 评论表单 -->\r\n    <form v-else @submit.prevent=\"submitReview\" class=\"space-y-6\">\r\n      <!-- 评分选择 -->\r\n      <div>\r\n        <label class=\"block text-sm font-bold text-white mb-4 flex items-center gap-2\">\r\n          <i class=\"bi bi-star text-yellow-400\"></i>\r\n          评分\r\n        </label>\r\n        <div class=\"flex items-center gap-2\">\r\n          <button v-for=\"i in 5\" :key=\"i\" \r\n                  type=\"button\"\r\n                  @click=\"reviewData.rating = i\"\r\n                  :class=\"[\r\n                    'text-3xl transition-all duration-200 hover:scale-110',\r\n                    i <= reviewData.rating ? 'text-yellow-400' : 'text-gray-600 hover:text-yellow-300'\r\n                  ]\">\r\n            <i class=\"bi bi-star-fill drop-shadow-lg\"></i>\r\n          </button>\r\n          <span v-if=\"reviewData.rating > 0\" class=\"ml-4 text-white font-medium\">\r\n            {{ getRatingText(reviewData.rating) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 评论内容 -->\r\n      <div>\r\n        <label class=\"block text-sm font-bold text-white mb-4 flex items-center gap-2\">\r\n          <i class=\"bi bi-chat-dots text-cyan-400\"></i>\r\n          评论内容\r\n        </label>\r\n        <textarea v-model=\"reviewData.comment\" \r\n                  required\r\n                  rows=\"5\" \r\n                  placeholder=\"请分享您对这款产品的使用体验...\"\r\n                  class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none\"></textarea>\r\n      </div>\r\n\r\n      <!-- 匿名选项 -->\r\n      <div>\r\n        <label class=\"flex items-center space-x-3\">\r\n          <input v-model=\"isAnonymous\" \r\n                 type=\"checkbox\" \r\n                 class=\"w-4 h-4 text-cyan-500 bg-transparent border-2 border-cyan-500 rounded focus:ring-cyan-500\">\r\n          <span class=\"text-gray-300\">匿名发表（不显示用户名）</span>\r\n        </label>\r\n      </div>\r\n\r\n      <!-- 提交按钮 -->\r\n      <div class=\"flex justify-end gap-4 pt-6\">\r\n        <button type=\"button\" \r\n                @click=\"resetForm\" \r\n                class=\"px-6 py-3 border border-gray-600/50 text-gray-300 hover:text-white hover:border-gray-500 rounded-lg font-medium transition-colors duration-300\">\r\n          重置\r\n        </button>\r\n        <button type=\"submit\" \r\n                :disabled=\"!canSubmit || isSubmitting\"\r\n                :title=\"!canSubmit ? buttonDisabledReason : ''\"\r\n                class=\"review-submit-btn px-6 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 disabled:from-gray-600 disabled:to-gray-600 text-white rounded-lg font-bold transition-all duration-300 flex items-center justify-center gap-2 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 disabled:cursor-not-allowed min-w-[160px]\">\r\n          <!-- 图标区域 -->\r\n          <div class=\"flex items-center justify-center w-4 h-4\">\r\n            <transition name=\"icon-fade\" mode=\"out-in\">\r\n              <div v-if=\"isSubmitting || isCheckingReview\" \r\n                   key=\"loading\"\r\n                   class=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n              <i v-else \r\n                 key=\"send\"\r\n                 class=\"bi bi-send\"></i>\r\n            </transition>\r\n          </div>\r\n          \r\n          <!-- 文字区域 -->\r\n          <transition name=\"text-fade\" mode=\"out-in\">\r\n            <span :key=\"buttonDisabledReason\" class=\"button-text\">\r\n              {{ buttonDisabledReason }}\r\n            </span>\r\n          </transition>\r\n        </button>\r\n      </div>\r\n\r\n      <!-- 禁用原因提示 -->\r\n      <div v-if=\"!canSubmit && userStore.isLoggedIn\" class=\"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg\">\r\n        <div class=\"flex items-center gap-2 text-yellow-400 text-sm\">\r\n          <i class=\"bi bi-info-circle\"></i>\r\n          <span>{{ buttonDisabledReason }}</span>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { createDiscreteApi } from 'naive-ui'\r\nimport { useUserStore } from '~/stores/user'\r\nimport { reviewsApi } from '~/utils/api/reviews'\r\n\r\n// Props\r\nconst props = defineProps({\r\n  productId: {\r\n    type: Number,\r\n    required: true\r\n  }\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits(['review-submitted'])\r\n\r\n// 使用stores\r\nconst userStore = useUserStore()\r\n\r\n// 创建消息API\r\nconst { message } = createDiscreteApi(['message'])\r\n\r\n// 响应式数据\r\nconst reviewData = ref({\r\n  rating: 0,\r\n  comment: ''\r\n})\r\n\r\nconst isAnonymous = ref(false)\r\nconst isSubmitting = ref(false)\r\nconst isCheckingReview = ref(false)\r\nconst hasReviewed = ref(false)\r\nconst existingReview = ref(null)\r\n\r\n// 计算属性\r\nconst canSubmit = computed(() => {\r\n  return reviewData.value.rating > 0 && \r\n         reviewData.value.comment.trim().length >= 10 &&\r\n         userStore.isLoggedIn &&\r\n         !hasReviewed.value &&\r\n         !isCheckingReview.value\r\n})\r\n\r\nconst buttonDisabledReason = computed(() => {\r\n  if (!userStore.isLoggedIn) return '请先登录'\r\n  if (hasReviewed.value) return '您已评论过此产品'\r\n  if (isCheckingReview.value) return '检查中...'\r\n  if (reviewData.value.rating === 0) return '请选择评分'\r\n  if (reviewData.value.comment.trim().length < 10) return '评论内容至少10个字符'\r\n  if (isSubmitting.value) return '发布中...'\r\n  return '发布评论'\r\n})\r\n\r\n// 方法\r\nconst getRatingText = (rating) => {\r\n  const texts = {\r\n    1: '非常不满意',\r\n    2: '不满意',\r\n    3: '一般',\r\n    4: '满意',\r\n    5: '非常满意'\r\n  }\r\n  return texts[rating] || ''\r\n}\r\n\r\nconst resetForm = () => {\r\n  reviewData.value = {\r\n    rating: 0,\r\n    comment: ''\r\n  }\r\n  isAnonymous.value = false\r\n}\r\n\r\n// 检查用户是否已经评论过该产品\r\nconst checkUserReview = async () => {\r\n  if (!userStore.isLoggedIn || !props.productId) return\r\n\r\n  try {\r\n    isCheckingReview.value = true\r\n    const response = await reviewsApi.checkUserReview(props.productId)\r\n    \r\n    if (response.success) {\r\n      hasReviewed.value = response.data.has_reviewed\r\n      if (response.data.review) {\r\n        existingReview.value = response.data.review\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.error('检查评论状态失败:', err)\r\n    // 检查失败时默认允许发布，避免阻止用户正常使用\r\n    hasReviewed.value = false\r\n  } finally {\r\n    isCheckingReview.value = false\r\n  }\r\n}\r\n\r\nconst submitReview = async () => {\r\n  if (!canSubmit.value || isSubmitting.value) return\r\n\r\n  try {\r\n    isSubmitting.value = true\r\n\r\n    const reviewPayload = {\r\n      product_id: props.productId,\r\n      rating: reviewData.value.rating,\r\n      comment: reviewData.value.comment.trim(),\r\n      author: isAnonymous.value ? '匿名用户' : userStore.user?.username || userStore.user?.email?.split('@')[0],\r\n      is_anonymous: isAnonymous.value\r\n    }\r\n\r\n    const response = await reviewsApi.createReview(reviewPayload)\r\n\r\n    if (response.success) {\r\n      \r\n      // 标记为已评论\r\n      hasReviewed.value = true\r\n      \r\n      // 重置表单\r\n      resetForm()\r\n      \r\n      // 通知父组件刷新评论列表\r\n      emit('review-submitted')\r\n      \r\n      // 显示验证购买状态\r\n      if (response.data.verified_purchase) {\r\n        setTimeout(() => {\r\n          message.info('您的购买已验证，评论将获得更高的可信度')\r\n        }, 1000)\r\n      }\r\n\r\n      // 显示作者信息\r\n      if (response.data.author_name) {\r\n        console.log('评论作者:', response.data.author_name)\r\n      }\r\n    } else {\r\n      throw new Error(response.message || '发布评论失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('发布评论失败:', err)\r\n    message.error('发布失败：' + (err.message || '请重试'))\r\n  } finally {\r\n    isSubmitting.value = false\r\n  }\r\n}\r\n\r\n// 组件挂载时检查评论状态\r\nonMounted(() => {\r\n  // 确保只在客户端执行\r\n  if (process.client) {\r\n    checkUserReview()\r\n  }\r\n})\r\n\r\n// 监听用户登录状态变化\r\nwatch(() => userStore.isLoggedIn, (newValue) => {\r\n  // 确保只在客户端执行\r\n  if (process.client) {\r\n    if (newValue) {\r\n      // 用户登录后重新检查评论状态\r\n      checkUserReview()\r\n    } else {\r\n      // 用户退出登录后重置状态\r\n      hasReviewed.value = false\r\n      existingReview.value = null\r\n    }\r\n  }\r\n})\r\n\r\n// 监听产品ID变化\r\nwatch(() => props.productId, () => {\r\n  // 产品ID变化时重新检查评论状态\r\n  if (process.client && userStore.isLoggedIn) {\r\n    checkUserReview()\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* 玻璃卡片增强效果 */\r\n.glass-card-enhanced {\r\n  background: rgba(17, 24, 39, 0.7);\r\n  backdrop-filter: blur(25px);\r\n  border: 1px solid rgba(59, 130, 246, 0.3);\r\n  box-shadow: \r\n    0 10px 40px rgba(0, 0, 0, 0.4),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.12);\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.glass-card-enhanced:hover {\r\n  background: rgba(17, 24, 39, 0.8);\r\n  border-color: rgba(59, 130, 246, 0.5);\r\n  box-shadow: \r\n    0 15px 50px rgba(0, 0, 0, 0.5),\r\n    0 0 25px rgba(59, 130, 246, 0.15),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.18);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* 按钮动画优化 */\r\n.review-submit-btn {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.review-submit-btn .button-text {\r\n  display: inline-block;\r\n  min-height: 1.25rem;\r\n  line-height: 1.25rem;\r\n}\r\n\r\n/* 图标淡入淡出动画 */\r\n.icon-fade-enter-active,\r\n.icon-fade-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.icon-fade-enter-from {\r\n  opacity: 0;\r\n  transform: scale(0.8) rotate(45deg);\r\n}\r\n\r\n.icon-fade-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.8) rotate(-45deg);\r\n}\r\n\r\n.icon-fade-enter-to,\r\n.icon-fade-leave-from {\r\n  opacity: 1;\r\n  transform: scale(1) rotate(0deg);\r\n}\r\n\r\n/* 文字淡入淡出动画 */\r\n.text-fade-enter-active,\r\n.text-fade-leave-active {\r\n  transition: all 0.25s ease;\r\n}\r\n\r\n.text-fade-enter-from {\r\n  opacity: 0;\r\n  transform: translateY(8px);\r\n}\r\n\r\n.text-fade-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(-8px);\r\n}\r\n\r\n.text-fade-enter-to,\r\n.text-fade-leave-from {\r\n  opacity: 1;\r\n  transform: translateY(0);\r\n}\r\n\r\n/* 按钮加载状态优化 */\r\n.review-submit-btn:disabled {\r\n  position: relative;\r\n}\r\n\r\n.review-submit-btn:disabled::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);\r\n  transform: translateX(-100%);\r\n  animation: loading-shimmer 1.5s infinite;\r\n}\r\n\r\n@keyframes loading-shimmer {\r\n  0% {\r\n    transform: translateX(-100%);\r\n  }\r\n  100% {\r\n    transform: translateX(100%);\r\n  }\r\n}\r\n</style> ","<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden\">\r\n\r\n    <div class=\"fixed inset-0 pointer-events-none\">\r\n      <div class=\"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse\"></div>\r\n      <div class=\"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000\"></div>\r\n      <div class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow\"></div>\r\n    </div>\r\n   \r\n    <!-- 导航栏 -->\r\n    <AppHeader \r\n      :show-back-button=\"false\"\r\n      :show-nav-menu=\"false\"\r\n      :show-breadcrumb=\"true\"\r\n      :show-location=\"false\"\r\n      :show-search-button=\"false\"\r\n      :show-notification-button=\"false\"\r\n      :show-decorations=\"false\"\r\n      logo-size=\"medium\"\r\n      :current-page-title=\"product?.name || '产品详情'\"\r\n      :breadcrumb-items=\"[\r\n        { label: '首页', path: '/' },\r\n        { label: '产品中心', path: '/products' },\r\n        { label: product?.name || '产品详情' }\r\n      ]\"\r\n    />\r\n\r\n    <!-- 主要内容 -->\r\n    <div class=\"container mx-auto px-6 py-8 relative z-10\" v-if=\"product && !loading && !error\">\r\n      <div class=\"grid lg:grid-cols-2 gap-12 mb-12\">\r\n        <!-- 左侧：产品图片和特性 -->\r\n        <div class=\"space-y-6\">\r\n          <!-- 增强主图片展示 -->\r\n          <div class=\"glass-card-enhanced rounded-2xl border border-cyan-400/40 shadow-2xl shadow-cyan-500/25 overflow-hidden backdrop-blur-xl\">\r\n            <div class=\"relative h-96 bg-gradient-to-br from-gray-800/60 to-gray-900/60 p-6\">\r\n              <!-- 产品图片或placeholder -->\r\n              <div v-if=\"product.image\" class=\"product-image-container\">\r\n                <img :src=\"product.image\" :alt=\"product.name\" \r\n                     class=\"w-full h-full object-contain transition-all duration-500 hover:scale-105 filter drop-shadow-2xl\"\r\n                     @error=\"$event.target.style.display = 'none'\">\r\n              </div>\r\n              <div v-else class=\"product-placeholder\">\r\n                <div class=\"product-icon-wrapper\">\r\n                  <i class=\"bi bi-cpu product-icon\"></i>\r\n                  <div class=\"product-icon-glow\"></div>\r\n                </div>\r\n                <span class=\"product-placeholder-text\">{{ product.name }}</span>\r\n                <div class=\"product-tech-pattern\"></div>\r\n              </div>\r\n              \r\n              <!-- 增强折扣标签 -->\r\n              <div v-if=\"product.originalPrice && product.originalPrice > product.price\" \r\n                   class=\"absolute top-4 left-4 bg-gradient-to-r from-red-500 via-pink-500 to-red-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg shadow-red-500/40 animate-pulse\">\r\n                <i class=\"bi bi-lightning-fill mr-1\"></i>\r\n                省 ¥{{ (product.originalPrice - product.price).toLocaleString() }}\r\n              </div>\r\n\r\n              <!-- 增强库存状态 -->\r\n              <div class=\"absolute top-4 right-4\">\r\n                <span v-if=\"!product.inStock\" \r\n                      class=\"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-red-500/30 text-red-200 border border-red-400/50 shadow-lg shadow-red-500/30 backdrop-blur-sm\">\r\n                  <i class=\"bi bi-x-circle-fill mr-2 text-red-300\"></i>缺货\r\n                </span>\r\n                <span v-else-if=\"product.stockCount <= 5\" \r\n                      class=\"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-orange-500/30 text-orange-200 border border-orange-400/50 shadow-lg shadow-orange-500/30 backdrop-blur-sm animate-pulse\">\r\n                  <i class=\"bi bi-exclamation-triangle-fill mr-2 text-orange-300\"></i>仅剩 {{ product.stockCount }} 件\r\n                </span>\r\n                <span v-else \r\n                      class=\"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-emerald-500/30 text-emerald-200 border border-emerald-400/50 shadow-lg shadow-emerald-500/30 backdrop-blur-sm\">\r\n                  <i class=\"bi bi-check-circle-fill mr-2 text-emerald-300\"></i>现货充足\r\n                </span>\r\n              </div>\r\n\r\n              <!-- 产品类型标识 -->\r\n              <div class=\"absolute bottom-4 left-4\">\r\n                <span class=\"inline-flex items-center px-3 py-1 rounded-lg text-xs font-medium bg-cyan-500/20 text-cyan-300 border border-cyan-400/30 backdrop-blur-sm\">\r\n                  <i class=\"bi bi-bookmark-fill mr-1\"></i>\r\n                  {{ getProductCategory(product.category) }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 增强产品特性 -->\r\n          <div class=\"glass-card-enhanced rounded-2xl border border-cyan-400/40 shadow-2xl shadow-cyan-500/25 p-8 backdrop-blur-xl\">\r\n            <h3 class=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\r\n              <div class=\"p-2 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-lg shadow-lg\">\r\n                <i class=\"bi bi-stars text-white\"></i>\r\n              </div>\r\n              <span class=\"bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent\">核心特性</span>\r\n            </h3>\r\n            <div class=\"grid grid-cols-1 gap-4\" v-if=\"product.features && product.features.length > 0\">\r\n              <div v-for=\"(feature, index) in product.features\" :key=\"feature\"\r\n                   class=\"group flex items-center gap-4 p-4 bg-gradient-to-r from-gray-800/40 to-gray-700/40 rounded-xl border border-gray-600/30 hover:border-cyan-400/50 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/20 backdrop-blur-sm\"\r\n                   :style=\"{ 'animation-delay': `${index * 100}ms` }\">\r\n                <div class=\"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-emerald-500 to-green-500 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300\">\r\n                  <i class=\"bi bi-check text-white text-sm font-bold\"></i>\r\n                </div>\r\n                <span class=\"text-white font-medium group-hover:text-cyan-300 transition-colors duration-300\">{{ feature }}</span>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"text-gray-400 text-center py-8\">\r\n              <i class=\"bi bi-info-circle text-3xl mb-2\"></i>\r\n              <p>暂无特性信息</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 右侧：产品信息和购买 -->\r\n        <div class=\"space-y-6\">\r\n          <!-- 增强基本信息 -->\r\n          <div class=\"glass-card-enhanced rounded-2xl border border-cyan-400/40 shadow-2xl shadow-cyan-500/25 p-8 backdrop-blur-xl\">\r\n            <!-- 品牌和收藏 -->\r\n            <div class=\"flex items-center justify-between mb-6\">\r\n              <div class=\"flex items-center gap-4\">\r\n                <span class=\"inline-flex items-center px-5 py-2 rounded-xl text-sm font-bold bg-gradient-to-r from-cyan-500/30 to-blue-500/30 text-cyan-200 border border-cyan-400/40 shadow-lg backdrop-blur-sm\">\r\n                  <i class=\"bi bi-award mr-2\"></i>\r\n                  {{ product.brand }}\r\n                </span>\r\n                <div class=\"flex items-center gap-2 text-sm text-gray-400\">\r\n                  <i class=\"bi bi-eye text-cyan-400\"></i>\r\n                  <span>{{ product.viewCount || 1234 }} 次浏览</span>\r\n                </div>\r\n              </div>\r\n              <button @click=\"toggleFavorite\" \r\n                      :class=\"[\r\n                        'p-3 rounded-xl border transition-all duration-300 group relative overflow-hidden',\r\n                        isFavorite \r\n                          ? 'bg-gradient-to-r from-red-500/30 to-pink-500/30 border-red-400/50 text-red-300 shadow-lg shadow-red-500/30' \r\n                          : 'border-gray-600/50 text-gray-400 hover:border-red-400/50 hover:text-red-300 hover:bg-red-500/10'\r\n                      ]\">\r\n                <i :class=\"isFavorite ? 'bi bi-heart-fill' : 'bi bi-heart'\" \r\n                   class=\"text-xl relative z-10 group-hover:scale-110 transition-transform duration-300\"></i>\r\n                <div class=\"absolute inset-0 bg-gradient-to-r from-red-500/20 to-pink-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\r\n              </button>\r\n            </div>\r\n\r\n            <!-- 产品名称 -->\r\n            <h1 class=\"text-4xl font-bold text-white mb-4 leading-tight\">\r\n              <span class=\"bg-gradient-to-r from-white via-cyan-100 to-blue-100 bg-clip-text text-transparent\">\r\n                {{ product.name }}\r\n              </span>\r\n            </h1>\r\n\r\n            <!-- 产品型号和SKU -->\r\n            <div class=\"flex items-center gap-4 mb-6 text-gray-400\">\r\n              <span v-if=\"product.model\" class=\"text-sm\">\r\n                <i class=\"bi bi-tag mr-1\"></i>\r\n                型号: {{ product.model }}\r\n              </span>\r\n              <span v-if=\"product.sku\" class=\"text-sm\">\r\n                <i class=\"bi bi-upc mr-1\"></i>\r\n                SKU: {{ product.sku }}\r\n              </span>\r\n            </div>\r\n\r\n            <!-- 增强评分展示 -->\r\n            <div class=\"flex items-center gap-6 mb-8 p-4 bg-gradient-to-r from-gray-800/40 to-gray-700/40 rounded-xl border border-gray-600/30 backdrop-blur-sm\">\r\n              <div class=\"flex items-center gap-3\">\r\n                <div class=\"flex\">\r\n                  <i v-for=\"i in 5\" :key=\"i\" \r\n                     :class=\"i <= product.rating ? 'text-yellow-400' : 'text-gray-600'\"\r\n                     class=\"bi bi-star-fill text-xl drop-shadow-lg\"></i>\r\n                </div>\r\n                <span class=\"text-2xl font-bold text-white\">{{ product.rating }}</span>\r\n              </div>\r\n              <div class=\"h-8 w-px bg-gradient-to-b from-transparent via-gray-500 to-transparent\"></div>\r\n              <div class=\"flex items-center gap-2 text-gray-300\">\r\n                <i class=\"bi bi-chat-dots text-cyan-400\"></i>\r\n                <span>{{ product.reviewCount }} 条评价</span>\r\n              </div>\r\n              <div class=\"flex items-center gap-2 text-gray-300\">\r\n                <i class=\"bi bi-truck text-green-400\"></i>\r\n                <span>免费配送</span>\r\n              </div>\r\n              <div class=\"flex items-center gap-2 text-gray-300\">\r\n                <i class=\"bi bi-graph-up text-purple-400\"></i>\r\n                <span>销量 {{ product.sales }}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 增强价格展示 -->\r\n            <div class=\"mb-8 p-6 bg-gradient-to-r from-cyan-500/10 to-blue-500/10 rounded-xl border border-cyan-400/30 backdrop-blur-sm\">\r\n              <div class=\"flex items-end gap-4 mb-3\">\r\n                <span class=\"text-5xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent\">\r\n                  ¥{{ product.price.toLocaleString() }}\r\n                </span>\r\n                <span v-if=\"product.originalPrice && product.originalPrice > product.price\" \r\n                      class=\"text-2xl text-gray-500 line-through mb-2\">\r\n                  ¥{{ product.originalPrice.toLocaleString() }}\r\n                </span>\r\n                <span v-if=\"product.originalPrice && product.originalPrice > product.price\"\r\n                      class=\"px-3 py-1 bg-red-500/20 text-red-300 rounded-lg text-sm font-medium border border-red-400/30 mb-2\">\r\n                  省{{ Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100) }}%\r\n                </span>\r\n              </div>\r\n              <p class=\"text-gray-300 leading-relaxed\">{{ product.description }}</p>\r\n            </div>\r\n\r\n            <!-- 数量选择 - 深色主题 -->\r\n            <div class=\"mb-8\">\r\n              <label class=\"block text-sm font-bold text-white mb-4 flex items-center gap-2\">\r\n                <i class=\"bi bi-123 text-cyan-400\"></i>\r\n                购买数量\r\n              </label>\r\n              <div class=\"flex items-center gap-6\">\r\n                <div class=\"flex items-center border border-gray-600/50 rounded-xl bg-gray-800/30 backdrop-blur-sm\">\r\n                  <button @click=\"decreaseQuantity\" \r\n                          class=\"px-5 py-3 text-white hover:bg-cyan-500/20 hover:text-cyan-300 rounded-l-xl transition-all duration-300 border-r border-gray-600/50\">\r\n                    <i class=\"bi bi-dash-lg text-lg font-bold\"></i>\r\n                  </button>\r\n                  <span class=\"px-8 py-3 text-white font-bold text-lg min-w-[80px] text-center bg-gray-700/30\">{{ quantity }}</span>\r\n                  <button @click=\"increaseQuantity\" \r\n                          class=\"px-5 py-3 text-white hover:bg-cyan-500/20 hover:text-cyan-300 rounded-r-xl transition-all duration-300 border-l border-gray-600/50\">\r\n                    <i class=\"bi bi-plus-lg text-lg font-bold\"></i>\r\n                  </button>\r\n                </div>\r\n                <div class=\"flex items-center gap-2 text-gray-300 bg-gray-800/30 px-4 py-2 rounded-lg border border-gray-600/30 backdrop-blur-sm\">\r\n                  <i class=\"bi bi-box text-green-400\"></i>\r\n                  <span>库存：<span class=\"text-green-400 font-bold\">{{ product.stockCount }}</span> 件</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 未登录提示 -->\r\n            <div v-if=\"!userStore.isLoggedIn\" class=\"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-xl backdrop-blur-sm\">\r\n              <div class=\"flex items-center gap-2 text-yellow-400 mb-2\">\r\n                <i class=\"bi bi-info-circle\"></i>\r\n                <span class=\"font-medium\">购买提示</span>\r\n              </div>\r\n              <p class=\"text-yellow-300 text-sm\">\r\n                <NuxtLink to=\"/auth/login\" class=\"text-yellow-400 hover:text-yellow-300 underline font-medium\">登录</NuxtLink> \r\n                后即可将商品添加到购物车，享受更便捷的购物体验。\r\n              </p>\r\n            </div>\r\n\r\n            <!-- 购买按钮 - 增强版 -->\r\n            <div class=\"space-y-4 mb-8\">\r\n              <button @click=\"addToCart\" \r\n                      :disabled=\"!product.inStock || showSuccessMessage || isAddingToCart || !userStore.isLoggedIn\"\r\n                      data-add-to-cart\r\n                      class=\"w-full bg-gradient-to-r from-cyan-600 via-blue-600 to-cyan-600 hover:from-cyan-500 hover:via-blue-500 hover:to-cyan-500 disabled:from-gray-600 disabled:to-gray-700 text-white py-3 px-6 rounded-xl font-bold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95 relative overflow-hidden group\">\r\n                <div class=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700\"></div>\r\n                <div v-if=\"isAddingToCart\" class=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                <i v-else class=\"bi bi-cart-plus text-xl\"></i>\r\n                <span v-if=\"!userStore.isLoggedIn\">请先登录</span>\r\n                <span v-else-if=\"!product.inStock\">暂时缺货</span>\r\n                <span v-else-if=\"isAddingToCart\">添加中...</span>\r\n                <span v-else>加入购物车</span>\r\n              </button>\r\n\r\n              <button @click=\"buyNow\" \r\n                      :disabled=\"!product.inStock || !userStore.isLoggedIn\"\r\n                      class=\"w-full bg-gradient-to-r from-green-600 via-emerald-600 to-green-600 hover:from-green-500 hover:via-emerald-500 hover:to-green-500 disabled:from-gray-600 disabled:to-gray-700 text-white py-3 px-6 rounded-xl font-bold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg shadow-green-500/30 hover:shadow-green-500/50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95 relative overflow-hidden group\">\r\n                <div class=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700\"></div>\r\n                <i class=\"bi bi-lightning-fill text-xl\"></i>\r\n                <span v-if=\"!userStore.isLoggedIn\">请先登录</span>\r\n                <span v-else>立即购买</span>\r\n              </button>\r\n            </div>\r\n\r\n            <!-- 保障信息 - 增强版 -->\r\n            <div class=\"pt-6 border-t border-gray-700/50\">\r\n              <div class=\"grid grid-cols-3 gap-4 text-center\">\r\n                <div class=\"flex flex-col items-center gap-3 p-4 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-xl border border-green-400/30 hover:border-green-400/50 transition-all duration-300 group\">\r\n                  <div class=\"p-3 bg-green-500/20 rounded-full group-hover:scale-110 transition-transform duration-300\">\r\n                    <i class=\"bi bi-truck text-2xl text-green-400\"></i>\r\n                  </div>\r\n                  <span class=\"text-sm text-gray-300 font-medium\">免费配送</span>\r\n                </div>\r\n                <div class=\"flex flex-col items-center gap-3 p-4 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-xl border border-blue-400/30 hover:border-blue-400/50 transition-all duration-300 group\">\r\n                  <div class=\"p-3 bg-blue-500/20 rounded-full group-hover:scale-110 transition-transform duration-300\">\r\n                    <i class=\"bi bi-shield-check text-2xl text-blue-400\"></i>\r\n                  </div>\r\n                  <span class=\"text-sm text-gray-300 font-medium\">两年保修</span>\r\n                </div>\r\n                <div class=\"flex flex-col items-center gap-3 p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-xl border border-purple-400/30 hover:border-purple-400/50 transition-all duration-300 group\">\r\n                  <div class=\"p-3 bg-purple-500/20 rounded-full group-hover:scale-110 transition-transform duration-300\">\r\n                    <i class=\"bi bi-arrow-repeat text-2xl text-purple-400\"></i>\r\n                  </div>\r\n                  <span class=\"text-sm text-gray-300 font-medium\">30天退换</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 详细规格 - 增强版 -->\r\n      <div class=\"glass-card-enhanced rounded-2xl border border-cyan-400/40 shadow-2xl shadow-cyan-500/25 p-8 mb-12 backdrop-blur-xl\">\r\n        <h2 class=\"text-3xl font-bold text-white mb-8 flex items-center gap-4\">\r\n          <div class=\"p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg shadow-lg\">\r\n            <i class=\"bi bi-gear-fill text-white text-2xl\"></i>\r\n          </div>\r\n          <span class=\"bg-gradient-to-r from-white via-cyan-100 to-blue-100 bg-clip-text text-transparent\">技术规格</span>\r\n        </h2>\r\n        <div v-if=\"product.specs && Object.keys(product.specs).length > 0\" class=\"grid md:grid-cols-2 gap-6\">\r\n          <div v-for=\"(value, key) in product.specs\" :key=\"key\" \r\n               class=\"group flex justify-between items-center p-5 bg-gradient-to-r from-gray-800/50 to-gray-700/50 rounded-xl border border-gray-600/30 hover:border-cyan-400/50 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/20 backdrop-blur-sm\">\r\n            <span class=\"text-gray-300 font-semibold text-lg\">{{ translateSpecKey(key) }}</span>\r\n            <span class=\"font-bold text-white text-lg group-hover:text-cyan-300 transition-colors duration-300\">{{ value }}</span>\r\n          </div>\r\n        </div>\r\n        <div v-else class=\"text-gray-400 text-center py-8\">\r\n          <i class=\"bi bi-info-circle text-3xl mb-2\"></i>\r\n          <p>暂无规格信息</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 用户评价 - 增强版 -->\r\n      <div class=\"glass-card-enhanced rounded-2xl border border-cyan-400/40 shadow-2xl shadow-cyan-500/25 p-8 backdrop-blur-xl\">\r\n        <h2 class=\"text-3xl font-bold text-white mb-8 flex items-center gap-4\">\r\n          <div class=\"p-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg shadow-lg\">\r\n            <i class=\"bi bi-chat-dots-fill text-white text-2xl\"></i>\r\n          </div>\r\n          <span class=\"bg-gradient-to-r from-white via-cyan-100 to-blue-100 bg-clip-text text-transparent\">用户评价</span>\r\n        </h2>\r\n        \r\n        <!-- 评价统计 - 增强版 -->\r\n        <div v-if=\"reviewStats\" class=\"grid md:grid-cols-2 gap-8 mb-8\">\r\n          <div class=\"text-center p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-400/30\">\r\n            <div class=\"text-6xl font-bold bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent mb-4\">{{ reviewStats.average_rating }}</div>\r\n            <div class=\"flex justify-center mb-4\">\r\n              <i v-for=\"i in 5\" :key=\"i\" \r\n                 :class=\"i <= Math.round(reviewStats.average_rating) ? 'text-yellow-400' : 'text-gray-600'\"\r\n                 class=\"bi bi-star-fill text-2xl drop-shadow-lg\"></i>\r\n            </div>\r\n            <div class=\"text-gray-300 text-lg\">基于 <span class=\"text-yellow-400 font-bold\">{{ reviewStats.total_reviews }}</span> 条评价</div>\r\n          </div>\r\n          \r\n          <div class=\"space-y-4\">\r\n            <div v-for=\"item in reviewStats.rating_distribution\" :key=\"item.rating\" \r\n                 class=\"flex items-center gap-4\">\r\n              <span class=\"text-white w-12 flex-shrink-0 font-bold\">{{ item.rating }}星</span>\r\n              <div class=\"flex-1 bg-gray-700/50 rounded-full h-3 overflow-hidden backdrop-blur-sm border border-gray-600/30\">\r\n                <div class=\"bg-gradient-to-r from-yellow-400 to-orange-400 h-3 rounded-full transition-all duration-500 hover:shadow-lg hover:shadow-yellow-500/30\" \r\n                     :style=\"{ width: `${item.percentage}%` }\"></div>\r\n              </div>\r\n              <span class=\"text-gray-400 w-16 text-sm flex-shrink-0 font-medium\">{{ item.count }} 条</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- 加载中状态 -->\r\n        <div v-else-if=\"isLoadingReviews\" class=\"text-center py-8\">\r\n          <div class=\"w-8 h-8 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p class=\"text-gray-300\">正在加载评论统计...</p>\r\n        </div>\r\n\r\n        <!-- 发表评论组件 -->\r\n        <div class=\"mb-8\">\r\n          <ReviewForm \r\n            v-if=\"product\" \r\n            :product-id=\"product.id\" \r\n            @review-submitted=\"handleReviewSubmitted\" />\r\n        </div>\r\n\r\n        <!-- 评论筛选和排序 -->\r\n        <div class=\"flex flex-wrap gap-4 mb-6\">\r\n          <select v-model=\"reviewFilters.rating\" @change=\"handleFilterChange\" \r\n                  class=\"px-4 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white focus:ring-2 focus:ring-cyan-500\">\r\n            <option value=\"all\">所有评分</option>\r\n            <option value=\"5\">5星</option>\r\n            <option value=\"4\">4星</option>\r\n            <option value=\"3\">3星</option>\r\n            <option value=\"2\">2星</option>\r\n            <option value=\"1\">1星</option>\r\n          </select>\r\n          \r\n          <select v-model=\"reviewFilters.sort\" @change=\"handleFilterChange\"\r\n                  class=\"px-4 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white focus:ring-2 focus:ring-cyan-500\">\r\n            <option value=\"newest\">最新发布</option>\r\n            <option value=\"oldest\">最早发布</option>\r\n            <option value=\"rating_high\">评分从高到低</option>\r\n            <option value=\"rating_low\">评分从低到高</option>\r\n            <option value=\"helpful\">最有帮助</option>\r\n          </select>\r\n        </div>\r\n\r\n        <!-- 评价列表 - 增强版 -->\r\n        <div v-if=\"!isLoadingReviews && reviews.length > 0\" class=\"space-y-6\">\r\n          <div v-for=\"review in reviews\" :key=\"review.id\" \r\n               class=\"p-6 bg-gradient-to-r from-gray-800/40 to-gray-700/40 rounded-xl border border-gray-600/30 hover:border-cyan-400/50 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/10 backdrop-blur-sm\">\r\n            <div class=\"flex items-center justify-between mb-4\">\r\n              <div class=\"flex items-center gap-4\">\r\n                <!-- 用户头像 -->\r\n                <div class=\"w-14 h-14 bg-gradient-to-r from-cyan-500/30 to-blue-500/30 rounded-full flex items-center justify-center border border-cyan-400/40 shadow-lg overflow-hidden\">\r\n                  <img v-if=\"review.user_info?.avatar && !review.is_anonymous\" \r\n                       :src=\"review.user_info.avatar\" \r\n                       :alt=\"review.author\"\r\n                       class=\"w-full h-full object-cover\">\r\n                  <i v-else class=\"bi bi-person-fill text-cyan-400 text-xl\"></i>\r\n                </div>\r\n                <div>\r\n                  <div class=\"flex items-center gap-2\">\r\n                    <!-- 显示用户名或匿名 -->\r\n                    <div class=\"font-bold text-white text-lg\">\r\n                      {{ review.is_anonymous ? '匿名用户' : (review.user_info?.nickname || review.author) }}\r\n                    </div>\r\n                    <!-- 匿名标识 -->\r\n                    <span v-if=\"review.is_anonymous\" \r\n                          class=\"px-2 py-1 bg-gray-500/20 text-gray-300 text-xs rounded-full border border-gray-400/30\">\r\n                      <i class=\"bi bi-incognito mr-1\"></i>\r\n                      匿名\r\n                    </span>\r\n                    <!-- 已验证购买标识 -->\r\n                    <span v-if=\"review.verified_purchase\" \r\n                          class=\"px-2 py-1 bg-green-500/20 text-green-300 text-xs rounded-full border border-green-400/30\">\r\n                      <i class=\"bi bi-check-circle mr-1\"></i>\r\n                      已购买\r\n                    </span>\r\n\r\n                  </div>\r\n                  <div class=\"text-sm text-gray-400\">{{ formatDate(review.created_at) }}</div>\r\n                </div>\r\n              </div>\r\n              <div class=\"flex gap-1\">\r\n                <i v-for=\"i in 5\" :key=\"i\" \r\n                   :class=\"i <= review.rating ? 'text-yellow-400' : 'text-gray-600'\"\r\n                   class=\"bi bi-star-fill text-lg drop-shadow-lg\"></i>\r\n              </div>\r\n            </div>\r\n            <p class=\"text-gray-300 leading-relaxed text-lg mb-4\">{{ review.comment }}</p>\r\n            \r\n            <!-- 评论图片 -->\r\n            <div v-if=\"review.images && review.images.length > 0\" class=\"grid grid-cols-3 gap-2 mb-4\">\r\n              <img v-for=\"(image, index) in review.images\" :key=\"index\"\r\n                   :src=\"image\" :alt=\"`评论图片${index + 1}`\"\r\n                   class=\"w-full h-20 object-cover rounded-lg border border-gray-600/30\">\r\n            </div>\r\n            \r\n            <!-- 点赞功能 -->\r\n            <div class=\"flex items-center justify-between pt-4 border-t border-gray-700/50\">\r\n              <span class=\"text-gray-400 text-sm\">这条评论有帮助吗？</span>\r\n              <div class=\"flex items-center gap-4\">\r\n                <button @click=\"toggleReviewHelpful(review.id, true)\"\r\n                        class=\"flex items-center gap-2 px-3 py-1 text-gray-400 hover:text-green-400 transition-colors duration-200\">\r\n                  <i class=\"bi bi-hand-thumbs-up\"></i>\r\n                  <span>有帮助 ({{ review.helpful_count || 0 }})</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- 无评论状态 -->\r\n        <div v-else-if=\"!isLoadingReviews && reviews.length === 0\" class=\"text-center py-12\">\r\n          <div class=\"text-4xl text-gray-400 mb-4\">\r\n            <i class=\"bi bi-chat-dots\"></i>\r\n          </div>\r\n          <h3 class=\"text-xl font-semibold text-white mb-2\">暂无评论</h3>\r\n          <p class=\"text-gray-400 mb-6\">成为第一个评价此产品的用户</p>\r\n        </div>\r\n        \r\n                 <!-- 评论加载中 -->\r\n         <div v-else-if=\"isLoadingReviews\" class=\"text-center py-8\">\r\n           <div class=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n           <p class=\"text-gray-300\">正在加载评论...</p>\r\n         </div>\r\n         \r\n         <!-- 评论分页 -->\r\n         <div v-if=\"!isLoadingReviews && reviews.length > 0\" class=\"mt-8 flex justify-center\">\r\n           <div class=\"flex items-center gap-2\">\r\n             <button \r\n               @click=\"goToPage(currentPage - 1)\" \r\n               :disabled=\"currentPage <= 1\"\r\n               class=\"px-4 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white hover:bg-gray-700/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\">\r\n               <i class=\"bi bi-chevron-left\"></i>\r\n               上一页\r\n             </button>\r\n             \r\n             <span class=\"px-4 py-2 text-gray-300\">\r\n               第 {{ currentPage }} 页 / 共 {{ totalPages }} 页\r\n             </span>\r\n             \r\n             <button \r\n               @click=\"goToPage(currentPage + 1)\" \r\n               :disabled=\"currentPage >= totalPages\"\r\n               class=\"px-4 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white hover:bg-gray-700/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\">\r\n               下一页\r\n               <i class=\"bi bi-chevron-right\"></i>\r\n             </button>\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n\r\n    <!-- 错误状态 - 深色主题 -->\r\n    <div v-else-if=\"error && !loading\" class=\"container mx-auto px-6 py-20 relative z-10\">\r\n      <div class=\"text-center\">\r\n        <div class=\"inline-flex flex-col items-center glass-card-enhanced rounded-2xl border border-red-400/40 p-16 shadow-2xl shadow-red-500/25 backdrop-blur-xl max-w-md mx-auto\">\r\n          <div class=\"text-8xl text-red-400 mb-8\">\r\n            <i class=\"bi bi-exclamation-triangle-fill\"></i>\r\n          </div>\r\n          <h3 class=\"text-3xl font-bold text-white mb-4\">加载失败</h3>\r\n          <p class=\"text-gray-400 text-lg mb-8\">{{ error }}</p>\r\n          <div class=\"space-y-3 w-full\">\r\n            <button @click=\"loadProductDetail\" \r\n                    class=\"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-300 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40\">\r\n              <i class=\"bi bi-arrow-clockwise mr-2\"></i>\r\n              重新加载\r\n            </button>\r\n            <button @click=\"$router.go(-1)\" \r\n                    class=\"w-full border border-gray-600/50 hover:border-cyan-400/50 text-gray-300 hover:text-white hover:bg-cyan-500/10 py-3 px-6 rounded-xl font-semibold transition-all duration-300 backdrop-blur-sm\">\r\n              返回上页\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 加载状态 - 增强版 -->\r\n    <div v-else-if=\"loading\" class=\"container mx-auto px-6 py-20 relative z-10\">\r\n      <div class=\"text-center\">\r\n        <div class=\"inline-flex flex-col items-center glass-card-enhanced rounded-2xl border border-cyan-400/40 p-16 shadow-2xl shadow-cyan-500/25 backdrop-blur-xl\">\r\n          <div class=\"relative mb-8\">\r\n            <div class=\"w-20 h-20 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin\"></div>\r\n            <div class=\"absolute inset-0 w-20 h-20 border-4 border-blue-500/30 rounded-full animate-pulse\"></div>\r\n          </div>\r\n          <p class=\"text-3xl font-bold text-white mb-4\">正在加载产品详情...</p>\r\n          <p class=\"text-gray-400 text-lg\">请稍候，正在为您获取最新信息</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 购买成功提示 - 增强版 -->\r\n    <div v-if=\"showSuccessMessage\" class=\"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 p-4\">\r\n      <!-- 撒花动画背景 -->\r\n      <div class=\"confetti-container\">\r\n        <!-- 持续生成撒花 -->\r\n        <div v-for=\"batch in confettiBatches\" :key=\"batch.id\">\r\n          <div v-for=\"i in 30\" :key=\"`${batch.id}-${i}`\" \r\n               class=\"confetti-piece\"\r\n               :class=\"getConfettiShape(i)\"\r\n               :style=\"{\r\n                 left: Math.random() * 100 + '%',\r\n                 animationDelay: (Math.random() * 2 + batch.delay) + 's',\r\n                 animationDuration: '3s',\r\n                 backgroundColor: getConfettiColor(i + batch.id * 30),\r\n                 width: (8 + Math.random() * 6) + 'px',\r\n                 height: (8 + Math.random() * 6) + 'px'\r\n               }\"></div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"glass-card-enhanced rounded-2xl border border-green-400/50 shadow-2xl shadow-green-500/30 p-10 max-w-md w-full text-center backdrop-blur-xl transform animate-bounce-in\">\r\n        <div class=\"text-8xl text-green-400 mb-8 relative\">\r\n          <i class=\"bi bi-check-circle-fill drop-shadow-2xl animate-check-bounce\"></i>\r\n          <div class=\"absolute inset-0 text-green-400/30 animate-ping-once\">\r\n            <i class=\"bi bi-check-circle-fill\"></i>\r\n          </div>\r\n        </div>\r\n        <h3 class=\"text-3xl font-bold text-white mb-6\">已加入购物车！</h3>\r\n        <p class=\"text-gray-300 mb-8 text-lg leading-relaxed\">{{ product?.name }} 已成功添加到购物车。</p>\r\n        <div class=\"space-y-4\">\r\n          <button @click=\"goToCheckout\" \r\n                  class=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white py-3 px-6 rounded-xl font-bold text-lg transition-all duration-300 shadow-lg shadow-green-500/30 hover:shadow-green-500/50 transform hover:scale-105\">\r\n            立即去结算\r\n          </button>\r\n          <button @click=\"hideSuccessMessage\" \r\n                  class=\"w-full border border-gray-600/50 hover:border-green-400/50 text-gray-300 hover:text-white hover:bg-green-500/10 py-3 px-6 rounded-xl font-bold text-lg transition-all duration-300 backdrop-blur-sm\">\r\n            继续购物\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// 导入路由参数\r\nconst route = useRoute()\r\nconst productId = parseInt(route.params.id)\r\n\r\n// 导入API和stores\r\nimport { productsApi } from '~/utils/api'\r\nimport { cartApi } from '~/utils/api/cart'\r\nimport { reviewsApi } from '~/utils/api/reviews'\r\nimport { useUserStore } from '~/stores/user'\r\nimport { createDiscreteApi } from 'naive-ui'\r\nimport ReviewForm from '~/components/ReviewForm.vue'\r\n\r\n// 使用stores\r\nconst userStore = useUserStore()\r\n\r\n// 创建消息API\r\nconst { message } = createDiscreteApi(['message'])\r\n\r\n// 响应式数据\r\nconst product = ref(null)\r\nconst quantity = ref(1)\r\nconst isFavorite = ref(false)\r\nconst showSuccessMessage = ref(false)\r\nconst loading = ref(true)\r\nconst error = ref(null)\r\nconst isAddingToCart = ref(false)\r\n\r\n// 评论相关数据\r\nconst reviews = ref([])\r\nconst reviewStats = ref(null)\r\nconst isLoadingReviews = ref(false)\r\nconst currentPage = ref(1)\r\nconst totalPages = ref(1)\r\nconst pageSize = 5 // 每页显示5条评论\r\nconst reviewFilters = ref({\r\n  rating: 'all',\r\n  sort: 'newest'\r\n})\r\n\r\n// 撒花批次管理\r\nconst confettiBatches = ref([])\r\nlet confettiInterval = null\r\n\r\n// 获取产品类别\r\nconst getProductCategory = (category) => {\r\n  const categories = {\r\n    graphics: '显卡',\r\n    cpu: '处理器',\r\n    motherboard: '主板',\r\n    power: '电源',\r\n    memory: '内存',\r\n    storage: '存储',\r\n    monitor: '显示器',\r\n    case: '机箱',\r\n    cooler: '散热器'\r\n  }\r\n  return categories[category] || '硬件'\r\n}\r\n\r\n// 加载评论数据\r\nconst loadReviews = async () => {\r\n  if (!product.value) return\r\n  \r\n  try {\r\n    isLoadingReviews.value = true\r\n    \r\n    // 获取评论列表\r\n    const reviewsResponse = await reviewsApi.getProductReviews(product.value.id, {\r\n      page: currentPage.value,\r\n      limit: pageSize,\r\n      rating: reviewFilters.value.rating === 'all' ? undefined : parseInt(reviewFilters.value.rating),\r\n      sort: reviewFilters.value.sort\r\n    })\r\n    \r\n    if (reviewsResponse.success) {\r\n      reviews.value = reviewsResponse.data.reviews\r\n      // 更新分页信息\r\n      totalPages.value = reviewsResponse.data.pagination.total_pages\r\n    }\r\n    \r\n    // 获取评论统计\r\n    const statsResponse = await reviewsApi.getProductReviewStats(product.value.id)\r\n    if (statsResponse.success) {\r\n      reviewStats.value = statsResponse.data\r\n    }\r\n  } catch (err) {\r\n    console.error('加载评论失败:', err)\r\n  } finally {\r\n    isLoadingReviews.value = false\r\n  }\r\n}\r\n\r\n// 分页导航\r\nconst goToPage = async (page) => {\r\n  if (page < 1 || page > totalPages.value || page === currentPage.value) return\r\n  \r\n  currentPage.value = page\r\n  await loadReviews()\r\n}\r\n\r\n// 获取产品详情\r\nconst loadProductDetail = async () => {\r\n  try {\r\n    loading.value = true\r\n    error.value = null\r\n    \r\n    const response = await productsApi.getProductById(productId)\r\n    \r\n    if (response.success && response.data) {\r\n      const apiProduct = response.data\r\n      \r\n      // 转换API数据格式为页面所需格式\r\n      product.value = {\r\n        id: apiProduct.id,\r\n        name: apiProduct.name,\r\n        brand: apiProduct.brand,\r\n        category: getCategoryFromId(apiProduct.category_id),\r\n        price: parseFloat(apiProduct.price),\r\n        originalPrice: apiProduct.original_price ? parseFloat(apiProduct.original_price) : null,\r\n        rating: parseFloat(apiProduct.rating),\r\n        reviewCount: parseInt(apiProduct.review_count),\r\n        viewCount: apiProduct.sales * 12 + Math.floor(Math.random() * 1000), // 模拟浏览量\r\n        image: apiProduct.images && apiProduct.images.length > 0 ? apiProduct.images[0] : '',\r\n        images: apiProduct.images || [],\r\n        inStock: apiProduct.stock > 0,\r\n        stockCount: apiProduct.stock,\r\n        description: apiProduct.description || apiProduct.short_description,\r\n        specs: apiProduct.specifications || {},\r\n        features: apiProduct.features || [],\r\n        tags: apiProduct.tags || [],\r\n        sales: apiProduct.sales,\r\n        slug: apiProduct.slug,\r\n        sku: apiProduct.sku,\r\n        model: apiProduct.model\r\n      }\r\n      \r\n      // 检查收藏状态\r\n      checkFavoriteStatus()\r\n      \r\n      // 加载评论数据\r\n      await loadReviews()\r\n    } else {\r\n      error.value = '产品不存在或已下架'\r\n    }\r\n  } catch (err) {\r\n    console.error('获取产品详情失败:', err)\r\n    error.value = '加载产品详情时出错，请稍后重试'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 根据分类ID获取分类名称\r\nconst getCategoryFromId = (categoryId) => {\r\n  const categoryMap = {\r\n    1: 'cpu',\r\n    2: 'motherboard',\r\n    3: 'memory',\r\n    4: 'graphics',\r\n    5: 'storage',\r\n    6: 'power',\r\n    7: 'case',\r\n    8: 'cooler',\r\n    9: 'monitor'\r\n  }\r\n  return categoryMap[categoryId] || 'hardware'\r\n}\r\n\r\n// 评论点赞功能\r\nconst toggleReviewHelpful = async (reviewId, helpful) => {\r\n  if (!userStore.isLoggedIn) {\r\n    message.warning('请先登录后再进行操作')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    const response = await reviewsApi.toggleReviewHelpful(reviewId, helpful)\r\n    if (response.success) {\r\n      // 更新本地数据\r\n      const review = reviews.value.find(r => r.id === reviewId)\r\n      if (review) {\r\n        review.helpful_count += helpful ? 1 : -1\r\n        review.helpful_count = Math.max(0, review.helpful_count)\r\n      }\r\n      message.success(helpful ? '点赞成功' : '取消点赞成功')\r\n    }\r\n  } catch (err) {\r\n    console.error('点赞操作失败:', err)\r\n    message.error('操作失败，请重试')\r\n  }\r\n}\r\n\r\n// 处理评论提交\r\nconst handleReviewSubmitted = () => {\r\n  // 重置到第一页并重新加载评论数据\r\n  currentPage.value = 1\r\n  loadReviews()\r\n  \r\n  // 显示成功消息\r\n  message.success('感谢您的评价！评论已发布')\r\n}\r\n\r\n// 处理筛选器变化\r\nconst handleFilterChange = async () => {\r\n  // 重置到第一页\r\n  currentPage.value = 1\r\n  await loadReviews()\r\n}\r\n\r\n// 检查收藏状态\r\nconst checkFavoriteStatus = () => {\r\n  const favorites = JSON.parse(localStorage.getItem('favorites') || '[]')\r\n  isFavorite.value = favorites.includes(productId)\r\n}\r\n\r\n// 方法\r\nconst increaseQuantity = () => {\r\n  if (quantity.value < product.value?.stockCount) {\r\n    quantity.value++\r\n  }\r\n}\r\n\r\nconst decreaseQuantity = () => {\r\n  if (quantity.value > 1) {\r\n    quantity.value--\r\n  }\r\n}\r\n\r\nconst toggleFavorite = () => {\r\n  const favorites = JSON.parse(localStorage.getItem('favorites') || '[]')\r\n  if (isFavorite.value) {\r\n    const index = favorites.indexOf(productId)\r\n    if (index > -1) favorites.splice(index, 1)\r\n  } else {\r\n    favorites.push(productId)\r\n  }\r\n  localStorage.setItem('favorites', JSON.stringify(favorites))\r\n  isFavorite.value = !isFavorite.value\r\n}\r\n\r\n// 添加到购物车\r\nconst addToCart = async () => {\r\n  if (!product.value || !product.value.inStock || showSuccessMessage.value || isAddingToCart.value) return\r\n  \r\n  // 检查用户登录状态\r\n  if (!userStore.isLoggedIn) {\r\n    // 未登录用户跳转到登录页面\r\n    navigateTo('/auth/login')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    isAddingToCart.value = true\r\n    \r\n    const cartData = {\r\n      productId: product.value.id,\r\n      quantity: quantity.value\r\n    }\r\n    \r\n    const response = await cartApi.addToCart(cartData)\r\n    \r\n    if (response.success) {\r\n      showSuccessMessage.value = true\r\n      playSuccessSound()\r\n      \r\n      // 显示成功消息\r\n      console.log('商品已成功添加到购物车')\r\n    } else {\r\n      throw new Error(response.message || '添加到购物车失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('添加到购物车失败:', err)\r\n    \r\n    // 显示错误消息\r\n    if (err.message) {\r\n      message.error('添加失败：' + err.message)\r\n    } else {\r\n      message.error('添加到购物车失败，请重试')\r\n    }\r\n  } finally {\r\n    isAddingToCart.value = false\r\n  }\r\n}\r\n\r\nconst buyNow = async () => {\r\n  // 检查用户登录状态\r\n  if (!userStore.isLoggedIn) {\r\n    navigateTo('/auth/login')\r\n    return\r\n  }\r\n  \r\n  if (!product.value || !product.value.inStock) return\r\n  \r\n  try {\r\n    // 直接添加到购物车并跳转到结算页面\r\n    const cartData = {\r\n      productId: product.value.id,\r\n      quantity: quantity.value\r\n    }\r\n    \r\n    const response = await cartApi.addToCart(cartData)\r\n    \r\n    if (response.success) {\r\n      message.success('商品已添加到购物车，正在跳转到结算页面...')\r\n      // 延迟跳转，让用户看到成功消息\r\n      setTimeout(() => {\r\n        navigateTo('/checkout')\r\n      }, 1000)\r\n    } else {\r\n      throw new Error(response.message || '添加到购物车失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('立即购买失败:', err)\r\n    message.error('购买失败：' + (err.message || '请重试'))\r\n  }\r\n}\r\n\r\nconst goToCheckout = () => {\r\n  navigateTo('/checkout')\r\n}\r\n\r\n// 隐藏成功消息\r\nconst hideSuccessMessage = () => {\r\n  showSuccessMessage.value = false\r\n}\r\n\r\n// 播放成功音效（可选）\r\nconst playSuccessSound = () => {\r\n  try {\r\n    // 创建Web Audio API音效\r\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)()\r\n    const oscillator = audioContext.createOscillator()\r\n    const gainNode = audioContext.createGain()\r\n    \r\n    oscillator.connect(gainNode)\r\n    gainNode.connect(audioContext.destination)\r\n    \r\n    oscillator.frequency.setValueAtTime(800, audioContext.currentTime)\r\n    oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.1)\r\n    oscillator.frequency.setValueAtTime(1200, audioContext.currentTime + 0.2)\r\n    \r\n    gainNode.gain.setValueAtTime(0, audioContext.currentTime)\r\n    gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.01)\r\n    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3)\r\n    \r\n    oscillator.start(audioContext.currentTime)\r\n    oscillator.stop(audioContext.currentTime + 0.3)\r\n  } catch (error) {\r\n    // 音效播放失败时静默处理\r\n    console.log('音效播放不支持或被禁用')\r\n  }\r\n}\r\n\r\n// 监听成功消息状态，管理撒花动画\r\nwatch(showSuccessMessage, (newValue) => {\r\n  if (newValue) {\r\n    // 开始撒花动画\r\n    startConfettiAnimation()\r\n    \r\n    // 撒花动画3秒后自动停止，但弹窗保持显示\r\n    setTimeout(() => {\r\n      stopConfettiAnimation()\r\n    }, 3000)\r\n  } else {\r\n    // 停止撒花动画\r\n    stopConfettiAnimation()\r\n  }\r\n})\r\n\r\n// 开始撒花动画\r\nconst startConfettiAnimation = () => {\r\n  confettiBatches.value = []\r\n  let batchId = 0\r\n  \r\n  // 立即生成第一批撒花\r\n  confettiBatches.value.push({\r\n    id: batchId++,\r\n    delay: 0\r\n  })\r\n  \r\n  // 每0.5秒生成新的撒花批次，让动画更连续\r\n  confettiInterval = setInterval(() => {\r\n    confettiBatches.value.push({\r\n      id: batchId++,\r\n      delay: 0\r\n    })\r\n    \r\n    // 保持最多6个批次，移除旧的批次\r\n    if (confettiBatches.value.length > 6) {\r\n      confettiBatches.value.shift()\r\n    }\r\n  }, 500)\r\n}\r\n\r\n// 停止撒花动画\r\nconst stopConfettiAnimation = () => {\r\n  if (confettiInterval) {\r\n    clearInterval(confettiInterval)\r\n    confettiInterval = null\r\n  }\r\n  confettiBatches.value = []\r\n}\r\n\r\n// 获取撒花颜色\r\nconst getConfettiColor = (index) => {\r\n  const colors = ['#00f5ff', '#0080ff', '#a855f7', '#10b981', '#f59e0b', '#ef4444', '#ec4899', '#8b5cf6']\r\n  return colors[index % colors.length]\r\n}\r\n\r\n// 获取撒花形状\r\nconst getConfettiShape = (index) => {\r\n  const shapes = ['confetti-circle', 'confetti-square', 'confetti-triangle']\r\n  return shapes[index % shapes.length]\r\n}\r\n\r\nconst translateSpecKey = (key) => {\r\n  const translations = {\r\n    'TDP': 'TDP功耗',\r\n    '制程': '制程工艺', \r\n    '插槽': '接口插槽',\r\n    '缓存': '缓存',\r\n    'L2缓存': 'L2缓存',\r\n    'L3缓存': 'L3缓存',\r\n    '核心数': '核心数',\r\n    '线程数': '线程数',\r\n    '内存支持': '支持内存',\r\n    '基础频率': '基础频率',\r\n    '最大睿频': '最大睿频',\r\n    '最大加速频率': '最大加速',\r\n    '功耗': '功耗',\r\n    '接口': '显示接口',\r\n    '显存': '显存容量',\r\n    '架构': '架构',\r\n    'CUDA核心': 'CUDA核心',\r\n    '加速频率': '加速频率',\r\n    '显存位宽': '显存位宽',\r\n    '流处理器': '流处理器',\r\n    '游戏频率': '游戏频率',\r\n    '容量': '容量',\r\n    '散热': '散热方案',\r\n    '时序': '时序',\r\n    '电压': '工作电压',\r\n    '质保': '质保期',\r\n    '频率': '工作频率',\r\n    '兼容性': '平台兼容'\r\n  }\r\n  return translations[key] || key\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('zh-CN', { \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric' \r\n  })\r\n}\r\n\r\n// 页面加载时获取产品详情\r\nonMounted(() => {\r\n  loadProductDetail()\r\n})\r\n\r\n// 页面卸载时清理定时器\r\nonUnmounted(() => {\r\n  stopConfettiAnimation()\r\n})\r\n\r\n// 监听路由变化\r\nwatch(() => route.params.id, () => {\r\n  const newProductId = parseInt(route.params.id)\r\n  if (newProductId !== productId) {\r\n    loadProductDetail()\r\n  }\r\n})\r\n\r\n// 页面元数据\r\nuseHead({\r\n  title: computed(() => product.value ? `${product.value.name} - xlCig` : '产品详情 - xlCig'),\r\n  meta: [\r\n    { name: 'description', content: computed(() => product.value?.description || '查看产品详细信息和技术规格') }\r\n  ]\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* 产品图片容器 */\r\n.product-image-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* 深色主题产品Placeholder样式 */\r\n.product-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 2rem;\r\n  background: linear-gradient(135deg, \r\n    rgba(0, 245, 255, 0.15) 0%, \r\n    rgba(0, 128, 255, 0.15) 50%, \r\n    rgba(168, 85, 247, 0.15) 100%);\r\n  padding: 2rem;\r\n  text-align: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 产品图标包装器 */\r\n.product-icon-wrapper {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* 产品图标 */\r\n.product-icon {\r\n  font-size: 5rem;\r\n  text-shadow: 0 0 30px currentColor;\r\n  animation: hardwareIconPulse 4s ease-in-out infinite;\r\n  position: relative;\r\n  z-index: 3;\r\n}\r\n\r\n/* 产品图标光晕效果 */\r\n.product-icon-glow {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 150px;\r\n  height: 150px;\r\n  background: radial-gradient(circle, currentColor 0%, transparent 70%);\r\n  opacity: 0.4;\r\n  border-radius: 50%;\r\n  animation: iconGlowPulse 4s ease-in-out infinite;\r\n  z-index: 1;\r\n}\r\n\r\n/* 科技图案背景 */\r\n.product-tech-pattern {\r\n  position: absolute;\r\n  inset: 0;\r\n  background-image: \r\n    radial-gradient(circle at 25% 25%, rgba(0, 245, 255, 0.15) 0%, transparent 50%),\r\n    radial-gradient(circle at 75% 75%, rgba(168, 85, 247, 0.15) 0%, transparent 50%),\r\n    linear-gradient(45deg, transparent 40%, rgba(0, 245, 255, 0.08) 50%, transparent 60%),\r\n    linear-gradient(-45deg, transparent 40%, rgba(168, 85, 247, 0.08) 50%, transparent 60%);\r\n  animation: techPatternMove 12s linear infinite;\r\n  z-index: 0;\r\n}\r\n\r\n.product-placeholder-text {\r\n  font-size: 1.5rem;\r\n  font-weight: 800;\r\n  color: #ffffff;\r\n  text-shadow: 0 0 20px rgba(0, 245, 255, 0.8);\r\n  letter-spacing: 0.05em;\r\n  opacity: 0.95;\r\n  position: relative;\r\n  z-index: 3;\r\n  text-align: center;\r\n  line-height: 1.4;\r\n  max-width: 85%;\r\n}\r\n\r\n/* 硬件图标动画 */\r\n@keyframes hardwareIconPulse {\r\n  0%, 100% {\r\n    transform: scale(1) rotate(0deg);\r\n    filter: drop-shadow(0 0 25px currentColor);\r\n  }\r\n  25% {\r\n    transform: scale(1.08) rotate(2deg);\r\n    filter: drop-shadow(0 0 35px currentColor);\r\n  }\r\n  50% {\r\n    transform: scale(1.15) rotate(0deg);\r\n    filter: drop-shadow(0 0 30px currentColor);\r\n  }\r\n  75% {\r\n    transform: scale(1.08) rotate(-2deg);\r\n    filter: drop-shadow(0 0 35px currentColor);\r\n  }\r\n}\r\n\r\n/* 图标光晕动画 */\r\n@keyframes iconGlowPulse {\r\n  0%, 100% {\r\n    transform: translate(-50%, -50%) scale(1);\r\n    opacity: 0.3;\r\n  }\r\n  50% {\r\n    transform: translate(-50%, -50%) scale(1.3);\r\n    opacity: 0.5;\r\n  }\r\n}\r\n\r\n/* 科技图案移动动画 */\r\n@keyframes techPatternMove {\r\n  0% {\r\n    background-position: 0% 0%, 0% 0%, 0% 0%, 0% 0%;\r\n  }\r\n  25% {\r\n    background-position: 25% 25%, -25% -25%, 25% 25%, -25% -25%;\r\n  }\r\n  50% {\r\n    background-position: 50% 50%, -50% -50%, 50% 50%, -50% -50%;\r\n  }\r\n  75% {\r\n    background-position: 75% 75%, -75% -75%, 75% 75%, -75% -75%;\r\n  }\r\n  100% {\r\n    background-position: 100% 100%, -100% -100%, 100% 100%, -100% -100%;\r\n  }\r\n}\r\n\r\n/* 玻璃卡片增强效果 */\r\n.glass-card-enhanced {\r\n  background: rgba(17, 24, 39, 0.7);\r\n  backdrop-filter: blur(25px);\r\n  border: 1px solid rgba(59, 130, 246, 0.3);\r\n  box-shadow: \r\n    0 10px 40px rgba(0, 0, 0, 0.4),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.12);\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.glass-card-enhanced:hover {\r\n  background: rgba(17, 24, 39, 0.8);\r\n  border-color: rgba(59, 130, 246, 0.5);\r\n  box-shadow: \r\n    0 15px 50px rgba(0, 0, 0, 0.5),\r\n    0 0 25px rgba(59, 130, 246, 0.15),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.18);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* 渐变文字效果 */\r\n.gradient-text {\r\n  background: linear-gradient(135deg, #00f5ff 0%, #0080ff 50%, #a855f7 100%);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  background-clip: text;\r\n  animation: gradientShift 3s ease-in-out infinite;\r\n}\r\n\r\n@keyframes gradientShift {\r\n  0%, 100% {\r\n    background-position: 0% 50%;\r\n  }\r\n  50% {\r\n    background-position: 100% 50%;\r\n  }\r\n}\r\n\r\n/* 按钮悬停光效 */\r\n.btn-shine {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.btn-shine::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: -100%;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);\r\n  transition: left 0.6s;\r\n  z-index: 1;\r\n}\r\n\r\n.btn-shine:hover::before {\r\n  left: 100%;\r\n}\r\n\r\n/* 慢速旋转动画 */\r\n@keyframes spin-slow {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.animate-spin-slow {\r\n  animation: spin-slow 20s linear infinite;\r\n}\r\n\r\n/* 自定义滚动条 */\r\n::-webkit-scrollbar {\r\n  width: 10px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n  background: rgba(17, 24, 39, 0.9);\r\n  border-radius: 5px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background: linear-gradient(135deg, #00f5ff, #0080ff);\r\n  border-radius: 5px;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: linear-gradient(135deg, #0080ff, #a855f7);\r\n}\r\n\r\n/* 特殊光效 */\r\n.hover-glow {\r\n  transition: all 0.4s ease;\r\n}\r\n\r\n.hover-glow:hover {\r\n  box-shadow: \r\n    0 0 25px rgba(59, 130, 246, 0.5),\r\n    0 0 50px rgba(59, 130, 246, 0.3),\r\n    0 0 75px rgba(59, 130, 246, 0.15);\r\n  border-color: rgba(59, 130, 246, 0.6);\r\n}\r\n\r\n/* 脉冲动画 */\r\n@keyframes pulse-soft {\r\n  0%, 100% {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    opacity: 0.8;\r\n    transform: scale(1.02);\r\n  }\r\n}\r\n\r\n.animate-pulse-soft {\r\n  animation: pulse-soft 2s ease-in-out infinite;\r\n}\r\n\r\n/* 文字选择样式 */\r\n::selection {\r\n  background: rgba(59, 130, 246, 0.4);\r\n  color: white;\r\n}\r\n\r\n::-moz-selection {\r\n  background: rgba(59, 130, 246, 0.4);\r\n  color: white;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .product-icon {\r\n    font-size: 4rem;\r\n  }\r\n  \r\n  .product-icon-glow {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n  \r\n  .product-placeholder-text {\r\n    font-size: 1.2rem;\r\n    max-width: 90%;\r\n  }\r\n  \r\n  .glass-card-enhanced {\r\n    backdrop-filter: blur(20px);\r\n  }\r\n}\r\n\r\n@media (max-width: 640px) {\r\n  .product-icon {\r\n    font-size: 3.5rem;\r\n  }\r\n  \r\n  .product-icon-glow {\r\n    width: 100px;\r\n    height: 100px;\r\n  }\r\n  \r\n  .product-placeholder-text {\r\n    font-size: 1rem;\r\n    max-width: 95%;\r\n  }\r\n  \r\n  .glass-card-enhanced {\r\n    backdrop-filter: blur(15px);\r\n  }\r\n}\r\n\r\n/* 加载动画增强 */\r\n.loading-spinner {\r\n  position: relative;\r\n}\r\n\r\n.loading-spinner::after {\r\n  content: '';\r\n  position: absolute;\r\n  inset: -4px;\r\n  border: 2px solid transparent;\r\n  border-top-color: rgba(59, 130, 246, 0.3);\r\n  border-radius: 50%;\r\n  animation: spin 2s linear infinite reverse;\r\n}\r\n\r\n/* 成功提示动画 */\r\n@keyframes bounce-in {\r\n  0% {\r\n    transform: scale(0.3) rotate(-10deg);\r\n    opacity: 0;\r\n  }\r\n  50% {\r\n    transform: scale(1.05) rotate(5deg);\r\n  }\r\n  70% {\r\n    transform: scale(0.9) rotate(-2deg);\r\n  }\r\n  100% {\r\n    transform: scale(1) rotate(0deg);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.animate-bounce-in {\r\n  animation: bounce-in 0.6s ease-out;\r\n}\r\n\r\n/* 评星动画 */\r\n.star-rating {\r\n  display: inline-flex;\r\n  gap: 2px;\r\n}\r\n\r\n.star-rating i {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.star-rating:hover i {\r\n  transform: scale(1.1);\r\n}\r\n\r\n/* 进度条动画 */\r\n.progress-bar {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.progress-bar::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\r\n  animation: progress-shine 2s ease-in-out infinite;\r\n}\r\n\r\n@keyframes progress-shine {\r\n  0% {\r\n    transform: translateX(-100%);\r\n  }\r\n  100% {\r\n    transform: translateX(100%);\r\n  }\r\n}\r\n\r\n/* 撒花动画容器 */\r\n.confetti-container {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n  overflow: hidden;\r\n  z-index: 1000;\r\n}\r\n\r\n/* 撒花片段 */\r\n.confetti-piece {\r\n  position: absolute;\r\n  width: 10px; /* 默认大小，会被内联样式覆盖 */\r\n  height: 10px; /* 默认大小，会被内联样式覆盖 */\r\n  top: -10px;\r\n  animation: confettiFall 3s linear infinite;\r\n  box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);\r\n  will-change: transform, opacity;\r\n}\r\n\r\n/* 撒花形状 */\r\n.confetti-circle {\r\n  border-radius: 50%;\r\n}\r\n\r\n.confetti-square {\r\n  border-radius: 2px;\r\n}\r\n\r\n.confetti-triangle {\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 6px solid transparent;\r\n  border-right: 6px solid transparent;\r\n  border-bottom: 12px solid;\r\n  border-bottom-color: inherit;\r\n  background: transparent !important;\r\n}\r\n\r\n/* 撒花掉落动画 */\r\n@keyframes confettiFall {\r\n  0% {\r\n    transform: translateY(-100vh) rotate(0deg) translateX(0) scale(1);\r\n    opacity: 1;\r\n  }\r\n  10% {\r\n    transform: translateY(-80vh) rotate(90deg) translateX(30px) scale(1.1);\r\n    opacity: 1;\r\n  }\r\n  25% {\r\n    transform: translateY(-50vh) rotate(180deg) translateX(-20px) scale(0.9);\r\n    opacity: 1;\r\n  }\r\n  40% {\r\n    transform: translateY(-20vh) rotate(270deg) translateX(40px) scale(1.05);\r\n    opacity: 0.9;\r\n  }\r\n  60% {\r\n    transform: translateY(20vh) rotate(450deg) translateX(-30px) scale(0.95);\r\n    opacity: 0.8;\r\n  }\r\n  80% {\r\n    transform: translateY(60vh) rotate(630deg) translateX(25px) scale(1);\r\n    opacity: 0.5;\r\n  }\r\n  100% {\r\n    transform: translateY(110vh) rotate(720deg) translateX(0) scale(0.8);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n/* 一次性弹跳动画 */\r\n@keyframes bounce-in {\r\n  0% {\r\n    transform: scale(0.3) rotate(-5deg);\r\n    opacity: 0;\r\n  }\r\n  50% {\r\n    transform: scale(1.05) rotate(2deg);\r\n  }\r\n  70% {\r\n    transform: scale(0.95) rotate(-1deg);\r\n  }\r\n  100% {\r\n    transform: scale(1) rotate(0deg);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.animate-bounce-in {\r\n  animation: bounce-in 0.6s ease-out forwards;\r\n}\r\n\r\n/* 检查图标弹跳动画 */\r\n@keyframes check-bounce {\r\n  0% {\r\n    transform: scale(0.8);\r\n  }\r\n  50% {\r\n    transform: scale(1.2);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.animate-check-bounce {\r\n  animation: check-bounce 0.6s ease-out;\r\n}\r\n\r\n/* 一次性ping动画 */\r\n@keyframes ping-once {\r\n  0% {\r\n    transform: scale(1);\r\n    opacity: 1;\r\n  }\r\n  75%, 100% {\r\n    transform: scale(2);\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.animate-ping-once {\r\n  animation: ping-once 1s cubic-bezier(0, 0, 0.2, 1) once;\r\n}\r\n</style> "],"version":3}