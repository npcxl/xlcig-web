{"version":3,"file":"checkout-qfZw1bZw.js","sources":["../../../../pages/checkout.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden\">\r\n\r\n    <div class=\"fixed inset-0 pointer-events-none\">\r\n      <div class=\"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse\"></div>\r\n      <div class=\"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000\"></div>\r\n      <div class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow\"></div>\r\n    </div>\r\n\r\n    <!-- 页面加载中 -->\r\n    <LoadingScreen v-if=\"isLoadingCart && !cartItems.length\" />\r\n\r\n    <AppHeader \r\n      :show-back-button=\"false\"\r\n      :show-nav-menu=\"false\"\r\n      :show-breadcrumb=\"true\"\r\n      :show-location=\"false\"\r\n      :show-search-button=\"false\"\r\n      :show-notification-button=\"false\"\r\n      :show-decorations=\"false\"\r\n      logo-size=\"medium\"\r\n      current-page-title=\"购物车结算\"\r\n    />\r\n\r\n    <!-- 主要内容 -->\r\n    <div class=\"container mx-auto px-6 py-8 relative z-10\">\r\n      <div class=\"grid lg:grid-cols-3 gap-8\">\r\n        <!-- 左侧：购物车和表单 -->\r\n        <div class=\"lg:col-span-2 space-y-8\">\r\n          <!-- 购物车商品 -->\r\n          <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-cart text-cyan-400\"></i>\r\n                购物车\r\n              </h2>\r\n              <p class=\"text-gray-300 mt-2\">购物车中有 {{ cartItems.length }} 件商品</p>\r\n            </div>\r\n            \r\n            <div class=\"p-8\">\r\n              <!-- 购物车加载中 -->\r\n              <div v-if=\"isLoadingCart\" class=\"text-center py-12\">\r\n                <div class=\"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n                <p class=\"text-gray-300\">正在加载购物车...</p>\r\n              </div>\r\n\r\n              <!-- 购物车为空 -->\r\n              <div v-else-if=\"cartItems.length === 0\" class=\"text-center py-12\">\r\n                <div class=\"text-6xl mb-4 text-gray-500\">\r\n                  <i class=\"bi bi-cart-x\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-semibold text-white mb-2\">购物车为空</h3>\r\n                <p class=\"text-gray-400 mb-6\">添加一些产品来继续购物</p>\r\n                <NuxtLink to=\"/products\" \r\n                          class=\"inline-flex items-center px-6 py-3 bg-cyan-600 text-white font-medium rounded-lg hover:bg-cyan-500 transition-all duration-300\">\r\n                  <i class=\"bi bi-plus-circle mr-2\"></i>\r\n                  添加产品\r\n                </NuxtLink>\r\n              </div>\r\n\r\n              <!-- 购物车商品列表 -->\r\n              <div v-else class=\"space-y-6\">\r\n                <div v-for=\"item in cartItems\" :key=\"item.id\" \r\n                     class=\"flex items-center gap-6 p-6 bg-gray-800/30 rounded-2xl border border-gray-700/30 hover:border-cyan-500/50 transition-colors duration-300\">\r\n                  <!-- 产品图片 -->\r\n                  <div class=\"w-24 h-24 bg-gray-700/50 rounded-lg overflow-hidden\">\r\n                    <img :src=\"item.product_image\" :alt=\"item.product_name\" class=\"w-full h-full object-contain p-2\">\r\n                  </div>\r\n                  \r\n                  <!-- 产品信息 -->\r\n                  <div class=\"flex-1\">\r\n                    <h3 class=\"font-semibold text-white text-lg mb-1\">{{ item.product_name }}</h3>\r\n                    <p class=\"text-gray-400 text-sm mb-2\">{{ item.product_brand }}</p>\r\n                    <div class=\"flex items-center gap-4\">\r\n                      <span class=\"text-2xl font-bold text-cyan-400\">¥{{ item.product_price.toLocaleString() }}</span>\r\n                      <span v-if=\"item.product_original_price && item.product_original_price > item.product_price\" \r\n                            class=\"text-sm text-gray-500 line-through\">\r\n                        ¥{{ item.product_original_price.toLocaleString() }}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <!-- 数量控制 -->\r\n                  <div class=\"flex items-center gap-3\">\r\n                    <button @click=\"decreaseQuantity(item.id)\" \r\n                            class=\"w-10 h-10 flex items-center justify-center bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors duration-200\">\r\n                      <i class=\"bi bi-dash\"></i>\r\n                    </button>\r\n                    <span class=\"w-12 text-center text-white font-semibold text-lg\">{{ item.quantity }}</span>\r\n                    <button @click=\"increaseQuantity(item.id)\" \r\n                            class=\"w-10 h-10 flex items-center justify-center bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors duration-200\">\r\n                      <i class=\"bi bi-plus\"></i>\r\n                    </button>\r\n                  </div>\r\n\r\n                  <!-- 删除按钮 -->\r\n                  <button @click=\"removeFromCart(item.id)\" \r\n                          class=\"w-10 h-10 flex items-center justify-center bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors duration-200\">\r\n                    <i class=\"bi bi-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 收货地址 -->\r\n          <div v-if=\"cartItems.length > 0\" class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-geo-alt text-cyan-400\"></i>\r\n                收货地址\r\n              </h2>\r\n            </div>\r\n            \r\n            <div class=\"p-8\">\r\n              <!-- 登录用户的地址管理 -->\r\n              <div v-if=\"userStore.isLoggedIn\">\r\n                <!-- 地址加载中 -->\r\n                <div v-if=\"addressStore.isLoading\" class=\"text-center py-8\">\r\n                  <div class=\"w-8 h-8 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n                  <p class=\"text-gray-300\">正在加载地址信息...</p>\r\n                </div>\r\n\r\n                <!-- 用户有地址时显示地址选择 -->\r\n                <div v-else-if=\"addressStore.hasAddresses\" class=\"space-y-6\">\r\n                  <!-- 地址列表 -->\r\n                  <div class=\"space-y-4\">\r\n                    <div v-for=\"address in addressStore.addresses\" :key=\"address.id\" \r\n                         class=\"border-2 rounded-xl p-6 transition-all duration-300 cursor-pointer\"\r\n                         :class=\"selectedAddressId === address.id \r\n                           ? 'border-cyan-500 bg-cyan-500/10' \r\n                           : 'border-gray-600/50 hover:border-cyan-500/50'\"\r\n                         @click=\"selectAddress(address.id)\">\r\n                      <div class=\"flex items-start justify-between\">\r\n                        <div class=\"flex-1\">\r\n                          <div class=\"flex items-center gap-3 mb-2\">\r\n                            <h3 class=\"font-semibold text-white\">{{ address.name }}</h3>\r\n                            <span class=\"text-gray-300\">{{ address.phone }}</span>\r\n                            <span v-if=\"address.is_default\" \r\n                                  class=\"px-2 py-1 bg-cyan-500 text-white text-xs rounded-full\">\r\n                              默认\r\n                            </span>\r\n                          </div>\r\n                          <p class=\"text-gray-300\">\r\n                            {{ address.province }} {{ address.city }} {{ address.district }} {{ address.detail }}\r\n                          </p>\r\n                          <p v-if=\"address.postal_code\" class=\"text-gray-400 text-sm mt-1\">\r\n                            邮编：{{ address.postal_code }}\r\n                          </p>\r\n                        </div>\r\n                        <div class=\"flex items-center\">\r\n                          <i class=\"bi bi-check-circle text-cyan-400 text-xl\" \r\n                             v-if=\"selectedAddressId === address.id\"></i>\r\n                          <i class=\"bi bi-circle text-gray-400 text-xl\" \r\n                             v-else></i>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <!-- 添加新地址按钮 -->\r\n                  <button @click=\"showAddAddressModal = true\" \r\n                          class=\"w-full py-3 border-2 border-dashed border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-cyan-400 rounded-xl transition-colors duration-300 flex items-center justify-center gap-2\">\r\n                    <i class=\"bi bi-plus-circle\"></i>\r\n                    添加新地址\r\n                  </button>\r\n                </div>\r\n\r\n                <!-- 用户没有地址时显示添加地址 -->\r\n                <div v-else class=\"text-center py-8\">\r\n                  <div class=\"text-4xl text-gray-400 mb-4\">\r\n                    <i class=\"bi bi-geo-alt\"></i>\r\n                  </div>\r\n                  <h3 class=\"text-xl font-semibold text-white mb-2\">暂无收货地址</h3>\r\n                  <p class=\"text-gray-400 mb-6\">添加收货地址以完成订单</p>\r\n                  <button @click=\"showAddAddressModal = true\" \r\n                          class=\"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg font-medium transition-colors duration-300\">\r\n                    <i class=\"bi bi-plus-circle mr-2\"></i>\r\n                    添加收货地址\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 未登录用户的地址表单 -->\r\n              <div v-else class=\"space-y-6\">\r\n                <div class=\"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6\">\r\n                  <div class=\"flex items-center gap-2 text-yellow-400\">\r\n                    <i class=\"bi bi-info-circle\"></i>\r\n                    <span class=\"font-medium\">提示</span>\r\n                  </div>\r\n                  <p class=\"text-yellow-300 text-sm mt-1\">\r\n                    <NuxtLink to=\"/auth/login\" class=\"text-yellow-400 hover:text-yellow-300 underline\">登录</NuxtLink> \r\n                    后可以保存地址，方便下次购物\r\n                  </p>\r\n                </div>\r\n\r\n                <div class=\"grid md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">收货人姓名</label>\r\n                    <input v-model=\"guestAddressForm.name\" \r\n                           type=\"text\" required placeholder=\"请输入收货人姓名\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">手机号码</label>\r\n                    <input v-model=\"guestAddressForm.phone\" \r\n                           type=\"tel\" required placeholder=\"请输入手机号码\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"grid md:grid-cols-3 gap-6\">\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">省份</label>\r\n                    <input v-model=\"guestAddressForm.province\" \r\n                           type=\"text\" required placeholder=\"请输入省份\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">城市</label>\r\n                    <input v-model=\"guestAddressForm.city\" \r\n                           type=\"text\" required placeholder=\"请输入城市\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">区县</label>\r\n                    <input v-model=\"guestAddressForm.district\" \r\n                           type=\"text\" required placeholder=\"请输入区县\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">详细地址</label>\r\n                  <textarea v-model=\"guestAddressForm.detail\" \r\n                            required rows=\"3\" placeholder=\"请输入详细地址\"\r\n                            class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none\"></textarea>\r\n                </div>\r\n\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">邮政编码（可选）</label>\r\n                  <input v-model=\"guestAddressForm.postal_code\" \r\n                         type=\"text\" placeholder=\"请输入邮政编码\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 支付方式 -->\r\n          <div v-if=\"cartItems.length > 0\" class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-credit-card text-cyan-400\"></i>\r\n                支付方式\r\n              </h2>\r\n            </div>\r\n            \r\n            <div class=\"p-8\">\r\n              <div class=\"grid md:grid-cols-3 gap-4 mb-6\">\r\n                <button v-for=\"method in paymentMethods\" :key=\"method.id\"\r\n                        @click=\"selectedPaymentMethod = method.id\"\r\n                        :class=\"[\r\n                          'p-6 border-2 rounded-xl transition-all duration-300 text-center',\r\n                          selectedPaymentMethod === method.id \r\n                            ? 'border-cyan-500 bg-cyan-500/20 text-cyan-300' \r\n                            : 'border-gray-600/50 hover:border-cyan-500/50 text-gray-300 hover:text-white'\r\n                        ]\">\r\n                  <i :class=\"method.icon\" class=\"text-3xl mb-3\"></i>\r\n                  <div class=\"font-semibold\">{{ method.name }}</div>\r\n                  <div class=\"text-sm opacity-75 mt-1\">{{ method.description }}</div>\r\n                </button>\r\n              </div>\r\n\r\n              <!-- 信用卡信息 -->\r\n              <div v-if=\"selectedPaymentMethod === 'card'\" class=\"space-y-6\">\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">银行卡号</label>\r\n                  <input v-model=\"paymentInfo.cardNumber\" \r\n                         type=\"text\" placeholder=\"6222 0200 0000 0000\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n                \r\n                <div class=\"grid md:grid-cols-3 gap-6\">\r\n                  <div class=\"md:col-span-2\">\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">有效期</label>\r\n                    <input v-model=\"paymentInfo.expiryDate\" \r\n                           type=\"text\" placeholder=\"MM/YY\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">CVV</label>\r\n                    <input v-model=\"paymentInfo.cvv\" \r\n                           type=\"text\" placeholder=\"123\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">持卡人姓名</label>\r\n                  <input v-model=\"paymentInfo.cardholderName\" \r\n                         type=\"text\" placeholder=\"张三\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 支付宝信息 -->\r\n              <div v-if=\"selectedPaymentMethod === 'alipay'\" class=\"text-center py-8\">\r\n                <div class=\"text-6xl text-blue-500 mb-4\">\r\n                  <i class=\"bi bi-wallet2\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-semibold text-white mb-2\">支付宝支付</h3>\r\n                <p class=\"text-gray-400 mb-6\">您将跳转到支付宝完成支付</p>\r\n              </div>\r\n\r\n              <!-- 微信支付信息 -->\r\n              <div v-if=\"selectedPaymentMethod === 'wechat'\" class=\"text-center py-8\">\r\n                <div class=\"text-6xl text-green-500 mb-4\">\r\n                  <i class=\"bi bi-wechat\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-semibold text-white mb-2\">微信支付</h3>\r\n                <p class=\"text-gray-400 mb-6\">扫码支付或使用微信App支付</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 右侧：订单摘要 -->\r\n        <div class=\"lg:col-span-1\">\r\n          <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 sticky top-6\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-receipt text-cyan-400\"></i>\r\n                订单摘要\r\n              </h2>\r\n            </div>\r\n            \r\n            <div class=\"p-8 space-y-6\">\r\n              <!-- 订单详情 -->\r\n              <div class=\"space-y-4\">\r\n                <div class=\"flex justify-between items-center\">\r\n                  <span class=\"text-gray-300\">商品小计</span>\r\n                  <span class=\"text-white font-semibold\">¥{{ subtotal.toLocaleString() }}</span>\r\n                </div>\r\n                <div class=\"flex justify-between items-center\">\r\n                  <span class=\"text-gray-300\">运费</span>\r\n                  <span class=\"text-white font-semibold\">¥{{ shipping.toLocaleString() }}</span>\r\n                </div>\r\n                <div class=\"flex justify-between items-center\">\r\n                  <span class=\"text-gray-300\">税费</span>\r\n                  <span class=\"text-white font-semibold\">¥{{ tax.toLocaleString() }}</span>\r\n                </div>\r\n                <div class=\"border-t border-gray-700/50 pt-4\">\r\n                  <div class=\"flex justify-between items-center\">\r\n                    <span class=\"text-xl font-semibold text-white\">总计</span>\r\n                    <span class=\"text-2xl font-bold text-cyan-400\">¥{{ total.toLocaleString() }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 优惠码 -->\r\n              <div v-if=\"cartItems.length > 0\">\r\n                <label class=\"block text-sm font-medium text-white mb-2\">优惠券代码</label>\r\n                <div class=\"flex gap-2\">\r\n                  <input v-model=\"couponCode\" \r\n                         type=\"text\" placeholder=\"输入优惠券代码\"\r\n                         class=\"flex-1 px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 text-sm\">\r\n                  <button @click=\"applyCoupon\" \r\n                          class=\"px-4 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 text-sm\">\r\n                    使用\r\n                  </button>\r\n                </div>\r\n                <div v-if=\"appliedCoupon\" class=\"mt-2 text-green-400 text-sm flex items-center gap-1\">\r\n                  <i class=\"bi bi-check-circle\"></i>\r\n                  优惠券\"{{ appliedCoupon }}\"已使用\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 下单按钮 -->\r\n              <button v-if=\"cartItems.length > 0\" \r\n                      @click=\"submitOrder\" \r\n                      :disabled=\"isProcessing || !canSubmitOrder\"\r\n                      class=\"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 disabled:cursor-not-allowed\">\r\n                <i v-if=\"!isProcessing\" class=\"bi bi-credit-card\"></i>\r\n                <div v-else class=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                {{ isProcessing ? '处理中...' : '确认下单' }}\r\n              </button>\r\n\r\n              <!-- 订单验证提示 -->\r\n              <div v-if=\"!canSubmitOrder && cartItems.length > 0\" class=\"text-red-400 text-sm text-center\">\r\n                <i class=\"bi bi-exclamation-triangle mr-1\"></i>\r\n                请完善收货地址信息\r\n              </div>\r\n\r\n              <!-- 安全保障 -->\r\n              <div class=\"text-center pt-6 border-t border-gray-700/50\">\r\n                <div class=\"flex items-center justify-center gap-4 text-gray-400 text-sm\">\r\n                  <div class=\"flex items-center gap-1\">\r\n                    <i class=\"bi bi-shield-check text-green-400\"></i>\r\n                    <span>安全</span>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-1\">\r\n                    <i class=\"bi bi-lock text-green-400\"></i>\r\n                    <span>加密</span>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-1\">\r\n                    <i class=\"bi bi-award text-green-400\"></i>\r\n                    <span>认证</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加地址弹窗 -->\r\n    <div v-if=\"showAddAddressModal\" class=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div class=\"p-8\">\r\n          <div class=\"flex items-center justify-between mb-6\">\r\n            <h3 class=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n              <i class=\"bi bi-geo-alt text-cyan-400\"></i>\r\n              添加收货地址\r\n            </h3>\r\n            <button @click=\"closeAddAddressModal\" class=\"text-gray-400 hover:text-white\">\r\n              <i class=\"bi bi-x-lg text-2xl\"></i>\r\n            </button>\r\n          </div>\r\n          \r\n          <form @submit.prevent=\"addNewAddress\" class=\"space-y-6\">\r\n            <div class=\"grid md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-cyan-400 mb-2\">收货人姓名 *</label>\r\n                <input v-model=\"newAddressForm.name\" \r\n                       type=\"text\" required placeholder=\"请输入收货人姓名\"\r\n                       class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n              </div>\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-cyan-400 mb-2\">手机号码 *</label>\r\n                <input v-model=\"newAddressForm.phone\" \r\n                       type=\"tel\" required placeholder=\"请输入手机号码\"\r\n                       class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"grid md:grid-cols-3 gap-6\">\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-cyan-400 mb-2\">省份 *</label>\r\n                <input v-model=\"newAddressForm.province\" \r\n                       type=\"text\" required placeholder=\"请输入省份\"\r\n                       class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n              </div>\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-cyan-400 mb-2\">城市 *</label>\r\n                <input v-model=\"newAddressForm.city\" \r\n                       type=\"text\" required placeholder=\"请输入城市\"\r\n                       class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n              </div>\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-cyan-400 mb-2\">区县 *</label>\r\n                <input v-model=\"newAddressForm.district\" \r\n                       type=\"text\" required placeholder=\"请输入区县\"\r\n                       class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-cyan-400 mb-2\">详细地址 *</label>\r\n              <textarea v-model=\"newAddressForm.detail\" \r\n                        required rows=\"3\" placeholder=\"请输入详细地址\"\r\n                        class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none\"></textarea>\r\n            </div>\r\n\r\n            <div class=\"grid md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label class=\"block text-sm font-medium text-cyan-400 mb-2\">邮政编码</label>\r\n                <input v-model=\"newAddressForm.postal_code\" \r\n                       type=\"text\" placeholder=\"请输入邮政编码（可选）\"\r\n                       class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n              </div>\r\n              <div class=\"flex items-end\">\r\n                <label class=\"flex items-center space-x-2\">\r\n                  <input v-model=\"newAddressForm.is_default\" \r\n                         type=\"checkbox\" \r\n                         class=\"w-4 h-4 text-cyan-500 bg-transparent border-2 border-cyan-500 rounded focus:ring-cyan-500\">\r\n                  <span class=\"text-sm text-gray-300\">设为默认地址</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"flex justify-end space-x-4 pt-6\">\r\n              <button type=\"button\" @click=\"closeAddAddressModal\" \r\n                      class=\"px-6 py-3 border border-gray-600 text-gray-300 hover:text-white hover:border-gray-500 rounded-lg font-medium transition-colors duration-300\">\r\n                取消\r\n              </button>\r\n              <button type=\"submit\" :disabled=\"addingAddress\"\r\n                      class=\"px-6 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-300 flex items-center gap-2\">\r\n                <div v-if=\"addingAddress\" class=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                <i v-else class=\"bi bi-check-circle\"></i>\r\n                {{ addingAddress ? '添加中...' : '添加地址' }}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 订单成功弹窗 -->\r\n    <div v-if=\"showSuccessModal\" class=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div class=\"glass-card-dark rounded-2xl border border-green-500/30 shadow-2xl shadow-green-500/20 p-8 max-w-md w-full text-center\">\r\n        <div class=\"text-6xl text-green-400 mb-6\">\r\n          <i class=\"bi bi-check-circle\"></i>\r\n        </div>\r\n        <h3 class=\"text-2xl font-bold text-white mb-4\">订单提交成功！</h3>\r\n        <p class=\"text-gray-300 mb-2\">\r\n          <span v-if=\"orderNumber.startsWith('BATCH-')\">\r\n            批次号：#{{ orderNumber }}\r\n          </span>\r\n          <span v-else>\r\n            订单号：#{{ orderNumber }}\r\n          </span>\r\n        </p>\r\n        <p class=\"text-gray-400 mb-8\">\r\n          <span v-if=\"orderNumber.startsWith('BATCH-')\">\r\n            您的购物车商品已分别创建订单，感谢您的购买！\r\n          </span>\r\n          <span v-else>\r\n            感谢您的购买，您将很快收到确认邮件。\r\n          </span>\r\n        </p>\r\n        <div class=\"space-y-3\">\r\n          <button @click=\"goToOrders\" \r\n                  class=\"w-full bg-green-600 hover:bg-green-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300\">\r\n            查看订单\r\n          </button>\r\n          <button @click=\"continueShopping\" \r\n                  class=\"w-full border border-gray-600 hover:border-green-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300\">\r\n            继续购物\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { createDiscreteApi } from 'naive-ui'\r\nimport { useUserStore } from '../stores/user'\r\nimport { useAddressStore } from '../stores/address'\r\nimport { cartApi } from '../utils/api/cart'\r\nimport { ordersApi } from '../utils/api/orders'\r\n\r\n// 创建消息API\r\nconst { message } = createDiscreteApi(['message'])\r\n\r\n// 使用 Pinia stores\r\nconst userStore = useUserStore()\r\nconst addressStore = useAddressStore()\r\n\r\n// 消息函数\r\nconst success = (content) => {\r\n  message.success(content, { duration: 3000 })\r\n}\r\n\r\nconst error = (content) => {\r\n  message.error(content, { duration: 4000 })\r\n}\r\n\r\nconst warning = (content) => {\r\n  message.warning(content, { duration: 3000 })\r\n}\r\n\r\n// 响应式数据\r\nconst cartItems = ref([])\r\nconst isLoadingCart = ref(false)\r\nconst isProcessing = ref(false)\r\nconst showSuccessModal = ref(false)\r\nconst orderNumber = ref('')\r\nconst selectedAddressId = ref(null)\r\nconst showAddAddressModal = ref(false)\r\nconst addingAddress = ref(false)\r\n\r\n// 游客地址表单\r\nconst guestAddressForm = ref({\r\n  name: '',\r\n  phone: '',\r\n  province: '',\r\n  city: '',\r\n  district: '',\r\n  detail: '',\r\n  postal_code: ''\r\n})\r\n\r\n// 新地址表单\r\nconst newAddressForm = ref({\r\n  name: '',\r\n  phone: '',\r\n  province: '',\r\n  city: '',\r\n  district: '',\r\n  detail: '',\r\n  postal_code: '',\r\n  is_default: false\r\n})\r\n\r\n// 支付信息\r\nconst selectedPaymentMethod = ref('card')\r\nconst paymentInfo = ref({\r\n  cardNumber: '',\r\n  expiryDate: '',\r\n  cvv: '',\r\n  cardholderName: ''\r\n})\r\n\r\n// 优惠码\r\nconst couponCode = ref('')\r\nconst appliedCoupon = ref('')\r\n\r\n// 支付方式\r\nconst paymentMethods = ref([\r\n  {\r\n    id: 'card',\r\n    name: '银行卡支付',\r\n    description: '银联、Visa、万事达',\r\n    icon: 'bi-credit-card'\r\n  },\r\n  {\r\n    id: 'alipay',\r\n    name: '支付宝',\r\n    description: '使用支付宝支付',\r\n    icon: 'bi-wallet2'\r\n  },\r\n  {\r\n    id: 'wechat',\r\n    name: '微信支付',\r\n    description: '微信扫码支付',\r\n    icon: 'bi-wechat'\r\n  }\r\n])\r\n\r\n// 计算属性\r\nconst subtotal = computed(() => {\r\n  return cartItems.value.reduce((sum, item) => sum + (item.product_price * item.quantity), 0)\r\n})\r\n\r\nconst shipping = computed(() => {\r\n  return subtotal.value > 1000 ? 0 : 50 // 满¥1000免费配送\r\n})\r\n\r\nconst tax = computed(() => {\r\n  return Math.round(subtotal.value * 0.08) // 8%税率\r\n})\r\n\r\nconst total = computed(() => {\r\n  return subtotal.value + shipping.value + tax.value\r\n})\r\n\r\n// 检查是否可以提交订单\r\nconst canSubmitOrder = computed(() => {\r\n  if (userStore.isLoggedIn) {\r\n    // 登录用户需要选择地址\r\n    return selectedAddressId.value !== null\r\n  } else {\r\n    // 游客需要填写地址信息\r\n    return guestAddressForm.value.name && \r\n           guestAddressForm.value.phone && \r\n           guestAddressForm.value.province && \r\n           guestAddressForm.value.city && \r\n           guestAddressForm.value.district && \r\n           guestAddressForm.value.detail\r\n  }\r\n})\r\n\r\n// 购物车相关方法\r\nconst loadCartItems = async () => {\r\n  if (!userStore.isLoggedIn) return\r\n  \r\n  try {\r\n    isLoadingCart.value = true\r\n    const response = await cartApi.getCartItems()\r\n    if (response.success) {\r\n      cartItems.value = response.data\r\n    } else {\r\n      error(response.message || '获取购物车失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('加载购物车失败:', err)\r\n    error('加载购物车失败，请重试')\r\n  } finally {\r\n    isLoadingCart.value = false\r\n  }\r\n}\r\n\r\nconst removeFromCart = async (cartItemId) => {\r\n  if (!userStore.isLoggedIn) return\r\n  \r\n  try {\r\n    const response = await cartApi.removeCartItem(cartItemId)\r\n    if (response.success) {\r\n      cartItems.value = cartItems.value.filter(item => item.id !== cartItemId)\r\n      success('商品已从购物车移除')\r\n    } else {\r\n      error(response.message || '删除失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('删除购物车项目失败:', err)\r\n    error('删除失败，请重试')\r\n  }\r\n}\r\n\r\nconst increaseQuantity = async (cartItemId) => {\r\n  if (!userStore.isLoggedIn) return\r\n  \r\n  const item = cartItems.value.find(item => item.id === cartItemId)\r\n  if (!item) return\r\n  \r\n  try {\r\n    const response = await cartApi.updateCartItem(cartItemId, {\r\n      quantity: item.quantity + 1\r\n    })\r\n    if (response.success) {\r\n      item.quantity = response.data.quantity\r\n    } else {\r\n      error(response.message || '更新数量失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('更新购物车数量失败:', err)\r\n    error('更新失败，请重试')\r\n  }\r\n}\r\n\r\nconst decreaseQuantity = async (cartItemId) => {\r\n  if (!userStore.isLoggedIn) return\r\n  \r\n  const item = cartItems.value.find(item => item.id === cartItemId)\r\n  if (!item || item.quantity <= 1) return\r\n  \r\n  try {\r\n    const response = await cartApi.updateCartItem(cartItemId, {\r\n      quantity: item.quantity - 1\r\n    })\r\n    if (response.success) {\r\n      item.quantity = response.data.quantity\r\n    } else {\r\n      error(response.message || '更新数量失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('更新购物车数量失败:', err)\r\n    error('更新失败，请重试')\r\n  }\r\n}\r\n\r\nconst applyCoupon = async () => {\r\n  if (!userStore.isLoggedIn) return\r\n  \r\n  try {\r\n    const response = await cartApi.applyCoupon(couponCode.value)\r\n    if (response.success) {\r\n      appliedCoupon.value = couponCode.value\r\n      success('优惠券使用成功！')\r\n    } else {\r\n      error(response.message || '优惠券代码无效')\r\n    }\r\n  } catch (err) {\r\n    console.error('应用优惠券失败:', err)\r\n    error('优惠券代码无效')\r\n  }\r\n}\r\n\r\n// 地址相关方法\r\nconst selectAddress = (addressId) => {\r\n  selectedAddressId.value = addressId\r\n}\r\n\r\nconst addNewAddress = async () => {\r\n  if (!userStore.isLoggedIn) return\r\n\r\n  try {\r\n    addingAddress.value = true\r\n    await addressStore.addAddress(newAddressForm.value)\r\n    \r\n    success('地址添加成功！')\r\n    closeAddAddressModal()\r\n    \r\n    // 如果是用户的第一个地址，或者设为默认地址，自动选择\r\n    if (addressStore.addresses.length === 1 || newAddressForm.value.is_default) {\r\n      selectedAddressId.value = addressStore.addresses[addressStore.addresses.length - 1].id\r\n    }\r\n  } catch (error) {\r\n    console.error('添加地址失败:', error)\r\n    error(error.message || '添加地址失败，请重试')\r\n  } finally {\r\n    addingAddress.value = false\r\n  }\r\n}\r\n\r\nconst closeAddAddressModal = () => {\r\n  showAddAddressModal.value = false\r\n  // 重置表单\r\n  newAddressForm.value = {\r\n    name: '',\r\n    phone: '',\r\n    province: '',\r\n    city: '',\r\n    district: '',\r\n    detail: '',\r\n    postal_code: '',\r\n    is_default: false\r\n  }\r\n}\r\n\r\nconst submitOrder = async () => {\r\n  if (cartItems.value.length === 0 || !canSubmitOrder.value) return\r\n  \r\n  isProcessing.value = true\r\n  \r\n  try {\r\n    // 获取收货地址\r\n    const shippingAddress = userStore.isLoggedIn ? \r\n      addressStore.addresses.find(addr => addr.id === selectedAddressId.value) : \r\n      guestAddressForm.value\r\n\r\n    // 收集要下单的购物车项目 ID\r\n    const cartItemIds = cartItems.value.map(item => item.id)\r\n    console.log('准备下单的购物车项目ID:', cartItemIds)\r\n\r\n    // 为每个购物车商品创建单独的订单\r\n    const orderPromises = cartItems.value.map(item => {\r\n      const orderData = {\r\n        config_id: item.product_id,  // 使用 config_id 字段\r\n        quantity: item.quantity,\r\n        shipping_address: shippingAddress,\r\n        notes: `通过购物车下单，支付方式：${selectedPaymentMethod.value}`\r\n      }\r\n      return ordersApi.createOrder(orderData)\r\n    })\r\n\r\n    // 并行创建所有订单\r\n    const orderResponses = await Promise.all(orderPromises)\r\n    \r\n    // 检查是否所有订单都创建成功\r\n    const failedOrders = orderResponses.filter(response => !response.success)\r\n    if (failedOrders.length > 0) {\r\n      console.error('订单创建失败:', failedOrders)\r\n      throw new Error(`${failedOrders.length}个订单创建失败`)\r\n    }\r\n\r\n    // 获取成功创建的订单\r\n    const successOrders = orderResponses.map(response => response.data)\r\n    console.log('订单创建成功:', successOrders.length, '个订单')\r\n    \r\n    // 生成主订单号（用于显示）\r\n    orderNumber.value = successOrders.length > 1 ? \r\n      `BATCH-${Date.now().toString().slice(-8)}` : \r\n      (successOrders[0].order_no || successOrders[0].order_number)\r\n    \r\n    // 只有在所有订单都创建成功后，才删除已下单的购物车商品\r\n    if (userStore.isLoggedIn) {\r\n      try {\r\n        if (cartItemIds.length === 1) {\r\n          // 单个商品删除\r\n          console.log('删除单个购物车商品:', cartItemIds[0])\r\n          await cartApi.removeCartItem(cartItemIds[0])\r\n        } else {\r\n          // 批量删除多个商品\r\n          console.log('批量删除购物车商品:', cartItemIds)\r\n          await cartApi.batchRemoveCartItems(cartItemIds)\r\n        }\r\n        console.log('购物车商品删除成功')\r\n      } catch (deleteError) {\r\n        console.error('删除购物车商品失败:', deleteError)\r\n        // 即使删除失败，订单已经创建成功，所以还是要更新本地数据\r\n        warning('订单创建成功，但清理购物车时出现问题，请刷新页面')\r\n      }\r\n    }\r\n    \r\n    // 从本地购物车数据中移除已下单的商品\r\n    const originalLength = cartItems.value.length\r\n    cartItems.value = cartItems.value.filter(item => !cartItemIds.includes(item.id))\r\n    console.log(`本地购物车数据更新: ${originalLength} -> ${cartItems.value.length}`)\r\n    \r\n    // 显示成功弹窗\r\n    showSuccessModal.value = true\r\n    \r\n    const message = successOrders.length > 1 ? \r\n      `成功创建${successOrders.length}个订单！` : \r\n      '订单创建成功！'\r\n    success(message)\r\n    \r\n  } catch (error) {\r\n    console.error('订单创建失败:', error)\r\n    error('订单创建失败：' + (error.message || '请重试'))\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n\r\nconst goToOrders = () => {\r\n  showSuccessModal.value = false\r\n  navigateTo('/orders')\r\n}\r\n\r\nconst continueShopping = () => {\r\n  showSuccessModal.value = false\r\n  navigateTo('/products')\r\n}\r\n\r\n// 初始化数据\r\nconst initializeData = async () => {\r\n  // 如果用户已登录，从接口加载购物车数据\r\n  if (userStore.isLoggedIn) {\r\n    await loadCartItems()\r\n    \r\n    // 初始化地址数据\r\n    try {\r\n      await addressStore.initializeAddresses()\r\n      \r\n      // 自动选择默认地址\r\n      if (addressStore.getDefaultAddress) {\r\n        selectedAddressId.value = addressStore.getDefaultAddress.id\r\n      } else if (addressStore.addresses.length > 0) {\r\n        selectedAddressId.value = addressStore.addresses[0].id\r\n      }\r\n    } catch (error) {\r\n      console.error('初始化地址失败:', error)\r\n    }\r\n  } else {\r\n    // 未登录用户提示登录\r\n    warning('请登录后查看购物车')\r\n  }\r\n}\r\n\r\n// 页面挂载时初始化\r\nonMounted(() => {\r\n  initializeData()\r\n})\r\n\r\n// 页面元数据\r\nuseHead({\r\n  title: '购物车结算 - xlCig',\r\n  meta: [\r\n    { name: 'description', content: '安全快捷的购物车结算流程，支持多种支付方式和地址管理' }\r\n  ]\r\n})\r\n</script> "],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate","_push","_parent","_createVNode","_ssrRenderList","_ssrRenderAttr","_ssrRenderClass","_ssrIncludeBooleanAttr","_ssrLooseContain"],"mappings":"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"}