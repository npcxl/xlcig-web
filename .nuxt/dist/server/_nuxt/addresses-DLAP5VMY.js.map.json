{"file":"addresses-DLAP5VMY.js","mappings":"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","names":["addresses","_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual"],"sources":["../../../../pages/addresses.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden\">\r\n\r\n    <div class=\"fixed inset-0 pointer-events-none\">\r\n      <div class=\"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse\"></div>\r\n      <div class=\"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000\"></div>\r\n    </div>\r\n\r\n    <!-- 导航栏 -->\r\n    <AppHeader \r\n      :show-back-button=\"false\"\r\n      :show-nav-menu=\"false\"\r\n      :show-breadcrumb=\"true\"\r\n      :show-location=\"false\"\r\n      :show-search-button=\"false\"\r\n      :show-notification-button=\"false\"\r\n      :show-decorations=\"false\"\r\n      logo-size=\"medium\"\r\n      current-page-title=\"收货地址\"\r\n    />\r\n\r\n    <div class=\"relative z-10 py-8\">\r\n      <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <!-- 页面标题 -->\r\n        <div class=\"mb-8 animate-fade-in-up\">\r\n          <div class=\"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 class=\"text-4xl font-bold text-white mb-3 flex items-center gap-3\">\r\n                  <i class=\"bi bi-geo-alt-fill text-cyan-400 text-3xl animate-bounce-gentle\"></i>\r\n                  收货地址管理\r\n                </h1>\r\n                <p class=\"text-gray-300 text-lg\">管理您的收货地址，支持多个地址并设置默认地址</p>\r\n              </div>\r\n              <button \r\n                @click=\"showAddModal = true\"\r\n                class=\"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 flex items-center gap-2\"\r\n              >\r\n                <i class=\"bi bi-plus-circle text-lg\"></i>\r\n                添加新地址\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 地址列表 -->\r\n        <div v-if=\"loading\" class=\"animate-fade-in-up animation-delay-200\">\r\n          <div class=\"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 text-center\">\r\n            <div class=\"loading-spinner mx-auto mb-4\"></div>\r\n            <p class=\"text-gray-300\">正在加载地址列表...</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-else-if=\"addresses.length === 0\" class=\"animate-fade-in-up animation-delay-200\">\r\n          <div class=\"glass-card-dark rounded-2xl p-16 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 text-center\">\r\n            <i class=\"bi bi-geo-alt text-6xl text-gray-400 mb-6\"></i>\r\n            <h3 class=\"text-xl font-semibold text-white mb-4\">暂无收货地址</h3>\r\n            <p class=\"text-gray-400 mb-8\">添加您的第一个收货地址，让购物更加便捷</p>\r\n            <button \r\n              @click=\"showAddModal = true\"\r\n              class=\"btn-premium-dark px-8 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1\"\r\n            >\r\n              <i class=\"bi bi-plus-circle mr-2\"></i>\r\n              添加收货地址\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-else class=\"space-y-6 animate-fade-in-up animation-delay-200\">\r\n          <div \r\n            v-for=\"address in addresses\" \r\n            :key=\"address.id\"\r\n            class=\"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 hover:border-cyan-400/50 transition-all duration-300 transform hover:-translate-y-1\"\r\n          >\r\n            <div class=\"flex items-start justify-between\">\r\n              <div class=\"flex-1\">\r\n                <!-- 地址标题和默认标签 -->\r\n                <div class=\"flex items-center gap-3 mb-4\">\r\n                  <h3 class=\"text-xl font-semibold text-white\">{{ address.name }}</h3>\r\n                  <span class=\"text-gray-300\">{{ address.phone }}</span>\r\n                  <span \r\n                    v-if=\"address.is_default\" \r\n                    class=\"px-3 py-1 bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-sm font-medium rounded-full\"\r\n                  >\r\n                    <i class=\"bi bi-star-fill mr-1\"></i>\r\n                    默认地址\r\n                  </span>\r\n                </div>\r\n                \r\n                <!-- 详细地址 -->\r\n                <div class=\"text-gray-300 leading-relaxed\">\r\n                  <p class=\"text-lg\">{{ address.province }} {{ address.city }} {{ address.district }}</p>\r\n                  <p class=\"text-gray-400 mt-1\">{{ address.detail }}</p>\r\n                  <p v-if=\"address.postal_code\" class=\"text-gray-400 text-sm mt-1\">邮政编码：{{ address.postal_code }}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <!-- 操作按钮 -->\r\n              <div class=\"flex flex-col space-y-2 ml-6\">\r\n                <button \r\n                  v-if=\"!address.is_default\"\r\n                  @click=\"setDefault(address.id)\"\r\n                  :disabled=\"settingDefault\"\r\n                  class=\"btn-outline-dark px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50\"\r\n                >\r\n                  <i class=\"bi bi-star mr-1\"></i>\r\n                  设为默认\r\n                </button>\r\n                <button \r\n                  @click=\"editAddress(address)\"\r\n                  class=\"btn-outline-dark px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-1\"\r\n                >\r\n                  <i class=\"bi bi-pencil mr-1\"></i>\r\n                  编辑\r\n                </button>\r\n                <button \r\n                  @click=\"deleteAddress(address.id)\"\r\n                  :disabled=\"deleting\"\r\n                  class=\"btn-danger px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50\"\r\n                >\r\n                  <i class=\"bi bi-trash mr-1\"></i>\r\n                  删除\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 添加/编辑地址弹窗 -->\r\n    <div v-if=\"showAddModal || showEditModal\" class=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4\">\r\n      <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 animate-scale-in w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div class=\"p-8\">\r\n          <h3 class=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\r\n            <i class=\"bi bi-geo-alt text-cyan-400\"></i>\r\n            {{ isEditing ? '编辑地址' : '添加新地址' }}\r\n          </h3>\r\n          \r\n          <form @submit.prevent=\"isEditing ? updateAddress() : addAddress()\" class=\"space-y-6\">\r\n            <!-- 收货人信息 -->\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div class=\"space-y-2\">\r\n                <label for=\"name\" class=\"block text-sm font-medium text-cyan-400\">收货人姓名 *</label>\r\n                <input \r\n                  id=\"name\"\r\n                  v-model=\"form.name\" \r\n                  type=\"text\" \r\n                  class=\"input-dark w-full\"\r\n                  placeholder=\"请输入收货人姓名\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div class=\"space-y-2\">\r\n                <label for=\"phone\" class=\"block text-sm font-medium text-cyan-400\">手机号码 *</label>\r\n                <input \r\n                  id=\"phone\"\r\n                  v-model=\"form.phone\" \r\n                  type=\"tel\" \r\n                  class=\"input-dark w-full\"\r\n                  placeholder=\"请输入手机号码\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 地区选择 -->\r\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div class=\"space-y-2\">\r\n                <label for=\"province\" class=\"block text-sm font-medium text-cyan-400\">省份 *</label>\r\n                <select \r\n                  id=\"province\"\r\n                  v-model=\"form.province\" \r\n                  class=\"input-dark w-full\"\r\n                  required\r\n                  @change=\"onProvinceChange\"\r\n                >\r\n                  <option value=\"\">请选择省份</option>\r\n                  <option v-for=\"province in provinces\" :key=\"province.name\" :value=\"province.name\">\r\n                    {{ province.name }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"space-y-2\">\r\n                <label for=\"city\" class=\"block text-sm font-medium text-cyan-400\">城市 *</label>\r\n                <select \r\n                  id=\"city\"\r\n                  v-model=\"form.city\" \r\n                  class=\"input-dark w-full\"\r\n                  required\r\n                  @change=\"onCityChange\"\r\n                >\r\n                  <option value=\"\">请选择城市</option>\r\n                  <option v-for=\"city in cities\" :key=\"city.name\" :value=\"city.name\">\r\n                    {{ city.name }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"space-y-2\">\r\n                <label for=\"district\" class=\"block text-sm font-medium text-cyan-400\">区县 *</label>\r\n                <select \r\n                  id=\"district\"\r\n                  v-model=\"form.district\" \r\n                  class=\"input-dark w-full\"\r\n                  required\r\n                >\r\n                  <option value=\"\">请选择区县</option>\r\n                  <option v-for=\"district in districts\" :key=\"district.name\" :value=\"district.name\">\r\n                    {{ district.name }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 详细地址 -->\r\n            <div class=\"space-y-2\">\r\n              <label for=\"detail\" class=\"block text-sm font-medium text-cyan-400\">详细地址 *</label>\r\n              <textarea \r\n                id=\"detail\"\r\n                v-model=\"form.detail\" \r\n                class=\"input-dark w-full h-24 resize-none\"\r\n                placeholder=\"请输入详细地址，如街道、门牌号、楼层等\"\r\n                required\r\n              ></textarea>\r\n            </div>\r\n\r\n            <!-- 邮政编码 -->\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div class=\"space-y-2\">\r\n                <label for=\"postal_code\" class=\"block text-sm font-medium text-cyan-400\">邮政编码</label>\r\n                <input \r\n                  id=\"postal_code\"\r\n                  v-model=\"form.postal_code\" \r\n                  type=\"text\" \r\n                  class=\"input-dark w-full\"\r\n                  placeholder=\"请输入邮政编码（可选）\"\r\n                />\r\n              </div>\r\n              <div class=\"space-y-2 flex items-end\">\r\n                <label class=\"flex items-center space-x-2\">\r\n                  <input \r\n                    v-model=\"form.is_default\" \r\n                    type=\"checkbox\" \r\n                    class=\"w-4 h-4 text-cyan-500 bg-transparent border-2 border-cyan-500 rounded focus:ring-cyan-500\"\r\n                  />\r\n                  <span class=\"text-sm text-gray-300\">设为默认地址</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"flex justify-end space-x-4 pt-6\">\r\n              <button \r\n                type=\"button\" \r\n                @click=\"closeModal\" \r\n                class=\"btn-outline-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1\"\r\n              >\r\n                <i class=\"bi bi-x-circle mr-2\"></i>\r\n                取消\r\n              </button>\r\n              <button \r\n                type=\"submit\" \r\n                :disabled=\"submitting\"\r\n                class=\"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <span v-if=\"submitting\" class=\"loading loading-spinner loading-sm mr-2\"></span>\r\n                <i v-else class=\"bi bi-check-circle mr-2\"></i>\r\n                {{ submitting ? '保存中...' : (isEditing ? '保存修改' : '添加地址') }}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, onMounted, computed } from 'vue'\r\nimport { addressApi } from '../utils/api/addresses'\r\nimport type { Address, AddressCreateInput, AddressUpdateInput } from '../types/api'\r\nimport { createDiscreteApi } from 'naive-ui'\r\nimport { \r\n  getProvinces, \r\n  getCitiesByProvinceName, \r\n  getAreasByCityName,\r\n  validateRegion,\r\n  type Province,\r\n  type City,\r\n  type Area\r\n} from '../utils/regions'\r\nimport AppHeader from '../components/AppHeader.vue'\r\n\r\n// 创建消息API\r\nconst { message } = createDiscreteApi(['message'])\r\n\r\n// 消息函数\r\nconst success = (content) => {\r\n  message.success(content, { duration: 3000 })\r\n}\r\n\r\nconst error = (content) => {\r\n  message.error(content, { duration: 4000 })\r\n}\r\n\r\n// 页面状态\r\nconst loading = ref(true)\r\nconst submitting = ref(false)\r\nconst settingDefault = ref(false)\r\nconst deleting = ref(false)\r\nconst addresses = ref<Address[]>([])\r\n\r\n// 弹窗状态\r\nconst showAddModal = ref(false)\r\nconst showEditModal = ref(false)\r\nconst editingAddress = ref<Address | null>(null)\r\n\r\n// 表单数据\r\nconst form = reactive<AddressCreateInput>({\r\n  name: '',\r\n  phone: '',\r\n  province: '',\r\n  city: '',\r\n  district: '',\r\n  detail: '',\r\n  postal_code: '',\r\n  is_default: false\r\n})\r\n\r\n// 地区数据\r\nconst provinces = ref<Province[]>([])\r\nconst cities = ref<City[]>([])\r\nconst districts = ref<Area[]>([])\r\n\r\n// 计算属性\r\nconst isEditing = computed(() => editingAddress.value !== null)\r\n\r\n// 初始化省份数据\r\nconst initProvinces = () => {\r\n  try {\r\n    provinces.value = getProvinces()\r\n  } catch (error) {\r\n    console.error('获取省份数据失败:', error)\r\n    error('获取省份数据失败')\r\n  }\r\n}\r\n\r\n// 获取地址列表\r\nconst fetchAddresses = async () => {\r\n  try {\r\n    loading.value = true\r\n    const response = await addressApi.getAddresses()\r\n    addresses.value = response.data || []\r\n  } catch (error) {\r\n    console.error('获取地址列表失败:', error)\r\n    error('获取地址列表失败，请刷新重试')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 添加地址\r\nconst addAddress = async () => {\r\n  try {\r\n    // 验证省市区组合\r\n    if (!validateRegion(form.province, form.city, form.district)) {\r\n      error('请选择正确的省市区组合')\r\n      return\r\n    }\r\n    \r\n    submitting.value = true\r\n    const response = await addressApi.createAddress(form)\r\n    if (response.success && response.data) {\r\n      addresses.value.push(response.data)\r\n      closeModal()\r\n      success('地址添加成功')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('添加地址失败:', error)\r\n    error(error.message || '添加地址失败，请重试')\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n\r\n// 编辑地址\r\nconst editAddress = (address: Address) => {\r\n  editingAddress.value = address\r\n  form.name = address.name\r\n  form.phone = address.phone\r\n  form.province = address.province\r\n  form.city = address.city\r\n  form.district = address.district\r\n  form.detail = address.detail\r\n  form.postal_code = address.postal_code || ''\r\n  form.is_default = address.is_default\r\n  \r\n  // 触发级联选择\r\n  onProvinceChange()\r\n  onCityChange()\r\n  \r\n  showEditModal.value = true\r\n}\r\n\r\n// 更新地址\r\nconst updateAddress = async () => {\r\n  if (!editingAddress.value) return\r\n  \r\n  try {\r\n    // 验证省市区组合\r\n    if (!validateRegion(form.province, form.city, form.district)) {\r\n      error('请选择正确的省市区组合')\r\n      return\r\n    }\r\n    \r\n    submitting.value = true\r\n    const response = await addressApi.updateAddress(editingAddress.value.id, form)\r\n    if (response.success && response.data) {\r\n      const index = addresses.value.findIndex(addr => addr.id === editingAddress.value!.id)\r\n      if (index !== -1) {\r\n        addresses.value[index] = response.data\r\n      }\r\n      closeModal()\r\n      success('地址更新成功')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('更新地址失败:', error)\r\n    error(error.message || '更新地址失败，请重试')\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n\r\n// 设置默认地址\r\nconst setDefault = async (id: number) => {\r\n  try {\r\n    settingDefault.value = true\r\n    const response = await addressApi.setDefaultAddress(id)\r\n    if (response.success) {\r\n      // 更新本地状态\r\n      addresses.value.forEach(addr => {\r\n        addr.is_default = addr.id === id\r\n      })\r\n      success('默认地址设置成功')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('设置默认地址失败:', error)\r\n    error(error.message || '设置默认地址失败，请重试')\r\n  } finally {\r\n    settingDefault.value = false\r\n  }\r\n}\r\n\r\n// 删除地址\r\nconst deleteAddress = async (id: number) => {\r\n  if (!confirm('确定要删除这个地址吗？')) return\r\n  \r\n  try {\r\n    deleting.value = true\r\n    const response = await addressApi.deleteAddress(id)\r\n    if (response.success) {\r\n      addresses.value = addresses.value.filter(addr => addr.id !== id)\r\n      success('地址删除成功')\r\n    }\r\n  } catch (error: any) {\r\n    console.error('删除地址失败:', error)\r\n    error(error.message || '删除地址失败，请重试')\r\n  } finally {\r\n    deleting.value = false\r\n  }\r\n}\r\n\r\n// 关闭弹窗\r\nconst closeModal = () => {\r\n  showAddModal.value = false\r\n  showEditModal.value = false\r\n  editingAddress.value = null\r\n  \r\n  // 重置表单\r\n  form.name = ''\r\n  form.phone = ''\r\n  form.province = ''\r\n  form.city = ''\r\n  form.district = ''\r\n  form.detail = ''\r\n  form.postal_code = ''\r\n  form.is_default = false\r\n  \r\n  // 重置地区数据\r\n  cities.value = []\r\n  districts.value = []\r\n}\r\n\r\n// 省份变化时获取城市\r\nconst onProvinceChange = () => {\r\n  form.city = ''\r\n  form.district = ''\r\n  cities.value = []\r\n  districts.value = []\r\n  \r\n  if (form.province) {\r\n    try {\r\n      cities.value = getCitiesByProvinceName(form.province)\r\n    } catch (error) {\r\n      console.error('获取城市数据失败:', error)\r\n      error('获取城市数据失败')\r\n    }\r\n  }\r\n}\r\n\r\n// 城市变化时获取区县\r\nconst onCityChange = () => {\r\n  form.district = ''\r\n  districts.value = []\r\n  \r\n  if (form.province && form.city) {\r\n    try {\r\n      districts.value = getAreasByCityName(form.province, form.city)\r\n    } catch (error) {\r\n      console.error('获取区县数据失败:', error)\r\n      error('获取区县数据失败')\r\n    }\r\n  }\r\n}\r\n\r\n// 页面挂载时获取数据\r\nonMounted(() => {\r\n  fetchAddresses()\r\n  initProvinces()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* 深色主题按钮样式 */\r\n.btn-premium-dark {\r\n  background: linear-gradient(135deg, #00f5ff 0%, #0080ff 100%);\r\n  color: white;\r\n  box-shadow: 0 4px 15px rgba(0, 245, 255, 0.4);\r\n}\r\n\r\n.btn-premium-dark:hover {\r\n  box-shadow: 0 6px 20px rgba(0, 245, 255, 0.6);\r\n}\r\n\r\n.btn-outline-dark {\r\n  border: 2px solid rgba(100, 116, 139, 0.3);\r\n  color: #cbd5e1;\r\n  background: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.btn-outline-dark:hover {\r\n  border-color: rgba(0, 245, 255, 0.5);\r\n  color: #00f5ff;\r\n  background: rgba(0, 245, 255, 0.1);\r\n}\r\n\r\n.btn-danger {\r\n  border: 2px solid rgba(239, 68, 68, 0.3);\r\n  color: #fca5a5;\r\n  background: rgba(239, 68, 68, 0.1);\r\n}\r\n\r\n.btn-danger:hover {\r\n  border-color: rgba(239, 68, 68, 0.5);\r\n  color: #f87171;\r\n  background: rgba(239, 68, 68, 0.2);\r\n}\r\n\r\n/* 深色主题输入框样式 */\r\n.input-dark {\r\n  background: rgba(0, 0, 0, 0.3);\r\n  border: 2px solid rgba(100, 116, 139, 0.3);\r\n  color: white;\r\n  padding: 0.75rem 1rem;\r\n  border-radius: 0.5rem;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.input-dark:focus {\r\n  outline: none;\r\n  border-color: #00f5ff;\r\n  box-shadow: 0 0 0 3px rgba(0, 245, 255, 0.2);\r\n}\r\n\r\n.input-dark::placeholder {\r\n  color: #64748b;\r\n}\r\n\r\n.input-dark option {\r\n  background: #1f2937;\r\n  color: white;\r\n}\r\n\r\n/* 加载动画 */\r\n.loading-spinner {\r\n  width: 2rem;\r\n  height: 2rem;\r\n  border: 3px solid rgba(0, 245, 255, 0.3);\r\n  border-top: 3px solid #00f5ff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n.loading {\r\n  display: inline-block;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n.loading-spinner.loading-sm {\r\n  border: 2px solid transparent;\r\n  border-top: 2px solid currentColor;\r\n  border-radius: 50%;\r\n  width: 1rem;\r\n  height: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n/* 自定义动画 */\r\n@keyframes fade-in-up {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(30px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes fade-in {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n@keyframes scale-in {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.9);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n@keyframes bounce-gentle {\r\n  0%, 20%, 50%, 80%, 100% {\r\n    transform: translateY(0);\r\n  }\r\n  40% {\r\n    transform: translateY(-5px);\r\n  }\r\n  60% {\r\n    transform: translateY(-3px);\r\n  }\r\n}\r\n\r\n.animate-fade-in-up {\r\n  animation: fade-in-up 0.6s ease-out;\r\n}\r\n\r\n.animate-fade-in {\r\n  animation: fade-in 0.4s ease-out;\r\n}\r\n\r\n.animate-scale-in {\r\n  animation: scale-in 0.3s ease-out;\r\n}\r\n\r\n.animate-bounce-gentle {\r\n  animation: bounce-gentle 2s infinite;\r\n}\r\n\r\n.animation-delay-200 {\r\n  animation-delay: 0.2s;\r\n}\r\n\r\n.animation-delay-400 {\r\n  animation-delay: 0.4s;\r\n}\r\n\r\n/* 玻璃拟态效果 */\r\n.glass-card-dark {\r\n  background: rgba(0, 0, 0, 0.7);\r\n  backdrop-filter: blur(20px);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n/* 复选框样式 */\r\ninput[type=\"checkbox\"] {\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n}\r\n\r\ninput[type=\"checkbox\"]:checked {\r\n  background-color: #00f5ff;\r\n  border-color: #00f5ff;\r\n}\r\n\r\ninput[type=\"checkbox\"]:checked::before {\r\n  content: \"✓\";\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  color: white;\r\n  font-size: 0.75rem;\r\n  font-weight: bold;\r\n}\r\n</style> "],"version":3}