{"file":"orders-DyUk0Ubk.js","mappings":"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","names":["orders","_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrInterpolate","_ssrRenderList","_ssrRenderClass","_unref","_createVNode"],"sources":["../../../../pages/orders.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden\">\r\n    <!-- 背景装饰效果 -->\r\n    <div class=\"fixed inset-0 pointer-events-none\">\r\n      <div class=\"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse\"></div>\r\n      <div class=\"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000\"></div>\r\n      <div class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow\"></div>\r\n    </div>\r\n\r\n    <!-- 导航栏 -->\r\n    <nav class=\"relative z-10\">\r\n      <div class=\"container mx-auto px-6 py-6\">\r\n        <div class=\"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n          <div class=\"flex items-center justify-between\">\r\n            <div class=\"flex items-center space-x-6\">\r\n              <!-- Logo -->\r\n              <AppLogo size=\"medium\" :show-decorations=\"false\" />\r\n              <div class=\"h-6 w-px bg-gray-600\"></div>\r\n              \r\n              <!-- 帅气的返回按钮 -->\r\n              <button \r\n                @click=\"goBack\" \r\n                class=\"group relative inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:-translate-y-1 hover:scale-105 overflow-hidden\"\r\n              >\r\n                <!-- 按钮背景渐变和光效 -->\r\n                <div class=\"absolute inset-0 bg-gradient-to-r from-cyan-600/20 via-blue-600/20 to-purple-600/20 rounded-xl transition-all duration-300 group-hover:from-cyan-500/30 group-hover:via-blue-500/30 group-hover:to-purple-500/30\"></div>\r\n                <div class=\"absolute inset-0 border-2 border-cyan-500/30 rounded-xl transition-all duration-300 group-hover:border-cyan-400/60 group-hover:shadow-lg group-hover:shadow-cyan-400/25\"></div>\r\n                \r\n                <!-- 动态粒子效果 -->\r\n                <div class=\"absolute inset-0 rounded-xl overflow-hidden\">\r\n                  <div class=\"absolute w-2 h-2 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping\" style=\"top: 20%; left: 15%; animation-delay: 0s;\"></div>\r\n                  <div class=\"absolute w-1 h-1 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping\" style=\"top: 60%; left: 80%; animation-delay: 0.2s;\"></div>\r\n                  <div class=\"absolute w-1.5 h-1.5 bg-purple-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping\" style=\"top: 80%; left: 30%; animation-delay: 0.4s;\"></div>\r\n                </div>\r\n                \r\n                <!-- 左侧箭头图标 -->\r\n                <div class=\"relative flex items-center\">\r\n                  <div class=\"w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500/20 to-blue-500/20 flex items-center justify-center mr-3 transition-all duration-300 group-hover:from-cyan-400/40 group-hover:to-blue-400/40 group-hover:scale-110\">\r\n                    <i class=\"bi bi-arrow-left text-cyan-400 text-lg transition-all duration-300 group-hover:text-white group-hover:-translate-x-1\"></i>\r\n                  </div>\r\n                  \r\n                  <!-- 文字和副标题 -->\r\n                  <div class=\"text-left\">\r\n                    <div class=\"text-white text-sm font-semibold transition-all duration-300 group-hover:text-cyan-100\">返回</div>\r\n                    <div class=\"text-gray-400 text-xs transition-all duration-300 group-hover:text-cyan-300\">Back</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 右侧装饰线条 -->\r\n                <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\r\n                  <div class=\"flex flex-col space-y-1 opacity-60 group-hover:opacity-100 transition-opacity duration-300\">\r\n                    <div class=\"w-6 h-0.5 bg-gradient-to-r from-cyan-400 to-transparent rounded-full transition-all duration-300 group-hover:w-8\"></div>\r\n                    <div class=\"w-4 h-0.5 bg-gradient-to-r from-blue-400 to-transparent rounded-full transition-all duration-300 group-hover:w-6 delay-75\"></div>\r\n                    <div class=\"w-2 h-0.5 bg-gradient-to-r from-purple-400 to-transparent rounded-full transition-all duration-300 group-hover:w-4 delay-150\"></div>\r\n                  </div>\r\n                </div>\r\n              </button>\r\n            </div>\r\n            <nav class=\"text-sm text-gray-400\">\r\n              <NuxtLink to=\"/\" class=\"hover:text-cyan-400\">首页</NuxtLink>\r\n              <i class=\"bi bi-chevron-right mx-2 text-cyan-400\"></i>\r\n              <span class=\"text-white font-medium\">我的订单</span>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n\r\n    <!-- 页面头部 -->\r\n    <section class=\"relative z-10\">\r\n      <div class=\"container mx-auto px-6 py-8\">\r\n        <div class=\"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n          <div class=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 class=\"text-4xl font-bold text-white mb-3 flex items-center gap-3\">\r\n                <i class=\"bi bi-bag-check text-cyan-400 text-3xl\"></i>\r\n                我的订单\r\n              </h1>\r\n              <p class=\"text-gray-300 text-lg\">查看和管理您的订单历史</p>\r\n            </div>\r\n            <div class=\"text-right\">\r\n              <div class=\"text-3xl font-bold text-cyan-400\">{{ orders.length }}</div>\r\n              <div class=\"text-gray-400 text-sm\">订单总数</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 订单筛选 -->\r\n    <section class=\"relative z-10\">\r\n      <div class=\"container mx-auto px-6 py-4\">\r\n        <div class=\"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n          <div class=\"flex flex-wrap items-center gap-4\">\r\n            <div class=\"flex items-center gap-2\">\r\n              <i class=\"bi bi-funnel text-cyan-400\"></i>\r\n              <span class=\"text-white font-medium\">按状态筛选：</span>\r\n            </div>\r\n            <div class=\"flex flex-wrap gap-2\">\r\n              <button v-for=\"status in orderStatuses\" :key=\"status.value\"\r\n                      @click=\"selectedStatus = status.value\"\r\n                      :class=\"[\r\n                        'px-4 py-2 text-sm font-medium rounded-lg transition-all duration-300',\r\n                        selectedStatus === status.value \r\n                          ? 'bg-cyan-500/20 text-cyan-300 border border-cyan-400/40' \r\n                          : 'text-gray-300 hover:bg-white/5 hover:text-white border border-transparent'\r\n                      ]\">\r\n                <i :class=\"status.icon\" class=\"mr-2\"></i>\r\n                {{ status.label }}\r\n                <span class=\"ml-2 text-xs opacity-75\">({{ getOrderCountByStatus(status.value) }})</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 订单列表 -->\r\n    <main class=\"container mx-auto px-6 py-8 relative z-10\">\r\n      <div v-if=\"loading\" class=\"text-center py-16\">\r\n        <div class=\"inline-flex flex-col items-center glass-card-dark rounded-2xl border border-cyan-500/30 p-16 shadow-2xl shadow-cyan-500/20\">\r\n          <div class=\"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-8\"></div>\r\n          <p class=\"text-2xl font-medium text-white\">正在加载您的订单...</p>\r\n          <p class=\"text-gray-400 mt-2\">请稍候</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-else-if=\"filteredOrders.length === 0\" class=\"text-center py-16\">\r\n        <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 p-20 shadow-2xl shadow-cyan-500/20 max-w-lg mx-auto\">\r\n          <div class=\"text-8xl mb-8 text-cyan-400 opacity-50\">\r\n            <i class=\"bi bi-bag-x\"></i>\r\n          </div>\r\n          <h3 class=\"text-3xl font-bold text-white mb-4\">未找到订单</h3>\r\n          <p class=\"text-gray-400 mb-8 text-lg\">\r\n            {{ selectedStatus === 'all' ? \"您还没有下过任何订单\" : `没有状态为\"${getStatusLabel(selectedStatus)}\"的订单` }}\r\n          </p>\r\n          <div class=\"space-y-4\">\r\n            <NuxtLink to=\"/products\" \r\n                      class=\"inline-flex items-center justify-center px-8 py-4 bg-cyan-600 text-white font-medium rounded-xl hover:bg-cyan-500 transition-all duration-300 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40\">\r\n              <i class=\"bi bi-plus-circle mr-2\"></i>\r\n              开始购物\r\n            </NuxtLink>\r\n            <button v-if=\"selectedStatus !== 'all'\" @click=\"selectedStatus = 'all'\"\r\n                    class=\"block w-full px-8 py-3 border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300\">\r\n              查看所有订单\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-else class=\"space-y-6\">\r\n        <div v-for=\"order in filteredOrders\" :key=\"order.id\" \r\n             class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 overflow-hidden hover:border-cyan-400/50 transition-colors duration-300\">\r\n          <!-- 订单头部 -->\r\n          <div class=\"px-8 py-6 border-b border-gray-700/50 bg-gray-800/30\">\r\n            <div class=\"flex flex-wrap items-center justify-between gap-4\">\r\n              <div class=\"flex items-center gap-4\">\r\n                <div>\r\n                  <h3 class=\"text-xl font-bold text-white mb-1\">订单 #{{ order.orderNumber }}</h3>\r\n                  <p class=\"text-gray-400 text-sm\">下单时间：{{ formatDate(order.createdAt) }}</p>\r\n                </div>\r\n                <div :class=\"[\r\n                  'inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium',\r\n                  getStatusStyle(order.status)\r\n                ]\">\r\n                  <i :class=\"getStatusIcon(order.status)\" class=\"mr-2\"></i>\r\n                  {{ getStatusLabel(order.status) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"text-right\">\r\n                <div class=\"text-2xl font-bold text-cyan-400\">¥{{ (order.total * 7.2).toLocaleString() }}</div>\r\n                <div class=\"text-gray-400 text-sm\">{{ order.items.length }} 件商品</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 订单商品 -->\r\n          <div class=\"p-8\">\r\n            <div class=\"space-y-4\">\r\n              <div v-for=\"item in order.items\" :key=\"item.id\" \r\n                   class=\"flex items-center gap-6 p-4 bg-gray-800/20 rounded-xl border border-gray-700/30\">\r\n                <!-- 商品图片 -->\r\n                <div class=\"w-20 h-20 bg-gray-700/50 rounded-lg overflow-hidden\">\r\n                  <!-- 商品图片或placeholder -->\r\n                  <div v-if=\"item.image\" class=\"order-item-image-container\">\r\n                    <img :src=\"item.image\" :alt=\"item.name\" \r\n                         class=\"w-full h-full object-contain p-2\"\r\n                         @error=\"$event.target.style.display = 'none'\">\r\n                  </div>\r\n                  <div v-else class=\"order-item-placeholder\">\r\n                    <i :class=\"getOrderItemIcon(item.name)\"></i>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- 商品信息 -->\r\n                <div class=\"flex-1\">\r\n                  <h4 class=\"font-semibold text-white text-lg mb-1\">{{ item.name }}</h4>\r\n                  <p class=\"text-gray-400 text-sm mb-2\">{{ item.brand }}</p>\r\n                  <div class=\"flex items-center gap-4\">\r\n                    <span class=\"text-cyan-400 font-semibold\">¥{{ (item.price * 7.2).toLocaleString() }}</span>\r\n                    <span class=\"text-gray-400 text-sm\">数量：{{ item.quantity }}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- 商品操作 -->\r\n                <div class=\"flex flex-col gap-2\">\r\n                  <NuxtLink :to=\"`/products/${item.id}`\"\r\n                            class=\"px-4 py-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-medium rounded-lg transition-colors duration-300 text-center\">\r\n                    查看商品\r\n                  </NuxtLink>\r\n                  <button v-if=\"order.status === 'delivered'\" \r\n                          @click=\"showReviewModal(item)\"\r\n                          class=\"px-4 py-2 text-sm border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300\">\r\n                    写评价\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 订单操作 -->\r\n          <div class=\"px-8 py-6 border-t border-gray-700/50 bg-gray-800/20\">\r\n            <div class=\"flex flex-wrap items-center justify-between gap-4\">\r\n              <!-- 订单状态追踪 -->\r\n              <div class=\"flex items-center gap-6\">\r\n                <div class=\"flex items-center gap-3\">\r\n                  <i class=\"bi bi-truck text-cyan-400\"></i>\r\n                  <span class=\"text-white font-medium\">物流单号：</span>\r\n                  <span class=\"text-gray-400\">{{ order.trackingNumber || '暂无' }}</span>\r\n                </div>\r\n                <div v-if=\"order.estimatedDelivery\" class=\"flex items-center gap-3\">\r\n                  <i class=\"bi bi-calendar-event text-cyan-400\"></i>\r\n                  <span class=\"text-white font-medium\">预计送达：</span>\r\n                  <span class=\"text-gray-400\">{{ formatDate(order.estimatedDelivery) }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 操作按钮 -->\r\n              <div class=\"flex flex-wrap items-center gap-3\">\r\n                <button @click=\"downloadInvoice(order)\" \r\n                        class=\"px-4 py-2 text-sm border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300 flex items-center gap-2\">\r\n                  <i class=\"bi bi-download\"></i>\r\n                  下载发票\r\n                </button>\r\n                <button v-if=\"order.status === 'pending' || order.status === 'processing'\" \r\n                        @click=\"cancelOrder(order.id)\"\r\n                        class=\"px-4 py-2 text-sm border border-red-600 hover:border-red-500 text-red-300 hover:text-red-200 font-medium rounded-lg transition-colors duration-300 flex items-center gap-2\">\r\n                  <i class=\"bi bi-x-circle\"></i>\r\n                  取消订单\r\n                </button>\r\n                <button v-if=\"order.status === 'delivered'\" \r\n                        @click=\"reorderItems(order)\"\r\n                        class=\"px-4 py-2 text-sm bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 flex items-center gap-2\">\r\n                  <i class=\"bi bi-arrow-repeat\"></i>\r\n                  再次购买\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <!-- 评价弹窗 -->\r\n    <div v-if=\"showReviewForm\" class=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 p-8 max-w-md w-full\">\r\n        <h3 class=\"text-2xl font-bold text-white mb-6\">写商品评价</h3>\r\n        <div v-if=\"reviewItem\" class=\"mb-6\">\r\n          <div class=\"flex items-center gap-4 mb-4\">\r\n            <img :src=\"reviewItem.image\" :alt=\"reviewItem.name\" class=\"w-16 h-16 object-contain bg-gray-700/50 rounded-lg p-2\">\r\n            <div>\r\n              <h4 class=\"font-semibold text-white\">{{ reviewItem.name }}</h4>\r\n              <p class=\"text-gray-400 text-sm\">{{ reviewItem.brand }}</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"space-y-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-white mb-2\">评分</label>\r\n              <div class=\"flex gap-2\">\r\n                <button v-for=\"star in 5\" :key=\"star\"\r\n                        @click=\"reviewRating = star\"\r\n                        :class=\"star <= reviewRating ? 'text-yellow-400' : 'text-gray-600'\"\r\n                        class=\"text-2xl hover:text-yellow-400 transition-colors duration-200\">\r\n                  <i class=\"bi bi-star-fill\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label class=\"block text-sm font-medium text-white mb-2\">评价内容</label>\r\n              <textarea v-model=\"reviewComment\" \r\n                        rows=\"4\" placeholder=\"分享您对这个产品的使用体验...\"\r\n                        class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none\"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"flex gap-3\">\r\n          <button @click=\"submitReview\" \r\n                  class=\"flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300\">\r\n            提交评价\r\n          </button>\r\n          <button @click=\"closeReviewModal\" \r\n                  class=\"flex-1 border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300\">\r\n            取消\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { createDiscreteApi } from 'naive-ui'\r\nimport { ordersApi } from '~/utils/api/orders'\r\n\r\n// 创建消息API\r\nconst { message } = createDiscreteApi(['message'])\r\n\r\n// 消息函数\r\nconst success = (content) => {\r\n  message.success(content, { duration: 3000 })\r\n}\r\n\r\nconst error = (content) => {\r\n  message.error(content, { duration: 4000 })\r\n}\r\n\r\nconst info = (content) => {\r\n  message.info(content, { duration: 3000 })\r\n}\r\n\r\n// 响应式数据\r\nconst orders = ref([])\r\nconst loading = ref(true)\r\nconst selectedStatus = ref('all')\r\nconst showReviewForm = ref(false)\r\nconst reviewItem = ref(null)\r\nconst reviewRating = ref(5)\r\nconst reviewComment = ref('')\r\n\r\n// 订单状态列表\r\nconst orderStatuses = ref([\r\n  { value: 'all', label: '全部订单', icon: 'bi-list-ul' },\r\n  { value: 'pending', label: '待支付', icon: 'bi-clock' },\r\n  { value: 'processing', label: '处理中', icon: 'bi-gear' },\r\n  { value: 'shipped', label: '已发货', icon: 'bi-truck' },\r\n  { value: 'delivered', label: '已送达', icon: 'bi-check-circle' },\r\n  { value: 'cancelled', label: '已取消', icon: 'bi-x-circle' }\r\n])\r\n\r\n// 计算属性\r\nconst filteredOrders = computed(() => {\r\n  if (selectedStatus.value === 'all') {\r\n    return orders.value\r\n  }\r\n  return orders.value.filter(order => order.status === selectedStatus.value)\r\n})\r\n\r\n// 返回功能\r\nconst goBack = () => {\r\n  window.history.back()\r\n}\r\n\r\n// 方法\r\nconst getOrderCountByStatus = (status) => {\r\n  if (status === 'all') return orders.value.length\r\n  return orders.value.filter(order => order.status === status).length\r\n}\r\n\r\nconst getStatusLabel = (status) => {\r\n  const statusObj = orderStatuses.value.find(s => s.value === status)\r\n  return statusObj?.label || status\r\n}\r\n\r\nconst getStatusIcon = (status) => {\r\n  const statusObj = orderStatuses.value.find(s => s.value === status)\r\n  return statusObj?.icon || 'bi-circle'\r\n}\r\n\r\nconst getStatusStyle = (status) => {\r\n  const styles = {\r\n    pending: 'bg-yellow-500/20 text-yellow-300 border border-yellow-500/30',\r\n    processing: 'bg-blue-500/20 text-blue-300 border border-blue-500/30',\r\n    shipped: 'bg-purple-500/20 text-purple-300 border border-purple-500/30',\r\n    delivered: 'bg-green-500/20 text-green-300 border border-green-500/30',\r\n    cancelled: 'bg-red-500/20 text-red-300 border border-red-500/30'\r\n  }\r\n  return styles[status] || 'bg-gray-500/20 text-gray-300 border border-gray-500/30'\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('zh-CN', { \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric' \r\n  })\r\n}\r\n\r\nconst showReviewModal = (item) => {\r\n  reviewItem.value = item\r\n  reviewRating.value = 5\r\n  reviewComment.value = ''\r\n  showReviewForm.value = true\r\n}\r\n\r\nconst closeReviewModal = () => {\r\n  showReviewForm.value = false\r\n  reviewItem.value = null\r\n  reviewRating.value = 5\r\n  reviewComment.value = ''\r\n}\r\n\r\nconst submitReview = () => {\r\n  // 提交评价逻辑\r\n  console.log('提交评价:', {\r\n    item: reviewItem.value,\r\n    rating: reviewRating.value,\r\n    comment: reviewComment.value\r\n  })\r\n  \r\n  success('感谢您的评价！')\r\n  closeReviewModal()\r\n}\r\n\r\nconst downloadInvoice = (order) => {\r\n  // 下载发票逻辑\r\n  console.log('下载订单发票:', order.orderNumber)\r\n  success('发票下载已开始！')\r\n}\r\n\r\nconst cancelOrder = async (orderId) => {\r\n  if (confirm('您确定要取消这个订单吗？')) {\r\n    try {\r\n      const response = await ordersApi.cancelOrder(orderId)\r\n      if (response.success) {\r\n        // 更新本地订单状态\r\n        const orderIndex = orders.value.findIndex(order => order.id === orderId)\r\n        if (orderIndex > -1) {\r\n          orders.value[orderIndex].status = 'cancelled'\r\n        }\r\n        success('订单取消成功！')\r\n      } else {\r\n        error(response.message || '取消订单失败，请重试。')\r\n      }\r\n    } catch (error) {\r\n      console.error('取消订单失败:', error)\r\n      error('取消订单失败，请重试。')\r\n    }\r\n  }\r\n}\r\n\r\nconst reorderItems = (order) => {\r\n  // 重新下单逻辑\r\n  try {\r\n    // 将商品添加到购物车\r\n    const cartItems = JSON.parse(localStorage.getItem('cartItems') || '[]')\r\n    \r\n    order.items.forEach(item => {\r\n      const existingItemIndex = cartItems.findIndex(cartItem => cartItem.id === item.id)\r\n      if (existingItemIndex > -1) {\r\n        cartItems[existingItemIndex].quantity += item.quantity\r\n      } else {\r\n        cartItems.push({ ...item })\r\n      }\r\n    })\r\n    \r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems))\r\n    \r\n    // 跳转到结账页面\r\n    navigateTo('/checkout')\r\n  } catch (error) {\r\n    console.error('重新下单失败:', error)\r\n    error('重新下单失败，请重试。')\r\n  }\r\n}\r\n\r\n// 获取订单商品图标\r\nconst getOrderItemIcon = (itemName) => {\r\n  if (itemName.includes('RTX') || itemName.includes('RX') || itemName.includes('显卡')) {\r\n    return 'bi bi-gpu-card text-cyan-400 text-xl'\r\n  }\r\n  if (itemName.includes('Intel') || itemName.includes('AMD') || itemName.includes('Ryzen') || itemName.includes('Core')) {\r\n    return 'bi bi-cpu text-orange-400 text-xl'\r\n  }\r\n  if (itemName.includes('主板') || itemName.includes('STRIX') || itemName.includes('MAG')) {\r\n    return 'bi bi-motherboard text-green-400 text-xl'\r\n  }\r\n  if (itemName.includes('电源') || itemName.includes('PSU') || itemName.includes('Power')) {\r\n    return 'bi bi-lightning text-yellow-400 text-xl'\r\n  }\r\n  return 'bi bi-pc-display text-gray-400 text-xl'\r\n}\r\n\r\n// 页面加载时获取订单数据\r\nonMounted(async () => {\r\n  loading.value = true\r\n  try {\r\n    const response = await ordersApi.getMyOrders()\r\n    if (response.success && response.data) {\r\n      orders.value = response.data.map(order => ({\r\n        id: order.id,\r\n        orderNumber: `ORD-${order.id.toString().padStart(8, '0')}`,\r\n        createdAt: order.created_at,\r\n        status: order.status,\r\n        total: order.total_price,\r\n        trackingNumber: null, // 数据库暂无此字段\r\n        estimatedDelivery: null, // 数据库暂无此字段\r\n        items: [\r\n          {\r\n            id: order.config?.id || order.id,\r\n            name: order.config_name || '配置商品',\r\n            brand: order.merchant_name || '未知商家',\r\n            price: order.config_price || order.total_price / order.quantity,\r\n            quantity: order.quantity,\r\n            image: order.config_images && order.config_images.length > 0 ? order.config_images[0] : ''\r\n          }\r\n        ]\r\n      }))\r\n    } else {\r\n      orders.value = []\r\n    }\r\n  } catch (error) {\r\n    console.error('获取订单失败:', error)\r\n    orders.value = []\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n})\r\n\r\n// 页面元数据\r\nuseHead({\r\n  title: '我的订单 - xlCig',\r\n  meta: [\r\n    { name: 'description', content: '查看您的订单状态和历史记录' }\r\n  ]\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* 订单商品图片容器 */\r\n.order-item-image-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n/* 订单商品Placeholder样式 */\r\n.order-item-placeholder {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(135deg, \r\n    rgba(0, 245, 255, 0.05) 0%, \r\n    rgba(0, 128, 255, 0.05) 50%, \r\n    rgba(168, 85, 247, 0.05) 100%);\r\n}\r\n\r\n.order-item-placeholder i {\r\n  font-size: 1.25rem;\r\n  text-shadow: 0 0 8px currentColor;\r\n  animation: orderItemFloat 3s ease-in-out infinite;\r\n}\r\n\r\n/* 订单商品图标动画 */\r\n@keyframes orderItemFloat {\r\n  0%, 100% {\r\n    transform: scale(1);\r\n    filter: drop-shadow(0 0 8px currentColor);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n    filter: drop-shadow(0 0 12px currentColor);\r\n  }\r\n}\r\n</style> "],"version":3}