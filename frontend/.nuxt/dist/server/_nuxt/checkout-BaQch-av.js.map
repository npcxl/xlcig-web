{"version":3,"file":"checkout-BaQch-av.js","sources":["../../../../pages/checkout.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden\">\r\n    <!-- 背景装饰效果 -->\r\n    <div class=\"fixed inset-0 pointer-events-none\">\r\n      <div class=\"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse\"></div>\r\n      <div class=\"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000\"></div>\r\n      <div class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow\"></div>\r\n    </div>\r\n\r\n    <!-- 导航栏 -->\r\n    <nav class=\"relative z-10\">\r\n      <div class=\"container mx-auto px-6 py-6\">\r\n        <div class=\"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n          <div class=\"flex items-center justify-between\">\r\n            <div class=\"flex items-center space-x-6\">\r\n              <!-- Logo -->\r\n              <AppLogo size=\"medium\" :show-decorations=\"false\" />\r\n              <div class=\"h-6 w-px bg-gray-600\"></div>\r\n              <button @click=\"$router.go(-1)\" \r\n                      class=\"inline-flex items-center text-cyan-400 hover:text-cyan-300 transition-colors duration-200\">\r\n                <i class=\"bi bi-arrow-left mr-2 text-lg\"></i>\r\n                <span class=\"text-sm font-medium\">返回</span>\r\n              </button>\r\n            </div>\r\n            <nav class=\"text-sm text-gray-400\">\r\n              <NuxtLink to=\"/\" class=\"hover:text-cyan-400\">首页</NuxtLink>\r\n              <i class=\"bi bi-chevron-right mx-2 text-cyan-400\"></i>\r\n              <NuxtLink to=\"/products\" class=\"hover:text-cyan-400\">产品中心</NuxtLink>\r\n              <i class=\"bi bi-chevron-right mx-2 text-cyan-400\"></i>\r\n              <span class=\"text-white font-medium\">购物车结算</span>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n\r\n    <!-- 主要内容 -->\r\n    <div class=\"container mx-auto px-6 py-8 relative z-10\">\r\n      <div class=\"grid lg:grid-cols-3 gap-8\">\r\n        <!-- 左侧：购物车和表单 -->\r\n        <div class=\"lg:col-span-2 space-y-8\">\r\n          <!-- 购物车商品 -->\r\n          <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-cart text-cyan-400\"></i>\r\n                购物车\r\n              </h2>\r\n              <p class=\"text-gray-300 mt-2\">购物车中有 {{ cartItems.length }} 件商品</p>\r\n            </div>\r\n            \r\n            <div class=\"p-8\">\r\n              <div v-if=\"cartItems.length === 0\" class=\"text-center py-12\">\r\n                <div class=\"text-6xl mb-4 text-gray-500\">\r\n                  <i class=\"bi bi-cart-x\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-semibold text-white mb-2\">购物车为空</h3>\r\n                <p class=\"text-gray-400 mb-6\">添加一些产品来继续购物</p>\r\n                <NuxtLink to=\"/products\" \r\n                          class=\"inline-flex items-center px-6 py-3 bg-cyan-600 text-white font-medium rounded-lg hover:bg-cyan-500 transition-all duration-300\">\r\n                  <i class=\"bi bi-plus-circle mr-2\"></i>\r\n                  添加产品\r\n                </NuxtLink>\r\n              </div>\r\n\r\n              <div v-else class=\"space-y-6\">\r\n                <div v-for=\"item in cartItems\" :key=\"item.id\" \r\n                     class=\"flex items-center gap-6 p-6 bg-gray-800/30 rounded-2xl border border-gray-700/30 hover:border-cyan-500/50 transition-colors duration-300\">\r\n                  <!-- 产品图片 -->\r\n                  <div class=\"w-24 h-24 bg-gray-700/50 rounded-lg overflow-hidden\">\r\n                    <img :src=\"item.image\" :alt=\"item.name\" class=\"w-full h-full object-contain p-2\">\r\n                  </div>\r\n                  \r\n                  <!-- 产品信息 -->\r\n                  <div class=\"flex-1\">\r\n                    <h3 class=\"font-semibold text-white text-lg mb-1\">{{ item.name }}</h3>\r\n                    <p class=\"text-gray-400 text-sm mb-2\">{{ item.brand }}</p>\r\n                    <div class=\"flex items-center gap-4\">\r\n                      <span class=\"text-2xl font-bold text-cyan-400\">¥{{ (item.price * 7.2).toLocaleString() }}</span>\r\n                      <span v-if=\"item.originalPrice && item.originalPrice > item.price\" \r\n                            class=\"text-sm text-gray-500 line-through\">\r\n                        ¥{{ (item.originalPrice * 7.2).toLocaleString() }}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <!-- 数量控制 -->\r\n                  <div class=\"flex items-center gap-3\">\r\n                    <button @click=\"decreaseQuantity(item.id)\" \r\n                            class=\"w-10 h-10 flex items-center justify-center bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors duration-200\">\r\n                      <i class=\"bi bi-dash\"></i>\r\n                    </button>\r\n                    <span class=\"w-12 text-center text-white font-semibold text-lg\">{{ item.quantity }}</span>\r\n                    <button @click=\"increaseQuantity(item.id)\" \r\n                            class=\"w-10 h-10 flex items-center justify-center bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors duration-200\">\r\n                      <i class=\"bi bi-plus\"></i>\r\n                    </button>\r\n                  </div>\r\n\r\n                  <!-- 删除按钮 -->\r\n                  <button @click=\"removeFromCart(item.id)\" \r\n                          class=\"w-10 h-10 flex items-center justify-center bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors duration-200\">\r\n                    <i class=\"bi bi-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 用户信息表单 -->\r\n          <div v-if=\"cartItems.length > 0\" class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-person text-cyan-400\"></i>\r\n                客户信息\r\n              </h2>\r\n            </div>\r\n            \r\n            <div class=\"p-8\">\r\n              <form @submit.prevent=\"submitOrder\" class=\"space-y-6\">\r\n                <div class=\"grid md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">姓氏</label>\r\n                    <input v-model=\"customerInfo.firstName\" \r\n                           type=\"text\" required placeholder=\"请输入姓氏\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">名字</label>\r\n                    <input v-model=\"customerInfo.lastName\" \r\n                           type=\"text\" required placeholder=\"请输入名字\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">电子邮箱</label>\r\n                  <input v-model=\"customerInfo.email\" \r\n                         type=\"email\" required placeholder=\"请输入邮箱地址\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">手机号码</label>\r\n                  <input v-model=\"customerInfo.phone\" \r\n                         type=\"tel\" required placeholder=\"请输入手机号码\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">收货地址</label>\r\n                  <textarea v-model=\"customerInfo.address\" \r\n                            required rows=\"3\" placeholder=\"请输入详细收货地址\"\r\n                            class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none\"></textarea>\r\n                </div>\r\n\r\n                <div class=\"grid md:grid-cols-3 gap-6\">\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">城市</label>\r\n                    <input v-model=\"customerInfo.city\" \r\n                           type=\"text\" required placeholder=\"请输入城市\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">省份</label>\r\n                    <input v-model=\"customerInfo.state\" \r\n                           type=\"text\" required placeholder=\"请输入省份\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">邮政编码</label>\r\n                    <input v-model=\"customerInfo.zipCode\" \r\n                           type=\"text\" required placeholder=\"请输入邮编\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 支付方式 -->\r\n          <div v-if=\"cartItems.length > 0\" class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-3xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-credit-card text-cyan-400\"></i>\r\n                支付方式\r\n              </h2>\r\n            </div>\r\n            \r\n            <div class=\"p-8\">\r\n              <div class=\"grid md:grid-cols-3 gap-4 mb-6\">\r\n                <button v-for=\"method in paymentMethods\" :key=\"method.id\"\r\n                        @click=\"selectedPaymentMethod = method.id\"\r\n                        :class=\"[\r\n                          'p-6 border-2 rounded-xl transition-all duration-300 text-center',\r\n                          selectedPaymentMethod === method.id \r\n                            ? 'border-cyan-500 bg-cyan-500/20 text-cyan-300' \r\n                            : 'border-gray-600/50 hover:border-cyan-500/50 text-gray-300 hover:text-white'\r\n                        ]\">\r\n                  <i :class=\"method.icon\" class=\"text-3xl mb-3\"></i>\r\n                  <div class=\"font-semibold\">{{ method.name }}</div>\r\n                  <div class=\"text-sm opacity-75 mt-1\">{{ method.description }}</div>\r\n                </button>\r\n              </div>\r\n\r\n              <!-- 信用卡信息 -->\r\n              <div v-if=\"selectedPaymentMethod === 'card'\" class=\"space-y-6\">\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">银行卡号</label>\r\n                  <input v-model=\"paymentInfo.cardNumber\" \r\n                         type=\"text\" placeholder=\"6222 0200 0000 0000\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n                \r\n                <div class=\"grid md:grid-cols-3 gap-6\">\r\n                  <div class=\"md:col-span-2\">\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">有效期</label>\r\n                    <input v-model=\"paymentInfo.expiryDate\" \r\n                           type=\"text\" placeholder=\"MM/YY\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                  <div>\r\n                    <label class=\"block text-sm font-medium text-white mb-2\">CVV</label>\r\n                    <input v-model=\"paymentInfo.cvv\" \r\n                           type=\"text\" placeholder=\"123\"\r\n                           class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label class=\"block text-sm font-medium text-white mb-2\">持卡人姓名</label>\r\n                  <input v-model=\"paymentInfo.cardholderName\" \r\n                         type=\"text\" placeholder=\"张三\"\r\n                         class=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400\">\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 支付宝信息 -->\r\n              <div v-if=\"selectedPaymentMethod === 'alipay'\" class=\"text-center py-8\">\r\n                <div class=\"text-6xl text-blue-500 mb-4\">\r\n                  <i class=\"bi bi-wallet2\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-semibold text-white mb-2\">支付宝支付</h3>\r\n                <p class=\"text-gray-400 mb-6\">您将跳转到支付宝完成支付</p>\r\n              </div>\r\n\r\n              <!-- 微信支付信息 -->\r\n              <div v-if=\"selectedPaymentMethod === 'wechat'\" class=\"text-center py-8\">\r\n                <div class=\"text-6xl text-green-500 mb-4\">\r\n                  <i class=\"bi bi-wechat\"></i>\r\n                </div>\r\n                <h3 class=\"text-xl font-semibold text-white mb-2\">微信支付</h3>\r\n                <p class=\"text-gray-400 mb-6\">扫码支付或使用微信App支付</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 右侧：订单摘要 -->\r\n        <div class=\"lg:col-span-1\">\r\n          <div class=\"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 sticky top-6\">\r\n            <div class=\"px-8 py-6 border-b border-gray-700/50\">\r\n              <h2 class=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n                <i class=\"bi bi-receipt text-cyan-400\"></i>\r\n                订单摘要\r\n              </h2>\r\n            </div>\r\n            \r\n            <div class=\"p-8 space-y-6\">\r\n              <!-- 订单详情 -->\r\n              <div class=\"space-y-4\">\r\n                <div class=\"flex justify-between items-center\">\r\n                  <span class=\"text-gray-300\">商品小计</span>\r\n                  <span class=\"text-white font-semibold\">¥{{ (subtotal * 7.2).toLocaleString() }}</span>\r\n                </div>\r\n                <div class=\"flex justify-between items-center\">\r\n                  <span class=\"text-gray-300\">运费</span>\r\n                  <span class=\"text-white font-semibold\">¥{{ (shipping * 7.2).toLocaleString() }}</span>\r\n                </div>\r\n                <div class=\"flex justify-between items-center\">\r\n                  <span class=\"text-gray-300\">税费</span>\r\n                  <span class=\"text-white font-semibold\">¥{{ (tax * 7.2).toLocaleString() }}</span>\r\n                </div>\r\n                <div class=\"border-t border-gray-700/50 pt-4\">\r\n                  <div class=\"flex justify-between items-center\">\r\n                    <span class=\"text-xl font-semibold text-white\">总计</span>\r\n                    <span class=\"text-2xl font-bold text-cyan-400\">¥{{ (total * 7.2).toLocaleString() }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 优惠码 -->\r\n              <div v-if=\"cartItems.length > 0\">\r\n                <label class=\"block text-sm font-medium text-white mb-2\">优惠券代码</label>\r\n                <div class=\"flex gap-2\">\r\n                  <input v-model=\"couponCode\" \r\n                         type=\"text\" placeholder=\"输入优惠券代码\"\r\n                         class=\"flex-1 px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 text-sm\">\r\n                  <button @click=\"applyCoupon\" \r\n                          class=\"px-4 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 text-sm\">\r\n                    使用\r\n                  </button>\r\n                </div>\r\n                <div v-if=\"appliedCoupon\" class=\"mt-2 text-green-400 text-sm flex items-center gap-1\">\r\n                  <i class=\"bi bi-check-circle\"></i>\r\n                  优惠券\"{{ appliedCoupon }}\"已使用\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 下单按钮 -->\r\n              <button v-if=\"cartItems.length > 0\" \r\n                      @click=\"submitOrder\" \r\n                      :disabled=\"isProcessing\"\r\n                      class=\"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 disabled:cursor-not-allowed\">\r\n                <i v-if=\"!isProcessing\" class=\"bi bi-credit-card\"></i>\r\n                <div v-else class=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                {{ isProcessing ? '处理中...' : '确认下单' }}\r\n              </button>\r\n\r\n              <!-- 安全保障 -->\r\n              <div class=\"text-center pt-6 border-t border-gray-700/50\">\r\n                <div class=\"flex items-center justify-center gap-4 text-gray-400 text-sm\">\r\n                  <div class=\"flex items-center gap-1\">\r\n                    <i class=\"bi bi-shield-check text-green-400\"></i>\r\n                    <span>安全</span>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-1\">\r\n                    <i class=\"bi bi-lock text-green-400\"></i>\r\n                    <span>加密</span>\r\n                  </div>\r\n                  <div class=\"flex items-center gap-1\">\r\n                    <i class=\"bi bi-award text-green-400\"></i>\r\n                    <span>认证</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 订单成功弹窗 -->\r\n    <div v-if=\"showSuccessModal\" class=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div class=\"glass-card-dark rounded-2xl border border-green-500/30 shadow-2xl shadow-green-500/20 p-8 max-w-md w-full text-center\">\r\n        <div class=\"text-6xl text-green-400 mb-6\">\r\n          <i class=\"bi bi-check-circle\"></i>\r\n        </div>\r\n        <h3 class=\"text-2xl font-bold text-white mb-4\">订单提交成功！</h3>\r\n        <p class=\"text-gray-300 mb-2\">订单号：#{{ orderNumber }}</p>\r\n        <p class=\"text-gray-400 mb-8\">感谢您的购买，您将很快收到确认邮件。</p>\r\n        <div class=\"space-y-3\">\r\n          <button @click=\"goToOrders\" \r\n                  class=\"w-full bg-green-600 hover:bg-green-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300\">\r\n            查看订单\r\n          </button>\r\n          <button @click=\"continueShopping\" \r\n                  class=\"w-full border border-gray-600 hover:border-green-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300\">\r\n            继续购物\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed, onMounted } from 'vue'\r\nimport { createDiscreteApi } from 'naive-ui'\r\n\r\n// 创建消息API\r\nconst { message } = createDiscreteApi(['message'])\r\n\r\n// 消息函数\r\nconst success = (content) => {\r\n  message.success(content, { duration: 3000 })\r\n}\r\n\r\nconst error = (content) => {\r\n  message.error(content, { duration: 4000 })\r\n}\r\n\r\nconst warning = (content) => {\r\n  message.warning(content, { duration: 3000 })\r\n}\r\n\r\n// 响应式数据\r\nconst cartItems = ref([])\r\nconst isProcessing = ref(false)\r\nconst showSuccessModal = ref(false)\r\nconst orderNumber = ref('')\r\n\r\n// 客户信息\r\nconst customerInfo = ref({\r\n  firstName: '',\r\n  lastName: '',\r\n  email: '',\r\n  phone: '',\r\n  address: '',\r\n  city: '',\r\n  state: '',\r\n  zipCode: ''\r\n})\r\n\r\n// 支付信息\r\nconst selectedPaymentMethod = ref('card')\r\nconst paymentInfo = ref({\r\n  cardNumber: '',\r\n  expiryDate: '',\r\n  cvv: '',\r\n  cardholderName: ''\r\n})\r\n\r\n// 优惠码\r\nconst couponCode = ref('')\r\nconst appliedCoupon = ref('')\r\n\r\n// 支付方式\r\nconst paymentMethods = ref([\r\n  {\r\n    id: 'card',\r\n    name: '银行卡支付',\r\n    description: '银联、Visa、万事达',\r\n    icon: 'bi-credit-card'\r\n  },\r\n  {\r\n    id: 'alipay',\r\n    name: '支付宝',\r\n    description: '使用支付宝支付',\r\n    icon: 'bi-wallet2'\r\n  },\r\n  {\r\n    id: 'wechat',\r\n    name: '微信支付',\r\n    description: '微信扫码支付',\r\n    icon: 'bi-wechat'\r\n  }\r\n])\r\n\r\n// 计算属性\r\nconst subtotal = computed(() => {\r\n  return cartItems.value.reduce((sum, item) => sum + (item.price * item.quantity), 0)\r\n})\r\n\r\nconst shipping = computed(() => {\r\n  return subtotal.value > 1000 ? 0 : 50 // 满$1000免费配送\r\n})\r\n\r\nconst tax = computed(() => {\r\n  return Math.round(subtotal.value * 0.08) // 8%税率\r\n})\r\n\r\nconst total = computed(() => {\r\n  return subtotal.value + shipping.value + tax.value\r\n})\r\n\r\n// 方法\r\nconst addToCart = (product, quantity = 1) => {\r\n  const existingItem = cartItems.value.find(item => item.id === product.id)\r\n  if (existingItem) {\r\n    existingItem.quantity += quantity\r\n  } else {\r\n    cartItems.value.push({ ...product, quantity })\r\n  }\r\n  localStorage.setItem('cartItems', JSON.stringify(cartItems.value))\r\n}\r\n\r\nconst removeFromCart = (productId) => {\r\n  cartItems.value = cartItems.value.filter(item => item.id !== productId)\r\n  localStorage.setItem('cartItems', JSON.stringify(cartItems.value))\r\n}\r\n\r\nconst increaseQuantity = (productId) => {\r\n  const item = cartItems.value.find(item => item.id === productId)\r\n  if (item) {\r\n    item.quantity++\r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems.value))\r\n  }\r\n}\r\n\r\nconst decreaseQuantity = (productId) => {\r\n  const item = cartItems.value.find(item => item.id === productId)\r\n  if (item && item.quantity > 1) {\r\n    item.quantity--\r\n    localStorage.setItem('cartItems', JSON.stringify(cartItems.value))\r\n  }\r\n}\r\n\r\nconst applyCoupon = () => {\r\n  // 模拟优惠码验证\r\n  const validCoupons = ['SAVE10', 'WELCOME20', 'TECH15']\r\n  if (validCoupons.includes(couponCode.value.toUpperCase())) {\r\n    appliedCoupon.value = couponCode.value.toUpperCase()\r\n    // 这里可以添加折扣逻辑\r\n  } else {\r\n    error('优惠券代码无效')\r\n  }\r\n}\r\n\r\nconst submitOrder = async () => {\r\n  if (cartItems.value.length === 0) return\r\n  \r\n  isProcessing.value = true\r\n  \r\n  try {\r\n    // 模拟订单处理\r\n    await new Promise(resolve => setTimeout(resolve, 2000))\r\n    \r\n    // 生成订单号\r\n    orderNumber.value = 'ORD' + Date.now().toString().slice(-8)\r\n    \r\n    // 清空购物车\r\n    cartItems.value = []\r\n    localStorage.removeItem('cartItems')\r\n    \r\n    // 显示成功弹窗\r\n    showSuccessModal.value = true\r\n  } catch (error) {\r\n    console.error('订单提交失败:', error)\r\n    error('订单提交失败，请重试。')\r\n  } finally {\r\n    isProcessing.value = false\r\n  }\r\n}\r\n\r\nconst goToOrders = () => {\r\n  showSuccessModal.value = false\r\n  navigateTo('/orders')\r\n}\r\n\r\nconst continueShopping = () => {\r\n  showSuccessModal.value = false\r\n  navigateTo('/products')\r\n}\r\n\r\n// 加载购物车数据\r\nonMounted(() => {\r\n  const savedCartItems = localStorage.getItem('cartItems')\r\n  if (savedCartItems) {\r\n    cartItems.value = JSON.parse(savedCartItems)\r\n  }\r\n})\r\n\r\n// 页面元数据\r\nuseHead({\r\n  title: '购物车结算 - xlCig',\r\n  meta: [\r\n    { name: 'description', content: '安全快捷的购物车结算流程，支持多种支付方式' }\r\n  ]\r\n})\r\n</script> "],"names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrInterpolate","_createVNode","_ssrRenderList","_ssrRenderAttr","_ssrRenderClass"],"mappings":"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"}