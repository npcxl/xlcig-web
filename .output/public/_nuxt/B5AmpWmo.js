import{_ as F}from"./kALhssUB.js";import{_ as H}from"./DxXK6IxH.js";import{r as u,l as w,e as Q,c as o,a as e,b as U,i as b,d as g,t as n,w as Y,F as q,j as I,z as R,p as d,v as c,B as W,q as j,o as r,k as M}from"./D6E0p70F.js";import{u as G}from"./B5a80Yss.js";import{c as K}from"./9bKZ-qGF.js";import"./XT9ipho2.js";import"./DlAUqK2U.js";import"./CZRRUHTJ.js";import"./BDACH_0w.js";const X={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},Z={class:"container mx-auto px-6 py-8 relative z-10"},ee={class:"grid lg:grid-cols-3 gap-8"},te={class:"lg:col-span-2 space-y-8"},se={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},le={class:"px-8 py-6 border-b border-gray-700/50"},oe={class:"text-gray-300 mt-2"},re={class:"p-8"},ae={key:0,class:"text-center py-12"},ie={key:1,class:"space-y-6"},ne={class:"w-24 h-24 bg-gray-700/50 rounded-lg overflow-hidden"},de=["src","alt"],ce={class:"flex-1"},ue={class:"font-semibold text-white text-lg mb-1"},be={class:"text-gray-400 text-sm mb-2"},pe={class:"flex items-center gap-4"},ge={class:"text-2xl font-bold text-cyan-400"},xe={key:0,class:"text-sm text-gray-500 line-through"},ye={class:"flex items-center gap-3"},me=["onClick"],ve={class:"w-12 text-center text-white font-semibold text-lg"},fe=["onClick"],he=["onClick"],we={key:0,class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},ke={class:"p-8"},_e={class:"grid md:grid-cols-2 gap-6"},Ce={class:"grid md:grid-cols-3 gap-6"},Ne={key:1,class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},Se={class:"p-8"},Ve={class:"grid md:grid-cols-3 gap-4 mb-6"},Ue=["onClick"],qe={class:"font-semibold"},Ie={class:"text-sm opacity-75 mt-1"},je={key:0,class:"space-y-6"},Me={class:"grid md:grid-cols-3 gap-6"},ze={class:"md:col-span-2"},Le={key:1,class:"text-center py-8"},De={key:2,class:"text-center py-8"},Oe={class:"lg:col-span-1"},Pe={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 sticky top-6"},Te={class:"p-8 space-y-6"},Ee={class:"space-y-4"},$e={class:"flex justify-between items-center"},Ae={class:"text-white font-semibold"},Be={class:"flex justify-between items-center"},Je={class:"text-white font-semibold"},Fe={class:"flex justify-between items-center"},He={class:"text-white font-semibold"},Qe={class:"border-t border-gray-700/50 pt-4"},Ye={class:"flex justify-between items-center"},Re={class:"text-2xl font-bold text-cyan-400"},We={key:0},Ge={class:"flex gap-2"},Ke={key:0,class:"mt-2 text-green-400 text-sm flex items-center gap-1"},Xe=["disabled"],Ze={key:0,class:"bi bi-credit-card"},et={key:1,class:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"},tt={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},st={class:"glass-card-dark rounded-2xl border border-green-500/30 shadow-2xl shadow-green-500/20 p-8 max-w-md w-full text-center"},lt={class:"text-gray-300 mb-2"},gt={__name:"checkout",setup(ot){const{message:z}=K(["message"]),L=l=>{z.error(l,{duration:4e3})},a=u([]),x=u(!1),v=u(!1),C=u(""),i=u({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:""}),y=u("card"),p=u({cardNumber:"",expiryDate:"",cvv:"",cardholderName:""}),f=u(""),k=u(""),D=u([{id:"card",name:"银行卡支付",description:"银联、Visa、万事达",icon:"bi-credit-card"},{id:"alipay",name:"支付宝",description:"使用支付宝支付",icon:"bi-wallet2"},{id:"wechat",name:"微信支付",description:"微信扫码支付",icon:"bi-wechat"}]),h=w(()=>a.value.reduce((l,t)=>l+t.price*t.quantity,0)),N=w(()=>h.value>1e3?0:50),S=w(()=>Math.round(h.value*.08)),O=w(()=>h.value+N.value+S.value),P=l=>{a.value=a.value.filter(t=>t.id!==l),localStorage.setItem("cartItems",JSON.stringify(a.value))},T=l=>{const t=a.value.find(m=>m.id===l);t&&(t.quantity++,localStorage.setItem("cartItems",JSON.stringify(a.value)))},E=l=>{const t=a.value.find(m=>m.id===l);t&&t.quantity>1&&(t.quantity--,localStorage.setItem("cartItems",JSON.stringify(a.value)))},$=()=>{["SAVE10","WELCOME20","TECH15"].includes(f.value.toUpperCase())?k.value=f.value.toUpperCase():L("优惠券代码无效")},V=async()=>{if(a.value.length!==0){x.value=!0;try{await new Promise(l=>setTimeout(l,2e3)),C.value="ORD"+Date.now().toString().slice(-8),a.value=[],localStorage.removeItem("cartItems"),v.value=!0}catch(l){console.error("订单提交失败:",l),l("订单提交失败，请重试。")}finally{x.value=!1}}},A=()=>{v.value=!1,j("/orders")},B=()=>{v.value=!1,j("/products")};return Q(()=>{const l=localStorage.getItem("cartItems");l&&(a.value=JSON.parse(l))}),G({title:"购物车结算 - xlCig",meta:[{name:"description",content:"安全快捷的购物车结算流程，支持多种支付方式"}]}),(l,t)=>{const m=F,J=H;return r(),o("div",X,[t[48]||(t[48]=e("div",{class:"fixed inset-0 pointer-events-none"},[e("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow"})],-1)),U(m,{"show-back-button":!1,"show-nav-menu":!1,"show-breadcrumb":!0,"show-location":!1,"show-search-button":!1,"show-notification-button":!1,"show-decorations":!1,"logo-size":"medium","current-page-title":"购物车结算"}),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",le,[t[13]||(t[13]=e("h2",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-cart text-cyan-400"}),g(" 购物车 ")],-1)),e("p",oe,"购物车中有 "+n(a.value.length)+" 件商品",1)]),e("div",re,[a.value.length===0?(r(),o("div",ae,[t[15]||(t[15]=e("div",{class:"text-6xl mb-4 text-gray-500"},[e("i",{class:"bi bi-cart-x"})],-1)),t[16]||(t[16]=e("h3",{class:"text-xl font-semibold text-white mb-2"},"购物车为空",-1)),t[17]||(t[17]=e("p",{class:"text-gray-400 mb-6"},"添加一些产品来继续购物",-1)),U(J,{to:"/products",class:"inline-flex items-center px-6 py-3 bg-cyan-600 text-white font-medium rounded-lg hover:bg-cyan-500 transition-all duration-300"},{default:Y(()=>t[14]||(t[14]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),g(" 添加产品 ")])),_:1,__:[14]})])):(r(),o("div",ie,[(r(!0),o(q,null,I(a.value,s=>(r(),o("div",{key:s.id,class:"flex items-center gap-6 p-6 bg-gray-800/30 rounded-2xl border border-gray-700/30 hover:border-cyan-500/50 transition-colors duration-300"},[e("div",ne,[e("img",{src:s.image,alt:s.name,class:"w-full h-full object-contain p-2"},null,8,de)]),e("div",ce,[e("h3",ue,n(s.name),1),e("p",be,n(s.brand),1),e("div",pe,[e("span",ge,"¥"+n(s.price.toLocaleString()),1),s.originalPrice&&s.originalPrice>s.price?(r(),o("span",xe," ¥"+n(s.originalPrice.toLocaleString()),1)):b("",!0)])]),e("div",ye,[e("button",{onClick:_=>E(s.id),class:"w-10 h-10 flex items-center justify-center bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors duration-200"},t[18]||(t[18]=[e("i",{class:"bi bi-dash"},null,-1)]),8,me),e("span",ve,n(s.quantity),1),e("button",{onClick:_=>T(s.id),class:"w-10 h-10 flex items-center justify-center bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors duration-200"},t[19]||(t[19]=[e("i",{class:"bi bi-plus"},null,-1)]),8,fe)]),e("button",{onClick:_=>P(s.id),class:"w-10 h-10 flex items-center justify-center bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors duration-200"},t[20]||(t[20]=[e("i",{class:"bi bi-trash"},null,-1)]),8,he)]))),128))]))])]),a.value.length>0?(r(),o("div",we,[t[29]||(t[29]=e("div",{class:"px-8 py-6 border-b border-gray-700/50"},[e("h2",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-person text-cyan-400"}),g(" 客户信息 ")])],-1)),e("div",ke,[e("form",{onSubmit:R(V,["prevent"]),class:"space-y-6"},[e("div",_e,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-white mb-2"},"姓氏",-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.firstName=s),type:"text",required:"",placeholder:"请输入姓氏",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.firstName]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-white mb-2"},"名字",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.lastName=s),type:"text",required:"",placeholder:"请输入名字",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.lastName]])])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-white mb-2"},"电子邮箱",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.value.email=s),type:"email",required:"",placeholder:"请输入邮箱地址",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.email]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-white mb-2"},"手机号码",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.value.phone=s),type:"tel",required:"",placeholder:"请输入手机号码",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.phone]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-white mb-2"},"收货地址",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.value.address=s),required:"",rows:"3",placeholder:"请输入详细收货地址",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none"},null,512),[[c,i.value.address]])]),e("div",Ce,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-white mb-2"},"城市",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.city=s),type:"text",required:"",placeholder:"请输入城市",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.city]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-white mb-2"},"省份",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>i.value.state=s),type:"text",required:"",placeholder:"请输入省份",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.state]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-white mb-2"},"邮政编码",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.zipCode=s),type:"text",required:"",placeholder:"请输入邮编",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,i.value.zipCode]])])])],32)])])):b("",!0),a.value.length>0?(r(),o("div",Ne,[t[36]||(t[36]=e("div",{class:"px-8 py-6 border-b border-gray-700/50"},[e("h2",{class:"text-3xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-credit-card text-cyan-400"}),g(" 支付方式 ")])],-1)),e("div",Se,[e("div",Ve,[(r(!0),o(q,null,I(D.value,s=>(r(),o("button",{key:s.id,onClick:_=>y.value=s.id,class:M(["p-6 border-2 rounded-xl transition-all duration-300 text-center",y.value===s.id?"border-cyan-500 bg-cyan-500/20 text-cyan-300":"border-gray-600/50 hover:border-cyan-500/50 text-gray-300 hover:text-white"])},[e("i",{class:M([s.icon,"text-3xl mb-3"])},null,2),e("div",qe,n(s.name),1),e("div",Ie,n(s.description),1)],10,Ue))),128))]),y.value==="card"?(r(),o("div",je,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-white mb-2"},"银行卡号",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>p.value.cardNumber=s),type:"text",placeholder:"6222 0200 0000 0000",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,p.value.cardNumber]])]),e("div",Me,[e("div",ze,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-white mb-2"},"有效期",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>p.value.expiryDate=s),type:"text",placeholder:"MM/YY",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,p.value.expiryDate]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-white mb-2"},"CVV",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>p.value.cvv=s),type:"text",placeholder:"123",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,p.value.cvv]])])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-white mb-2"},"持卡人姓名",-1)),d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>p.value.cardholderName=s),type:"text",placeholder:"张三",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400"},null,512),[[c,p.value.cardholderName]])])])):b("",!0),y.value==="alipay"?(r(),o("div",Le,t[34]||(t[34]=[e("div",{class:"text-6xl text-blue-500 mb-4"},[e("i",{class:"bi bi-wallet2"})],-1),e("h3",{class:"text-xl font-semibold text-white mb-2"},"支付宝支付",-1),e("p",{class:"text-gray-400 mb-6"},"您将跳转到支付宝完成支付",-1)]))):b("",!0),y.value==="wechat"?(r(),o("div",De,t[35]||(t[35]=[e("div",{class:"text-6xl text-green-500 mb-4"},[e("i",{class:"bi bi-wechat"})],-1),e("h3",{class:"text-xl font-semibold text-white mb-2"},"微信支付",-1),e("p",{class:"text-gray-400 mb-6"},"扫码支付或使用微信App支付",-1)]))):b("",!0)])])):b("",!0)]),e("div",Oe,[e("div",Pe,[t[44]||(t[44]=e("div",{class:"px-8 py-6 border-b border-gray-700/50"},[e("h2",{class:"text-2xl font-bold text-white flex items-center gap-3"},[e("i",{class:"bi bi-receipt text-cyan-400"}),g(" 订单摘要 ")])],-1)),e("div",Te,[e("div",Ee,[e("div",$e,[t[37]||(t[37]=e("span",{class:"text-gray-300"},"商品小计",-1)),e("span",Ae,"¥"+n(h.value.toLocaleString()),1)]),e("div",Be,[t[38]||(t[38]=e("span",{class:"text-gray-300"},"运费",-1)),e("span",Je,"¥"+n(N.value.toLocaleString()),1)]),e("div",Fe,[t[39]||(t[39]=e("span",{class:"text-gray-300"},"税费",-1)),e("span",He,"¥"+n(S.value.toLocaleString()),1)]),e("div",Qe,[e("div",Ye,[t[40]||(t[40]=e("span",{class:"text-xl font-semibold text-white"},"总计",-1)),e("span",Re,"¥"+n(O.value.toLocaleString()),1)])])]),a.value.length>0?(r(),o("div",We,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-white mb-2"},"优惠券代码",-1)),e("div",Ge,[d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>f.value=s),type:"text",placeholder:"输入优惠券代码",class:"flex-1 px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 text-sm"},null,512),[[c,f.value]]),e("button",{onClick:$,class:"px-4 py-3 bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 text-sm"}," 使用 ")]),k.value?(r(),o("div",Ke,[t[41]||(t[41]=e("i",{class:"bi bi-check-circle"},null,-1)),g(' 优惠券"'+n(k.value)+'"已使用 ',1)])):b("",!0)])):b("",!0),a.value.length>0?(r(),o("button",{key:1,onClick:V,disabled:x.value,class:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 disabled:from-gray-600 disabled:to-gray-600 text-white py-3 px-6 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 disabled:cursor-not-allowed"},[x.value?(r(),o("div",et)):(r(),o("i",Ze)),g(" "+n(x.value?"处理中...":"确认下单"),1)],8,Xe)):b("",!0),t[43]||(t[43]=W('<div class="text-center pt-6 border-t border-gray-700/50"><div class="flex items-center justify-center gap-4 text-gray-400 text-sm"><div class="flex items-center gap-1"><i class="bi bi-shield-check text-green-400"></i><span>安全</span></div><div class="flex items-center gap-1"><i class="bi bi-lock text-green-400"></i><span>加密</span></div><div class="flex items-center gap-1"><i class="bi bi-award text-green-400"></i><span>认证</span></div></div></div>',1))])])])])]),v.value?(r(),o("div",tt,[e("div",st,[t[45]||(t[45]=e("div",{class:"text-6xl text-green-400 mb-6"},[e("i",{class:"bi bi-check-circle"})],-1)),t[46]||(t[46]=e("h3",{class:"text-2xl font-bold text-white mb-4"},"订单提交成功！",-1)),e("p",lt,"订单号：#"+n(C.value),1),t[47]||(t[47]=e("p",{class:"text-gray-400 mb-8"},"感谢您的购买，您将很快收到确认邮件。",-1)),e("div",{class:"space-y-3"},[e("button",{onClick:A,class:"w-full bg-green-600 hover:bg-green-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 查看订单 "),e("button",{onClick:B,class:"w-full border border-gray-600 hover:border-green-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 继续购物 ")])])])):b("",!0)])}}};export{gt as default};
