import{_ as N}from"./DYvj3SeZ.js";import{_ as P}from"./R13bP64g.js";import{_ as U,l as g,h as K,e as Q,c as a,a as t,E as b,b as m,H as W,w as I,d as c,t as n,F as h,I as _,D as A,q as Y,K as Z,o as l,G as p,J as tt}from"./-_uPjKn3.js";import{o as L}from"./COWn9IxZ.js";import{u as et}from"./CKbMDZ6y.js";import{aq as st}from"./4kkTLsQ6.js";import"./BDACH_0w.js";const ot={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},at={class:"relative z-10"},lt={class:"container mx-auto px-6 py-6"},nt={class:"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},rt={class:"flex items-center justify-between"},it={class:"flex items-center space-x-6"},dt={class:"text-sm text-gray-400"},ct={class:"relative z-10"},ut={class:"container mx-auto px-6 py-8"},vt={class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},xt={class:"flex items-center justify-between"},gt={class:"text-right"},bt={class:"text-3xl font-bold text-cyan-400"},pt={class:"relative z-10"},yt={class:"container mx-auto px-6 py-4"},ft={class:"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},mt={class:"flex flex-wrap items-center gap-4"},ht={class:"flex flex-wrap gap-2"},_t=["onClick"],wt={class:"ml-2 text-xs opacity-75"},kt={class:"container mx-auto px-6 py-8 relative z-10"},Ct={key:0,class:"text-center py-16"},St={key:1,class:"text-center py-16"},It={class:"glass-card-dark rounded-2xl border border-cyan-500/30 p-20 shadow-2xl shadow-cyan-500/20 max-w-lg mx-auto"},Dt={class:"text-gray-400 mb-8 text-lg"},$t={class:"space-y-4"},zt={key:2,class:"space-y-6"},Rt={class:"px-8 py-6 border-b border-gray-700/50 bg-gray-800/30"},qt={class:"flex flex-wrap items-center justify-between gap-4"},jt={class:"flex items-center gap-4"},At={class:"text-xl font-bold text-white mb-1"},Lt={class:"text-gray-400 text-sm"},Mt={class:"text-right"},Ot={class:"text-2xl font-bold text-cyan-400"},Bt={class:"text-gray-400 text-sm"},Vt={class:"p-8"},Tt={class:"space-y-4"},Et={class:"w-20 h-20 bg-gray-700/50 rounded-lg overflow-hidden"},Ft={key:0,class:"order-item-image-container"},Jt=["src","alt"],Xt={key:1,class:"order-item-placeholder"},Gt={class:"flex-1"},Ht={class:"font-semibold text-white text-lg mb-1"},Nt={class:"text-gray-400 text-sm mb-2"},Pt={class:"flex items-center gap-4"},Ut={class:"text-cyan-400 font-semibold"},Kt={class:"text-gray-400 text-sm"},Qt={class:"flex flex-col gap-2"},Wt=["onClick"],Yt={class:"px-8 py-6 border-t border-gray-700/50 bg-gray-800/20"},Zt={class:"flex flex-wrap items-center justify-between gap-4"},te={class:"flex items-center gap-6"},ee={class:"flex items-center gap-3"},se={class:"text-gray-400"},oe={key:0,class:"flex items-center gap-3"},ae={class:"text-gray-400"},le={class:"flex flex-wrap items-center gap-3"},ne=["onClick"],re=["onClick"],ie=["onClick"],de={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},ce={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 p-8 max-w-md w-full"},ue={key:0,class:"mb-6"},ve={class:"flex items-center gap-4 mb-4"},xe=["src","alt"],ge={class:"font-semibold text-white"},be={class:"text-gray-400 text-sm"},pe={class:"space-y-4"},ye={class:"flex gap-2"},fe=["onClick"],me={__name:"orders",setup(he){const{message:D}=st(["message"]),w=s=>{D.success(s,{duration:3e3})},M=s=>{D.error(s,{duration:4e3})},d=g([]),k=g(!0),u=g("all"),C=g(!1),v=g(null),y=g(5),f=g(""),S=g([{value:"all",label:"全部订单",icon:"bi-list-ul"},{value:"pending",label:"待支付",icon:"bi-clock"},{value:"processing",label:"处理中",icon:"bi-gear"},{value:"shipped",label:"已发货",icon:"bi-truck"},{value:"delivered",label:"已送达",icon:"bi-check-circle"},{value:"cancelled",label:"已取消",icon:"bi-x-circle"}]),$=K(()=>u.value==="all"?d.value:d.value.filter(s=>s.status===u.value)),O=()=>{window.history.back()},B=s=>s==="all"?d.value.length:d.value.filter(e=>e.status===s).length,z=s=>{const e=S.value.find(i=>i.value===s);return(e==null?void 0:e.label)||s},V=s=>{const e=S.value.find(i=>i.value===s);return(e==null?void 0:e.icon)||"bi-circle"},T=s=>({pending:"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",processing:"bg-blue-500/20 text-blue-300 border border-blue-500/30",shipped:"bg-purple-500/20 text-purple-300 border border-purple-500/30",delivered:"bg-green-500/20 text-green-300 border border-green-500/30",cancelled:"bg-red-500/20 text-red-300 border border-red-500/30"})[s]||"bg-gray-500/20 text-gray-300 border border-gray-500/30",R=s=>new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),E=s=>{v.value=s,y.value=5,f.value="",C.value=!0},q=()=>{C.value=!1,v.value=null,y.value=5,f.value=""},F=()=>{console.log("提交评价:",{item:v.value,rating:y.value,comment:f.value}),w("感谢您的评价！"),q()},J=s=>{console.log("下载订单发票:",s.orderNumber),w("发票下载已开始！")},X=async s=>{if(confirm("您确定要取消这个订单吗？"))try{const e=await L.cancelOrder(s);if(e.success){const i=d.value.findIndex(x=>x.id===s);i>-1&&(d.value[i].status="cancelled"),w("订单取消成功！")}else M(e.message||"取消订单失败，请重试。")}catch(e){console.error("取消订单失败:",e),e("取消订单失败，请重试。")}},G=s=>{try{const e=JSON.parse(localStorage.getItem("cartItems")||"[]");s.items.forEach(i=>{const x=e.findIndex(o=>o.id===i.id);x>-1?e[x].quantity+=i.quantity:e.push({...i})}),localStorage.setItem("cartItems",JSON.stringify(e)),tt("/checkout")}catch(e){console.error("重新下单失败:",e),e("重新下单失败，请重试。")}},H=s=>s.includes("RTX")||s.includes("RX")||s.includes("显卡")?"bi bi-gpu-card text-cyan-400 text-xl":s.includes("Intel")||s.includes("AMD")||s.includes("Ryzen")||s.includes("Core")?"bi bi-cpu text-orange-400 text-xl":s.includes("主板")||s.includes("STRIX")||s.includes("MAG")?"bi bi-motherboard text-green-400 text-xl":s.includes("电源")||s.includes("PSU")||s.includes("Power")?"bi bi-lightning text-yellow-400 text-xl":"bi bi-pc-display text-gray-400 text-xl";return Q(async()=>{k.value=!0;try{const s=await L.getMyOrders();s.success&&s.data?d.value=s.data.map(e=>{var i;return{id:e.id,orderNumber:`ORD-${e.id.toString().padStart(8,"0")}`,createdAt:e.created_at,status:e.status,total:e.total_price,trackingNumber:null,estimatedDelivery:null,items:[{id:((i=e.config)==null?void 0:i.id)||e.id,name:e.config_name||"配置商品",brand:e.merchant_name||"未知商家",price:e.config_price||e.total_price/e.quantity,quantity:e.quantity,image:e.config_images&&e.config_images.length>0?e.config_images[0]:""}]}}):d.value=[]}catch(s){console.error("获取订单失败:",s),d.value=[]}finally{k.value=!1}}),et({title:"我的订单 - xlCig",meta:[{name:"description",content:"查看您的订单状态和历史记录"}]}),(s,e)=>{const i=N,x=P;return l(),a("div",ot,[e[27]||(e[27]=t("div",{class:"fixed inset-0 pointer-events-none"},[t("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),t("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"}),t("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gradient-to-r from-indigo-500/10 to-cyan-500/10 rounded-full filter blur-3xl animate-spin-slow"})],-1)),t("nav",at,[t("div",lt,[t("div",nt,[t("div",rt,[t("div",it,[m(i,{size:"medium","show-decorations":!1}),e[4]||(e[4]=t("div",{class:"h-6 w-px bg-gray-600"},null,-1)),t("button",{onClick:O,class:"group relative inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:-translate-y-1 hover:scale-105 overflow-hidden"},e[3]||(e[3]=[W('<div class="absolute inset-0 bg-gradient-to-r from-cyan-600/20 via-blue-600/20 to-purple-600/20 rounded-xl transition-all duration-300 group-hover:from-cyan-500/30 group-hover:via-blue-500/30 group-hover:to-purple-500/30" data-v-38fd0510></div><div class="absolute inset-0 border-2 border-cyan-500/30 rounded-xl transition-all duration-300 group-hover:border-cyan-400/60 group-hover:shadow-lg group-hover:shadow-cyan-400/25" data-v-38fd0510></div><div class="absolute inset-0 rounded-xl overflow-hidden" data-v-38fd0510><div class="absolute w-2 h-2 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping" style="top:20%;left:15%;animation-delay:0s;" data-v-38fd0510></div><div class="absolute w-1 h-1 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping" style="top:60%;left:80%;animation-delay:0.2s;" data-v-38fd0510></div><div class="absolute w-1.5 h-1.5 bg-purple-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping" style="top:80%;left:30%;animation-delay:0.4s;" data-v-38fd0510></div></div><div class="relative flex items-center" data-v-38fd0510><div class="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500/20 to-blue-500/20 flex items-center justify-center mr-3 transition-all duration-300 group-hover:from-cyan-400/40 group-hover:to-blue-400/40 group-hover:scale-110" data-v-38fd0510><i class="bi bi-arrow-left text-cyan-400 text-lg transition-all duration-300 group-hover:text-white group-hover:-translate-x-1" data-v-38fd0510></i></div><div class="text-left" data-v-38fd0510><div class="text-white text-sm font-semibold transition-all duration-300 group-hover:text-cyan-100" data-v-38fd0510>返回</div><div class="text-gray-400 text-xs transition-all duration-300 group-hover:text-cyan-300" data-v-38fd0510>Back</div></div></div><div class="absolute right-3 top-1/2 transform -translate-y-1/2" data-v-38fd0510><div class="flex flex-col space-y-1 opacity-60 group-hover:opacity-100 transition-opacity duration-300" data-v-38fd0510><div class="w-6 h-0.5 bg-gradient-to-r from-cyan-400 to-transparent rounded-full transition-all duration-300 group-hover:w-8" data-v-38fd0510></div><div class="w-4 h-0.5 bg-gradient-to-r from-blue-400 to-transparent rounded-full transition-all duration-300 group-hover:w-6 delay-75" data-v-38fd0510></div><div class="w-2 h-0.5 bg-gradient-to-r from-purple-400 to-transparent rounded-full transition-all duration-300 group-hover:w-4 delay-150" data-v-38fd0510></div></div></div>',5)]))]),t("nav",dt,[m(x,{to:"/",class:"hover:text-cyan-400"},{default:I(()=>e[5]||(e[5]=[c("首页")])),_:1,__:[5]}),e[6]||(e[6]=t("i",{class:"bi bi-chevron-right mx-2 text-cyan-400"},null,-1)),e[7]||(e[7]=t("span",{class:"text-white font-medium"},"我的订单",-1))])])])])]),t("section",ct,[t("div",ut,[t("div",vt,[t("div",xt,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-4xl font-bold text-white mb-3 flex items-center gap-3"},[t("i",{class:"bi bi-bag-check text-cyan-400 text-3xl"}),c(" 我的订单 ")]),t("p",{class:"text-gray-300 text-lg"},"查看和管理您的订单历史")],-1)),t("div",gt,[t("div",bt,n(d.value.length),1),e[8]||(e[8]=t("div",{class:"text-gray-400 text-sm"},"订单总数",-1))])])])])]),t("section",pt,[t("div",yt,[t("div",ft,[t("div",mt,[e[10]||(e[10]=t("div",{class:"flex items-center gap-2"},[t("i",{class:"bi bi-funnel text-cyan-400"}),t("span",{class:"text-white font-medium"},"按状态筛选：")],-1)),t("div",ht,[(l(!0),a(h,null,_(S.value,o=>(l(),a("button",{key:o.value,onClick:r=>u.value=o.value,class:p(["px-4 py-2 text-sm font-medium rounded-lg transition-all duration-300",u.value===o.value?"bg-cyan-500/20 text-cyan-300 border border-cyan-400/40":"text-gray-300 hover:bg-white/5 hover:text-white border border-transparent"])},[t("i",{class:p([o.icon,"mr-2"])},null,2),c(" "+n(o.label)+" ",1),t("span",wt,"("+n(B(o.value))+")",1)],10,_t))),128))])])])])]),t("main",kt,[k.value?(l(),a("div",Ct,e[11]||(e[11]=[t("div",{class:"inline-flex flex-col items-center glass-card-dark rounded-2xl border border-cyan-500/30 p-16 shadow-2xl shadow-cyan-500/20"},[t("div",{class:"w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mb-8"}),t("p",{class:"text-2xl font-medium text-white"},"正在加载您的订单..."),t("p",{class:"text-gray-400 mt-2"},"请稍候")],-1)]))):A($).length===0?(l(),a("div",St,[t("div",It,[e[13]||(e[13]=t("div",{class:"text-8xl mb-8 text-cyan-400 opacity-50"},[t("i",{class:"bi bi-bag-x"})],-1)),e[14]||(e[14]=t("h3",{class:"text-3xl font-bold text-white mb-4"},"未找到订单",-1)),t("p",Dt,n(u.value==="all"?"您还没有下过任何订单":`没有状态为"${z(u.value)}"的订单`),1),t("div",$t,[m(x,{to:"/products",class:"inline-flex items-center justify-center px-8 py-4 bg-cyan-600 text-white font-medium rounded-xl hover:bg-cyan-500 transition-all duration-300 shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40"},{default:I(()=>e[12]||(e[12]=[t("i",{class:"bi bi-plus-circle mr-2"},null,-1),c(" 开始购物 ")])),_:1,__:[12]}),u.value!=="all"?(l(),a("button",{key:0,onClick:e[0]||(e[0]=o=>u.value="all"),class:"block w-full px-8 py-3 border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300"}," 查看所有订单 ")):b("",!0)])])])):(l(),a("div",zt,[(l(!0),a(h,null,_(A($),o=>(l(),a("div",{key:o.id,class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 overflow-hidden hover:border-cyan-400/50 transition-colors duration-300"},[t("div",Rt,[t("div",qt,[t("div",jt,[t("div",null,[t("h3",At,"订单 #"+n(o.orderNumber),1),t("p",Lt,"下单时间："+n(R(o.createdAt)),1)]),t("div",{class:p(["inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium",T(o.status)])},[t("i",{class:p([V(o.status),"mr-2"])},null,2),c(" "+n(z(o.status)),1)],2)]),t("div",Mt,[t("div",Ot,"¥"+n((o.total*7.2).toLocaleString()),1),t("div",Bt,n(o.items.length)+" 件商品",1)])])]),t("div",Vt,[t("div",Tt,[(l(!0),a(h,null,_(o.items,r=>(l(),a("div",{key:r.id,class:"flex items-center gap-6 p-4 bg-gray-800/20 rounded-xl border border-gray-700/30"},[t("div",Et,[r.image?(l(),a("div",Ft,[t("img",{src:r.image,alt:r.name,class:"w-full h-full object-contain p-2",onError:e[1]||(e[1]=j=>j.target.style.display="none")},null,40,Jt)])):(l(),a("div",Xt,[t("i",{class:p(H(r.name))},null,2)]))]),t("div",Gt,[t("h4",Ht,n(r.name),1),t("p",Nt,n(r.brand),1),t("div",Pt,[t("span",Ut,"¥"+n((r.price*7.2).toLocaleString()),1),t("span",Kt,"数量："+n(r.quantity),1)])]),t("div",Qt,[m(x,{to:`/products/${r.id}`,class:"px-4 py-2 text-sm bg-cyan-600 hover:bg-cyan-500 text-white font-medium rounded-lg transition-colors duration-300 text-center"},{default:I(()=>e[15]||(e[15]=[c(" 查看商品 ")])),_:2,__:[15]},1032,["to"]),o.status==="delivered"?(l(),a("button",{key:0,onClick:j=>E(r),class:"px-4 py-2 text-sm border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300"}," 写评价 ",8,Wt)):b("",!0)])]))),128))])]),t("div",Yt,[t("div",Zt,[t("div",te,[t("div",ee,[e[16]||(e[16]=t("i",{class:"bi bi-truck text-cyan-400"},null,-1)),e[17]||(e[17]=t("span",{class:"text-white font-medium"},"物流单号：",-1)),t("span",se,n(o.trackingNumber||"暂无"),1)]),o.estimatedDelivery?(l(),a("div",oe,[e[18]||(e[18]=t("i",{class:"bi bi-calendar-event text-cyan-400"},null,-1)),e[19]||(e[19]=t("span",{class:"text-white font-medium"},"预计送达：",-1)),t("span",ae,n(R(o.estimatedDelivery)),1)])):b("",!0)]),t("div",le,[t("button",{onClick:r=>J(o),class:"px-4 py-2 text-sm border border-gray-600 hover:border-cyan-500 text-gray-300 hover:text-white font-medium rounded-lg transition-colors duration-300 flex items-center gap-2"},e[20]||(e[20]=[t("i",{class:"bi bi-download"},null,-1),c(" 下载发票 ")]),8,ne),o.status==="pending"||o.status==="processing"?(l(),a("button",{key:0,onClick:r=>X(o.id),class:"px-4 py-2 text-sm border border-red-600 hover:border-red-500 text-red-300 hover:text-red-200 font-medium rounded-lg transition-colors duration-300 flex items-center gap-2"},e[21]||(e[21]=[t("i",{class:"bi bi-x-circle"},null,-1),c(" 取消订单 ")]),8,re)):b("",!0),o.status==="delivered"?(l(),a("button",{key:1,onClick:r=>G(o),class:"px-4 py-2 text-sm bg-green-600 hover:bg-green-500 text-white font-medium rounded-lg transition-colors duration-300 flex items-center gap-2"},e[22]||(e[22]=[t("i",{class:"bi bi-arrow-repeat"},null,-1),c(" 再次购买 ")]),8,ie)):b("",!0)])])])]))),128))]))]),C.value?(l(),a("div",de,[t("div",ce,[e[26]||(e[26]=t("h3",{class:"text-2xl font-bold text-white mb-6"},"写商品评价",-1)),v.value?(l(),a("div",ue,[t("div",ve,[t("img",{src:v.value.image,alt:v.value.name,class:"w-16 h-16 object-contain bg-gray-700/50 rounded-lg p-2"},null,8,xe),t("div",null,[t("h4",ge,n(v.value.name),1),t("p",be,n(v.value.brand),1)])]),t("div",pe,[t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-white mb-2"},"评分",-1)),t("div",ye,[(l(),a(h,null,_(5,o=>t("button",{key:o,onClick:r=>y.value=o,class:p([o<=y.value?"text-yellow-400":"text-gray-600","text-2xl hover:text-yellow-400 transition-colors duration-200"])},e[23]||(e[23]=[t("i",{class:"bi bi-star-fill"},null,-1)]),10,fe)),64))])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-white mb-2"},"评价内容",-1)),Y(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),rows:"4",placeholder:"分享您对这个产品的使用体验...",class:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white placeholder-gray-400 resize-none"},null,512),[[Z,f.value]])])])])):b("",!0),t("div",{class:"flex gap-3"},[t("button",{onClick:F,class:"flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 提交评价 "),t("button",{onClick:q,class:"flex-1 border border-gray-600 hover:border-gray-500 text-gray-300 hover:text-white py-3 px-6 rounded-lg font-medium transition-colors duration-300"}," 取消 ")])])])):b("",!0)])}}},$e=U(me,[["__scopeId","data-v-38fd0510"]]);export{$e as default};
