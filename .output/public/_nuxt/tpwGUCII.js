import{_ as J}from"./DYvj3SeZ.js";import{_ as O}from"./R13bP64g.js";import{m as Q,l as r,r as R,h as W,e as X,c as l,a as e,E as g,b as z,H as Y,w as Z,d,F as h,I as _,t as n,L as tt,q as p,K as w,M as N,N as et,o as i,_ as st}from"./-_uPjKn3.js";import{a as f}from"./CDQxMkrZ.js";import{aq as at}from"./4kkTLsQ6.js";import"./BDACH_0w.js";const ot={class:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"},lt={class:"relative z-10"},it={class:"container mx-auto px-6 py-6"},nt={class:"glass-card-dark rounded-2xl p-6 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},rt={class:"flex items-center justify-between"},dt={class:"flex items-center space-x-6"},ut={class:"text-sm text-gray-400"},ct={class:"relative z-10 py-8"},pt={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},vt={class:"mb-8 animate-fade-in-up"},mt={class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20"},ft={class:"flex items-center justify-between"},yt={key:0,class:"animate-fade-in-up animation-delay-200"},bt={key:1,class:"animate-fade-in-up animation-delay-200"},xt={class:"glass-card-dark rounded-2xl p-16 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 text-center"},gt={key:2,class:"space-y-6 animate-fade-in-up animation-delay-200"},ht={class:"flex items-start justify-between"},_t={class:"flex-1"},wt={class:"flex items-center gap-3 mb-4"},kt={class:"text-xl font-semibold text-white"},Ct={class:"text-gray-300"},At={key:0,class:"px-3 py-1 bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-sm font-medium rounded-full"},Vt={class:"text-gray-300 leading-relaxed"},Mt={class:"text-lg"},qt={class:"text-gray-400 mt-1"},Ut={key:0,class:"text-gray-400 text-sm mt-1"},Nt={class:"flex flex-col space-y-2 ml-6"},$t=["onClick","disabled"],jt=["onClick"],Dt=["onClick","disabled"],zt={key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4"},Bt={class:"glass-card-dark rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 animate-scale-in w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Et={class:"p-8"},Lt={class:"text-2xl font-bold text-white mb-6 flex items-center gap-3"},St={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ft={class:"space-y-2"},It={class:"space-y-2"},Tt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ht={class:"space-y-2"},Kt=["value"],Pt={class:"space-y-2"},Gt=["value"],Jt={class:"space-y-2"},Ot=["value"],Qt={class:"space-y-2"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Wt={class:"space-y-2"},Xt={class:"space-y-2 flex items-end"},Yt={class:"flex items-center space-x-2"},Zt={class:"flex justify-end space-x-4 pt-6"},te=["disabled"],ee={key:0,class:"loading loading-spinner loading-sm mr-2"},se={key:1,class:"bi bi-check-circle mr-2"},ae=Q({__name:"addresses",setup(oe){const{message:B}=at(["message"]),y=a=>{B.success(a,{duration:3e3})},k=r(!0),v=r(!1),C=r(!1),A=r(!1),u=r([]),b=r(!1),V=r(!1),m=r(null),o=R({name:"",phone:"",province:"",city:"",district:"",detail:"",postal_code:"",is_default:!1}),E=r(["北京市","上海市","天津市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","内蒙古自治区","广西壮族自治区","西藏自治区","宁夏回族自治区","新疆维吾尔自治区"]),M=r([]),x=r([]),q=W(()=>m.value!==null),L=()=>{window.history.back()},S=async()=>{try{k.value=!0;const a=await f.getAddresses();u.value=a.data||[]}catch(a){console.error("获取地址列表失败:",a),a("获取地址列表失败，请刷新重试")}finally{k.value=!1}},F=async()=>{try{v.value=!0;const a=await f.createAddress(o);a.success&&a.data&&(u.value.push(a.data),U(),y("地址添加成功"))}catch(a){console.error("添加地址失败:",a),a(a.message||"添加地址失败，请重试")}finally{v.value=!1}},I=a=>{m.value=a,o.name=a.name,o.phone=a.phone,o.province=a.province,o.city=a.city,o.district=a.district,o.detail=a.detail,o.postal_code=a.postal_code||"",o.is_default=a.is_default,$(),j(),V.value=!0},T=async()=>{if(m.value)try{v.value=!0;const a=await f.updateAddress(m.value.id,o);if(a.success&&a.data){const t=u.value.findIndex(c=>c.id===m.value.id);t!==-1&&(u.value[t]=a.data),U(),y("地址更新成功")}}catch(a){console.error("更新地址失败:",a),a(a.message||"更新地址失败，请重试")}finally{v.value=!1}},H=async a=>{try{C.value=!0,(await f.setDefaultAddress(a)).success&&(u.value.forEach(c=>{c.is_default=c.id===a}),y("默认地址设置成功"))}catch(t){console.error("设置默认地址失败:",t),t(t.message||"设置默认地址失败，请重试")}finally{C.value=!1}},K=async a=>{if(confirm("确定要删除这个地址吗？"))try{A.value=!0,(await f.deleteAddress(a)).success&&(u.value=u.value.filter(c=>c.id!==a),y("地址删除成功"))}catch(t){console.error("删除地址失败:",t),t(t.message||"删除地址失败，请重试")}finally{A.value=!1}},U=()=>{b.value=!1,V.value=!1,m.value=null,P()},P=()=>{o.name="",o.phone="",o.province="",o.city="",o.district="",o.detail="",o.postal_code="",o.is_default=!1,M.value=[],x.value=[]},$=()=>{o.city="",o.district="",x.value=[];const a={北京市:["东城区","西城区","朝阳区","丰台区","石景山区","海淀区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","密云区","延庆区"],上海市:["黄浦区","徐汇区","长宁区","静安区","普陀区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","奉贤区","崇明区"],广东省:["广州市","深圳市","珠海市","汕头市","佛山市","韶关市","湛江市","肇庆市","江门市","茂名市","惠州市","梅州市","汕尾市","河源市","阳江市","清远市","东莞市","中山市","潮州市","揭阳市","云浮市"],江苏省:["南京市","无锡市","徐州市","常州市","苏州市","南通市","连云港市","淮安市","盐城市","扬州市","镇江市","泰州市","宿迁市"],浙江省:["杭州市","宁波市","温州市","嘉兴市","湖州市","绍兴市","金华市","衢州市","舟山市","台州市","丽水市"]};M.value=a[o.province]||[]},j=()=>{o.district="";const a={广州市:["荔湾区","越秀区","海珠区","天河区","白云区","黄埔区","番禺区","花都区","南沙区","从化区","增城区"],深圳市:["罗湖区","福田区","南山区","宝安区","龙岗区","盐田区","龙华区","坪山区","光明区","大鹏新区"],南京市:["玄武区","秦淮区","建邺区","鼓楼区","浦口区","栖霞区","雨花台区","江宁区","六合区","溧水区","高淳区"],杭州市:["上城区","下城区","江干区","拱墅区","西湖区","滨江区","萧山区","余杭区","富阳区","临安区","桐庐县","淳安县","建德市"]};x.value=a[o.city]||[]};return X(()=>{S()}),(a,t)=>{const c=J,G=O;return i(),l("div",ot,[t[40]||(t[40]=e("div",{class:"fixed inset-0 pointer-events-none"},[e("div",{class:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 rounded-full filter blur-3xl animate-pulse"}),e("div",{class:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"})],-1)),e("nav",lt,[e("div",it,[e("div",nt,[e("div",rt,[e("div",dt,[z(c,{size:"medium","show-decorations":!1}),t[12]||(t[12]=e("div",{class:"h-6 w-px bg-gray-600"},null,-1)),e("button",{onClick:L,class:"group relative inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:-translate-y-1 hover:scale-105 overflow-hidden"},t[11]||(t[11]=[Y('<div class="absolute inset-0 bg-gradient-to-r from-cyan-600/20 via-blue-600/20 to-purple-600/20 rounded-xl transition-all duration-300 group-hover:from-cyan-500/30 group-hover:via-blue-500/30 group-hover:to-purple-500/30" data-v-b50377c2></div><div class="absolute inset-0 border-2 border-cyan-500/30 rounded-xl transition-all duration-300 group-hover:border-cyan-400/60 group-hover:shadow-lg group-hover:shadow-cyan-400/25" data-v-b50377c2></div><div class="absolute inset-0 rounded-xl overflow-hidden" data-v-b50377c2><div class="absolute w-2 h-2 bg-cyan-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping" style="top:20%;left:15%;animation-delay:0s;" data-v-b50377c2></div><div class="absolute w-1 h-1 bg-blue-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping" style="top:60%;left:80%;animation-delay:0.2s;" data-v-b50377c2></div><div class="absolute w-1.5 h-1.5 bg-purple-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-ping" style="top:80%;left:30%;animation-delay:0.4s;" data-v-b50377c2></div></div><div class="relative flex items-center" data-v-b50377c2><div class="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500/20 to-blue-500/20 flex items-center justify-center mr-3 transition-all duration-300 group-hover:from-cyan-400/40 group-hover:to-blue-400/40 group-hover:scale-110" data-v-b50377c2><i class="bi bi-arrow-left text-cyan-400 text-lg transition-all duration-300 group-hover:text-white group-hover:-translate-x-1" data-v-b50377c2></i></div><div class="text-left" data-v-b50377c2><div class="text-white text-sm font-semibold transition-all duration-300 group-hover:text-cyan-100" data-v-b50377c2>返回</div><div class="text-gray-400 text-xs transition-all duration-300 group-hover:text-cyan-300" data-v-b50377c2>Back</div></div></div><div class="absolute right-3 top-1/2 transform -translate-y-1/2" data-v-b50377c2><div class="flex flex-col space-y-1 opacity-60 group-hover:opacity-100 transition-opacity duration-300" data-v-b50377c2><div class="w-6 h-0.5 bg-gradient-to-r from-cyan-400 to-transparent rounded-full transition-all duration-300 group-hover:w-8" data-v-b50377c2></div><div class="w-4 h-0.5 bg-gradient-to-r from-blue-400 to-transparent rounded-full transition-all duration-300 group-hover:w-6 delay-75" data-v-b50377c2></div><div class="w-2 h-0.5 bg-gradient-to-r from-purple-400 to-transparent rounded-full transition-all duration-300 group-hover:w-4 delay-150" data-v-b50377c2></div></div></div>',5)]))]),e("nav",ut,[z(G,{to:"/",class:"hover:text-cyan-400 transition-colors duration-200"},{default:Z(()=>t[13]||(t[13]=[d("首页")])),_:1,__:[13]}),t[14]||(t[14]=e("i",{class:"bi bi-chevron-right mx-2 text-cyan-400"},null,-1)),t[15]||(t[15]=e("span",{class:"text-white font-medium"},"收货地址",-1))])])])])]),e("div",ct,[e("div",pt,[e("div",vt,[e("div",mt,[e("div",ft,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-4xl font-bold text-white mb-3 flex items-center gap-3"},[e("i",{class:"bi bi-geo-alt-fill text-cyan-400 text-3xl animate-bounce-gentle"}),d(" 收货地址管理 ")]),e("p",{class:"text-gray-300 text-lg"},"管理您的收货地址，支持多个地址并设置默认地址")],-1)),e("button",{onClick:t[0]||(t[0]=s=>b.value=!0),class:"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 flex items-center gap-2"},t[16]||(t[16]=[e("i",{class:"bi bi-plus-circle text-lg"},null,-1),d(" 添加新地址 ")]))])])]),k.value?(i(),l("div",yt,t[18]||(t[18]=[e("div",{class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 text-center"},[e("div",{class:"loading-spinner mx-auto mb-4"}),e("p",{class:"text-gray-300"},"正在加载地址列表...")],-1)]))):u.value.length===0?(i(),l("div",bt,[e("div",xt,[t[20]||(t[20]=e("i",{class:"bi bi-geo-alt text-6xl text-gray-400 mb-6"},null,-1)),t[21]||(t[21]=e("h3",{class:"text-xl font-semibold text-white mb-4"},"暂无收货地址",-1)),t[22]||(t[22]=e("p",{class:"text-gray-400 mb-8"},"添加您的第一个收货地址，让购物更加便捷",-1)),e("button",{onClick:t[1]||(t[1]=s=>b.value=!0),class:"btn-premium-dark px-8 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},t[19]||(t[19]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),d(" 添加收货地址 ")]))])])):(i(),l("div",gt,[(i(!0),l(h,null,_(u.value,s=>(i(),l("div",{key:s.id,class:"glass-card-dark rounded-2xl p-8 border border-cyan-500/30 shadow-2xl shadow-cyan-500/20 hover:border-cyan-400/50 transition-all duration-300 transform hover:-translate-y-1"},[e("div",ht,[e("div",_t,[e("div",wt,[e("h3",kt,n(s.name),1),e("span",Ct,n(s.phone),1),s.is_default?(i(),l("span",At,t[23]||(t[23]=[e("i",{class:"bi bi-star-fill mr-1"},null,-1),d(" 默认地址 ")]))):g("",!0)]),e("div",Vt,[e("p",Mt,n(s.province)+" "+n(s.city)+" "+n(s.district),1),e("p",qt,n(s.detail),1),s.postal_code?(i(),l("p",Ut,"邮政编码："+n(s.postal_code),1)):g("",!0)])]),e("div",Nt,[s.is_default?g("",!0):(i(),l("button",{key:0,onClick:D=>H(s.id),disabled:C.value,class:"btn-outline-dark px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50"},t[24]||(t[24]=[e("i",{class:"bi bi-star mr-1"},null,-1),d(" 设为默认 ")]),8,$t)),e("button",{onClick:D=>I(s),class:"btn-outline-dark px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-1"},t[25]||(t[25]=[e("i",{class:"bi bi-pencil mr-1"},null,-1),d(" 编辑 ")]),8,jt),e("button",{onClick:D=>K(s.id),disabled:A.value,class:"btn-danger px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50"},t[26]||(t[26]=[e("i",{class:"bi bi-trash mr-1"},null,-1),d(" 删除 ")]),8,Dt)])])]))),128))]))])]),b.value||V.value?(i(),l("div",zt,[e("div",Bt,[e("div",Et,[e("h3",Lt,[t[27]||(t[27]=e("i",{class:"bi bi-geo-alt text-cyan-400"},null,-1)),d(" "+n(q.value?"编辑地址":"添加新地址"),1)]),e("form",{onSubmit:t[10]||(t[10]=tt(s=>q.value?T():F(),["prevent"])),class:"space-y-6"},[e("div",St,[e("div",Ft,[t[28]||(t[28]=e("label",{for:"name",class:"block text-sm font-medium text-cyan-400"},"收货人姓名 *",-1)),p(e("input",{id:"name","onUpdate:modelValue":t[2]||(t[2]=s=>o.name=s),type:"text",class:"input-dark w-full",placeholder:"请输入收货人姓名",required:""},null,512),[[w,o.name]])]),e("div",It,[t[29]||(t[29]=e("label",{for:"phone",class:"block text-sm font-medium text-cyan-400"},"手机号码 *",-1)),p(e("input",{id:"phone","onUpdate:modelValue":t[3]||(t[3]=s=>o.phone=s),type:"tel",class:"input-dark w-full",placeholder:"请输入手机号码",required:""},null,512),[[w,o.phone]])])]),e("div",Tt,[e("div",Ht,[t[31]||(t[31]=e("label",{for:"province",class:"block text-sm font-medium text-cyan-400"},"省份 *",-1)),p(e("select",{id:"province","onUpdate:modelValue":t[4]||(t[4]=s=>o.province=s),class:"input-dark w-full",required:"",onChange:$},[t[30]||(t[30]=e("option",{value:""},"请选择省份",-1)),(i(!0),l(h,null,_(E.value,s=>(i(),l("option",{key:s,value:s},n(s),9,Kt))),128))],544),[[N,o.province]])]),e("div",Pt,[t[33]||(t[33]=e("label",{for:"city",class:"block text-sm font-medium text-cyan-400"},"城市 *",-1)),p(e("select",{id:"city","onUpdate:modelValue":t[5]||(t[5]=s=>o.city=s),class:"input-dark w-full",required:"",onChange:j},[t[32]||(t[32]=e("option",{value:""},"请选择城市",-1)),(i(!0),l(h,null,_(M.value,s=>(i(),l("option",{key:s,value:s},n(s),9,Gt))),128))],544),[[N,o.city]])]),e("div",Jt,[t[35]||(t[35]=e("label",{for:"district",class:"block text-sm font-medium text-cyan-400"},"区县 *",-1)),p(e("select",{id:"district","onUpdate:modelValue":t[6]||(t[6]=s=>o.district=s),class:"input-dark w-full",required:""},[t[34]||(t[34]=e("option",{value:""},"请选择区县",-1)),(i(!0),l(h,null,_(x.value,s=>(i(),l("option",{key:s,value:s},n(s),9,Ot))),128))],512),[[N,o.district]])])]),e("div",Qt,[t[36]||(t[36]=e("label",{for:"detail",class:"block text-sm font-medium text-cyan-400"},"详细地址 *",-1)),p(e("textarea",{id:"detail","onUpdate:modelValue":t[7]||(t[7]=s=>o.detail=s),class:"input-dark w-full h-24 resize-none",placeholder:"请输入详细地址，如街道、门牌号、楼层等",required:""},null,512),[[w,o.detail]])]),e("div",Rt,[e("div",Wt,[t[37]||(t[37]=e("label",{for:"postal_code",class:"block text-sm font-medium text-cyan-400"},"邮政编码",-1)),p(e("input",{id:"postal_code","onUpdate:modelValue":t[8]||(t[8]=s=>o.postal_code=s),type:"text",class:"input-dark w-full",placeholder:"请输入邮政编码（可选）"},null,512),[[w,o.postal_code]])]),e("div",Xt,[e("label",Yt,[p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.is_default=s),type:"checkbox",class:"w-4 h-4 text-cyan-500 bg-transparent border-2 border-cyan-500 rounded focus:ring-cyan-500"},null,512),[[et,o.is_default]]),t[38]||(t[38]=e("span",{class:"text-sm text-gray-300"},"设为默认地址",-1))])])]),e("div",Zt,[e("button",{type:"button",onClick:U,class:"btn-outline-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1"},t[39]||(t[39]=[e("i",{class:"bi bi-x-circle mr-2"},null,-1),d(" 取消 ")])),e("button",{type:"submit",disabled:v.value,class:"btn-premium-dark px-6 py-3 rounded-lg font-medium transition-all duration-300 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed"},[v.value?(i(),l("span",ee)):(i(),l("i",se)),d(" "+n(v.value?"保存中...":q.value?"保存修改":"添加地址"),1)],8,te)])],32)])])])):g("",!0)])}}}),ce=st(ae,[["__scopeId","data-v-b50377c2"]]);export{ce as default};
